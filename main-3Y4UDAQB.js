var _p=Object.defineProperty,Zb=Object.defineProperties;var Qb=Object.getOwnPropertyDescriptors;var xp=Object.getOwnPropertySymbols;var Xb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable;var Cp=e=>{throw TypeError(e)};var Ip=(e,t,n)=>t in e?_p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||={})Xb.call(t,n)&&Ip(e,n,t[n]);if(xp)for(var n of xp(t))Jb.call(t,n)&&Ip(e,n,t[n]);return e},V=(e,t)=>Zb(e,Qb(t));var Sp=(e,t)=>{for(var n in t)_p(e,n,{get:t[n],enumerable:!0})};var Du=(e,t,n)=>t.has(e)||Cp("Cannot "+n);var fi=(e,t,n)=>(Du(e,t,"read from private field"),n?n.call(e):t.get(e)),xu=(e,t,n)=>t.has(e)?Cp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Iu=(e,t,n,r)=>(Du(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_u=(e,t,n)=>(Du(e,t,"access private method"),n);var le=(e,t,n)=>new Promise((r,o)=>{var i=c=>{try{a(n.next(c))}catch(u){o(u)}},s=c=>{try{a(n.throw(c))}catch(u){o(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((n=n.apply(e,t)).next())});function Tp(e,t){return Object.is(e,t)}var Ce=null,Ss=!1,Ts=1,cn=Symbol("SIGNAL");function J(e){let t=Ce;return Ce=e,t}function Ap(){return Ce}var pi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tu(e){if(Ss)throw new Error("");if(Ce===null)return;Ce.consumerOnSignalRead(e);let t=Ce.nextProducerIndex++;if(Rs(Ce),t<Ce.producerNode.length&&Ce.producerNode[t]!==e&&hi(Ce)){let n=Ce.producerNode[t];Ns(n,Ce.producerIndexOfThis[t])}Ce.producerNode[t]!==e&&(Ce.producerNode[t]=e,Ce.producerIndexOfThis[t]=hi(Ce)?kp(e,Ce,t):0),Ce.producerLastReadVersion[t]=e.version}function eE(){Ts++}function Mp(e){if(!(hi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Ts)){if(!e.producerMustRecompute(e)&&!Mu(e)){e.dirty=!1,e.lastCleanEpoch=Ts;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Ts}}function Np(e){if(e.liveConsumerNode===void 0)return;let t=Ss;Ss=!0;try{for(let n of e.liveConsumerNode)n.dirty||tE(n)}finally{Ss=t}}function Rp(){return Ce?.consumerAllowSignalWrites!==!1}function tE(e){e.dirty=!0,Np(e),e.consumerMarkedDirty?.(e)}function Ms(e){return e&&(e.nextProducerIndex=0),J(e)}function Au(e,t){if(J(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(hi(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Ns(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Mu(e){Rs(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Mp(n),r!==n.version))return!0}return!1}function Nu(e){if(Rs(e),hi(e))for(let t=0;t<e.producerNode.length;t++)Ns(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function kp(e,t,n){if(Op(e),e.liveConsumerNode.length===0&&Pp(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=kp(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Ns(e,t){if(Op(e),e.liveConsumerNode.length===1&&Pp(e))for(let r=0;r<e.producerNode.length;r++)Ns(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];Rs(o),o.producerIndexOfThis[r]=t}}function hi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Rs(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Op(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Pp(e){return e.producerNode!==void 0}function Lp(e){let t=Object.create(nE);t.computation=e;let n=()=>{if(Mp(t),Tu(t),t.value===As)throw t.error;return t.value};return n[cn]=t,n}var Cu=Symbol("UNSET"),Su=Symbol("COMPUTING"),As=Symbol("ERRORED"),nE=V(T({},pi),{value:Cu,dirty:!0,error:null,equal:Tp,producerMustRecompute(e){return e.value===Cu||e.value===Su},producerRecomputeValue(e){if(e.value===Su)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Su;let n=Ms(e),r;try{r=e.computation()}catch(o){r=As,e.error=o}finally{Au(e,n)}if(t!==Cu&&t!==As&&r!==As&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function rE(){throw new Error}var Fp=rE;function Bp(){Fp()}function Vp(e){Fp=e}var oE=null;function jp(e){let t=Object.create($p);t.value=e;let n=()=>(Tu(t),t.value);return n[cn]=t,n}function Ru(e,t){Rp()||Bp(),e.equal(e.value,t)||(e.value=t,iE(e))}function Up(e,t){Rp()||Bp(),Ru(e,t(e.value))}var $p=V(T({},pi),{equal:Tp,value:void 0});function iE(e){e.version++,eE(),Np(e),oE?.()}function q(e){return typeof e=="function"}function no(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ks=no(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function gi(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Xe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(i){t=i instanceof ks?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Hp(i)}catch(s){t=t??[],s instanceof ks?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ks(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Hp(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&gi(n,t)}remove(t){let{_finalizers:n}=this;n&&gi(n,t),t instanceof e&&t._removeParent(this)}};Xe.EMPTY=(()=>{let e=new Xe;return e.closed=!0,e})();var ku=Xe.EMPTY;function Os(e){return e instanceof Xe||e&&"closed"in e&&q(e.remove)&&q(e.add)&&q(e.unsubscribe)}function Hp(e){q(e)?e():e.unsubscribe()}var Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ro={setTimeout(e,t,...n){let{delegate:r}=ro;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ro;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ps(e){ro.setTimeout(()=>{let{onUnhandledError:t}=Pt;if(t)t(e);else throw e})}function Ou(){}var Gp=Pu("C",void 0,void 0);function Wp(e){return Pu("E",void 0,e)}function zp(e){return Pu("N",e,void 0)}function Pu(e,t,n){return{kind:e,value:t,error:n}}var mr=null;function oo(e){if(Pt.useDeprecatedSynchronousErrorHandling){let t=!mr;if(t&&(mr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=mr;if(mr=null,n)throw r}}else e()}function qp(e){Pt.useDeprecatedSynchronousErrorHandling&&mr&&(mr.errorThrown=!0,mr.error=e)}var yr=class extends Xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Os(t)&&t.add(this)):this.destination=cE}static create(t,n,r){return new On(t,n,r)}next(t){this.isStopped?Fu(zp(t),this):this._next(t)}error(t){this.isStopped?Fu(Wp(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Fu(Gp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sE=Function.prototype.bind;function Lu(e,t){return sE.call(e,t)}var Bu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ls(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ls(r)}else Ls(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ls(n)}}},On=class extends yr{constructor(t,n,r){super();let o;if(q(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Pt.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Lu(t.next,i),error:t.error&&Lu(t.error,i),complete:t.complete&&Lu(t.complete,i)}):o=t}this.destination=new Bu(o)}};function Ls(e){Pt.useDeprecatedSynchronousErrorHandling?qp(e):Ps(e)}function aE(e){throw e}function Fu(e,t){let{onStoppedNotification:n}=Pt;n&&ro.setTimeout(()=>n(e,t))}var cE={closed:!0,next:Ou,error:aE,complete:Ou};var io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kp(e){return e}function Yp(e){return e.length===0?Kp:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var Se=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=lE(n)?n:new On(n,r,o);return oo(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Zp(r),new r((o,i)=>{let s=new On({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[io](){return this}pipe(...n){return Yp(n)(this)}toPromise(n){return n=Zp(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function Zp(e){var t;return(t=e??Pt.Promise)!==null&&t!==void 0?t:Promise}function uE(e){return e&&q(e.next)&&q(e.error)&&q(e.complete)}function lE(e){return e&&e instanceof yr||uE(e)&&Os(e)}function dE(e){return q(e?.lift)}function qt(e){return t=>{if(dE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Lt(e,t,n,r,o){return new Vu(e,t,n,r,o)}var Vu=class extends yr{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Qp=no(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Kt=(()=>{class e extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Fs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Qp}next(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?ku:(this.currentObservers=null,i.push(n),new Xe(()=>{this.currentObservers=null,gi(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return e.create=(t,n)=>new Fs(t,n),e})(),Fs=class extends Kt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ku}};var mi=class extends Kt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};function Xp(e){return e&&q(e.schedule)}function Jp(e){return e[e.length-1]}function eg(e){return q(Jp(e))?e.pop():void 0}function tg(e){return Xp(Jp(e))?e.pop():void 0}function rg(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function ng(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wr(e){return this instanceof wr?(this.v=e,this):new wr(e)}function og(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(p){return function(y){return Promise.resolve(y).then(p,d)}}function a(p,y){r[p]&&(o[p]=function(f){return new Promise(function(m,g){i.push([p,f,m,g])>1||c(p,f)})},y&&(o[p]=y(o[p])))}function c(p,y){try{u(r[p](y))}catch(f){h(i[0][3],f)}}function u(p){p.value instanceof wr?Promise.resolve(p.value.v).then(l,d):h(i[0][2],p)}function l(p){c("next",p)}function d(p){c("throw",p)}function h(p,y){p(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ig(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ng=="function"?ng(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var Bs=e=>e&&typeof e.length=="number"&&typeof e!="function";function Vs(e){return q(e?.then)}function js(e){return q(e[io])}function Us(e){return Symbol.asyncIterator&&q(e?.[Symbol.asyncIterator])}function $s(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hs=fE();function Gs(e){return q(e?.[Hs])}function Ws(e){return og(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield wr(n.read());if(o)return yield wr(void 0);yield yield wr(r)}}finally{n.releaseLock()}})}function zs(e){return q(e?.getReader)}function _t(e){if(e instanceof Se)return e;if(e!=null){if(js(e))return hE(e);if(Bs(e))return pE(e);if(Vs(e))return gE(e);if(Us(e))return sg(e);if(Gs(e))return mE(e);if(zs(e))return yE(e)}throw $s(e)}function hE(e){return new Se(t=>{let n=e[io]();if(q(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pE(e){return new Se(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function gE(e){return new Se(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ps)})}function mE(e){return new Se(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function sg(e){return new Se(t=>{wE(e,t).catch(n=>t.error(n))})}function yE(e){return sg(Ws(e))}function wE(e,t){var n,r,o,i;return rg(this,void 0,void 0,function*(){try{for(n=ig(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function Ct(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function qs(e,t=0){return qt((n,r)=>{n.subscribe(Lt(r,o=>Ct(r,e,()=>r.next(o),t),()=>Ct(r,e,()=>r.complete(),t),o=>Ct(r,e,()=>r.error(o),t)))})}function Ks(e,t=0){return qt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function ag(e,t){return _t(e).pipe(Ks(t),qs(t))}function cg(e,t){return _t(e).pipe(Ks(t),qs(t))}function ug(e,t){return new Se(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function lg(e,t){return new Se(n=>{let r;return Ct(n,t,()=>{r=e[Hs](),Ct(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>q(r?.return)&&r.return()})}function Ys(e,t){if(!e)throw new Error("Iterable cannot be null");return new Se(n=>{Ct(n,t,()=>{let r=e[Symbol.asyncIterator]();Ct(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function dg(e,t){return Ys(Ws(e),t)}function fg(e,t){if(e!=null){if(js(e))return ag(e,t);if(Bs(e))return ug(e,t);if(Vs(e))return cg(e,t);if(Us(e))return Ys(e,t);if(Gs(e))return lg(e,t);if(zs(e))return dg(e,t)}throw $s(e)}function so(e,t){return t?fg(e,t):_t(e)}function ju(...e){let t=tg(e);return so(e,t)}var hg=no(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Uu(e,t){let n=typeof t=="object";return new Promise((r,o)=>{let i=new On({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(t.defaultValue):o(new hg)}});e.subscribe(i)})}function at(e,t){return qt((n,r)=>{let o=0;n.subscribe(Lt(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:vE}=Array;function bE(e,t){return vE(t)?e(...t):e(t)}function pg(e){return at(t=>bE(e,t))}var{isArray:EE}=Array,{getPrototypeOf:DE,prototype:xE,keys:IE}=Object;function gg(e){if(e.length===1){let t=e[0];if(EE(t))return{args:t,keys:null};if(_E(t)){let n=IE(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function _E(e){return e&&typeof e=="object"&&DE(e)===xE}function mg(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function yg(e,t,n,r,o,i,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&t.complete()},p=f=>u<r?y(f):c.push(f),y=f=>{i&&t.next(f),u++;let m=!1;_t(n(f,l++)).subscribe(Lt(t,g=>{o?.(g),i?p(g):t.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let g=c.shift();s?Ct(t,s,()=>y(g)):y(g)}h()}catch(g){t.error(g)}}))};return e.subscribe(Lt(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Zs(e,t,n=1/0){return q(t)?Zs((r,o)=>at((i,s)=>t(r,i,o,s))(_t(e(r,o))),n):(typeof t=="number"&&(n=t),qt((r,o)=>yg(r,o,e,n)))}function $u(...e){let t=eg(e),{args:n,keys:r}=gg(e),o=new Se(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;_t(n[l]).subscribe(Lt(i,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||i.next(r?mg(r,a):a),i.complete())}))}});return t?o.pipe(pg(t)):o}function Hu(e,t){return qt((n,r)=>{let o=0;n.subscribe(Lt(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Gu(e,t){return q(t)?Zs(e,t,1):Zs(e,1)}var CE="https://g.co/ng/security#xss",Z=class extends Error{constructor(t,n){super(Ql(t,n)),this.code=t}};function Ql(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Si(e){return{toString:e}.toString()}var Qs="__parameters__";function SE(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function nm(e,t,n){return Si(()=>{let r=SE(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Qs)?c[Qs]:Object.defineProperty(c,Qs,{value:[]})[Qs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function de(e){for(let t in e)if(e[t]===de)return t;throw Error("Could not find renamed property on target object.")}function TE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ht(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(ht).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function wg(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var AE=de({__forward_ref__:de});function Un(e){return e.__forward_ref__=Un,e.toString=function(){return ht(this())},e}function Je(e){return rm(e)?e():e}function rm(e){return typeof e=="function"&&e.hasOwnProperty(AE)&&e.__forward_ref__===Un}function ae(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Nr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Xl(e){return vg(e,om)||vg(e,im)}function vg(e,t){return e.hasOwnProperty(t)?e[t]:null}function ME(e){let t=e&&(e[om]||e[im]);return t||null}function bg(e){return e&&(e.hasOwnProperty(Eg)||e.hasOwnProperty(NE))?e[Eg]:null}var om=de({\u0275prov:de}),Eg=de({\u0275inj:de}),im=de({ngInjectableDef:de}),NE=de({ngInjectorDef:de}),Q=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sm(e){return e&&!!e.\u0275providers}var RE=de({\u0275cmp:de}),kE=de({\u0275dir:de}),OE=de({\u0275pipe:de});var ia=de({\u0275fac:de}),wi=de({__NG_ELEMENT_ID__:de}),Dg=de({__NG_ENV_ID__:de});function Jl(e){return typeof e=="string"?e:e==null?"":String(e)}function PE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Jl(e)}function LE(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Z(-200,e)}function ed(e,t){throw new Z(-201,!1)}var K=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(K||{}),il;function am(){return il}function Yt(e){let t=il;return il=e,t}function cm(e,t,n){let r=Xl(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&K.Optional)return null;if(t!==void 0)return t;ed(e,"Injector")}var FE={},vi=FE,sl="__NG_DI_FLAG__",sa="ngTempTokenPath",BE="ngTokenPath",VE=/\n/gm,jE="\u0275",xg="__source",fo;function UE(){return fo}function ao(e){let t=fo;return fo=e,t}function $E(e,t=K.Default){if(fo===void 0)throw new Z(-203,!1);return fo===null?cm(e,void 0,t):fo.get(e,t&K.Optional?null:void 0,t)}function ee(e,t=K.Default){return(am()||$E)(Je(e),t)}function ie(e,t=K.Default){return ee(e,Sa(t))}function Sa(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function al(e){let t=[];for(let n=0;n<e.length;n++){let r=Je(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let o,i=K.Default;for(let s=0;s<r.length;s++){let a=r[s],c=HE(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(ee(o,i))}else t.push(ee(r))}return t}function um(e,t){return e[sl]=t,e.prototype[sl]=t,e}function HE(e){return e[sl]}function GE(e,t,n,r){let o=e[sa];throw t[xg]&&o.unshift(t[xg]),e.message=WE(`
`+e.message,o,n,r),e[BE]=o,e[sa]=null,e}function WE(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==jE?e.slice(2):e;let o=ht(t);if(Array.isArray(t))o=t.map(ht).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):ht(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(VE,`
  `)}`}var lm=um(nm("Optional"),8);var zE=um(nm("SkipSelf"),4);function po(e,t){let n=e.hasOwnProperty(ia);return n?e[ia]:null}function qE(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function KE(e){return e.flat(Number.POSITIVE_INFINITY)}function td(e,t){e.forEach(n=>Array.isArray(n)?td(n,t):t(n))}function dm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function aa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function YE(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function ZE(e,t,n){let r=Ti(e,t);return r>=0?e[r|1]=n:(r=~r,YE(e,r,t,n)),r}function Wu(e,t){let n=Ti(e,t);if(n>=0)return e[n|1]}function Ti(e,t){return QE(e,t,1)}function QE(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var go={},St=[],bi=new Q(""),fm=new Q("",-1),hm=new Q(""),ca=class{get(t,n=vi){if(n===vi){let r=new Error(`NullInjectorError: No provider for ${ht(t)}!`);throw r.name="NullInjectorError",r}return n}},pm=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(pm||{}),Xt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Xt||{}),Fn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Fn||{});function XE(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function cl(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];eD(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function JE(e){return e===3||e===4||e===6}function eD(e){return e.charCodeAt(0)===64}function Ei(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Ig(e,n,o,null,t[++r]):Ig(e,n,o,null,null))}}return e}function Ig(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var gm="ng-template";function tD(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&XE(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(nd(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function nd(e){return e.type===4&&e.value!==gm}function nD(e,t,n){let r=e.type===4&&!n?gm:e.value;return t===r}function rD(e,t,n){let r=4,o=e.attrs,i=o!==null?sD(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ft(r)&&!Ft(c))return!1;if(s&&Ft(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!nD(e,c,n)||c===""&&t.length===1){if(Ft(r))return!1;s=!0}}else if(r&8){if(o===null||!tD(e,o,c,n)){if(Ft(r))return!1;s=!0}}else{let u=t[++a],l=oD(c,o,nd(e),n);if(l===-1){if(Ft(r))return!1;s=!0;continue}if(u!==""){let d;if(l>i?d="":d=o[l+1].toLowerCase(),r&2&&u!==d){if(Ft(r))return!1;s=!0}}}}return Ft(r)||s}function Ft(e){return(e&1)===0}function oD(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return aD(t,e)}function iD(e,t,n=!1){for(let r=0;r<t.length;r++)if(rD(e,t[r],n))return!0;return!1}function sD(e){for(let t=0;t<e.length;t++){let n=e[t];if(JE(n))return t}return e.length}function aD(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function _g(e,t){return e?":not("+t.trim()+")":t}function cD(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Ft(s)&&(t+=_g(i,o),o=""),r=s,i=i||!Ft(r);n++}return o!==""&&(t+=_g(i,o)),t}function uD(e){return e.map(cD).join(",")}function lD(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!Ft(o))break;o=i}r++}return{attrs:t,classes:n}}function Ta(e){return Si(()=>{let t=wm(e),n=V(T({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===pm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Xt.Emulated,styles:e.styles||St,_:null,schemas:e.schemas||null,tView:null,id:""});vm(n);let r=e.dependencies;return n.directiveDefs=Sg(r,!1),n.pipeDefs=Sg(r,!0),n.id=pD(n),n})}function dD(e){return mo(e)||mm(e)}function fD(e){return e!==null}function Rr(e){return Si(()=>({type:e.type,bootstrap:e.bootstrap||St,declarations:e.declarations||St,imports:e.imports||St,exports:e.exports||St,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Cg(e,t){if(e==null)return go;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=Fn.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==Fn.None?[r,a]:r,t[i]=s):n[i]=r}return n}function Ge(e){return Si(()=>{let t=wm(e);return vm(t),t})}function mo(e){return e[RE]||null}function mm(e){return e[kE]||null}function ym(e){return e[OE]||null}function hD(e){let t=mo(e)||mm(e)||ym(e);return t!==null?t.standalone:!1}function wm(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||go,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||St,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cg(e.inputs,t),outputs:Cg(e.outputs),debugInfo:null}}function vm(e){e.features?.forEach(t=>t(e))}function Sg(e,t){if(!e)return null;let n=t?ym:dD;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(fD)}function pD(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function gD(...e){return{\u0275providers:bm(!0,e),\u0275fromNgModule:!0}}function bm(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return td(t,s=>{let a=s;ul(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Em(o,i),n}function Em(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];rd(o,i=>{t(i,r)})}}function ul(e,t,n,r){if(e=Je(e),!e)return!1;let o=null,i=bg(e),s=!i&&mo(e);if(!i&&!s){let c=e.ngModule;if(i=bg(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ul(u,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{td(i.imports,l=>{ul(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Em(u,t)}if(!a){let u=po(o)||(()=>new o);t({provide:o,useFactory:u,deps:St},o),t({provide:hm,useValue:o,multi:!0},o),t({provide:bi,useValue:()=>ee(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=e;rd(c,l=>{t(l,u)})}}else return!1;return o!==e&&e.providers!==void 0}function rd(e,t){for(let n of e)sm(n)&&(n=n.\u0275providers),Array.isArray(n)?rd(n,t):t(n)}var mD=de({provide:String,useValue:de});function Dm(e){return e!==null&&typeof e=="object"&&mD in e}function yD(e){return!!(e&&e.useExisting)}function wD(e){return!!(e&&e.useFactory)}function yo(e){return typeof e=="function"}function vD(e){return!!e.useClass}var Aa=new Q(""),ea={},bD={},zu;function od(){return zu===void 0&&(zu=new ca),zu}var un=class{},ua=class extends un{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dl(t,s=>this.processProvider(s)),this.records.set(fm,co(void 0,this)),o.has("environment")&&this.records.set(un,co(void 0,this));let i=this.records.get(Aa);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(hm,St,K.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=ao(this),r=Yt(void 0),o;try{return t()}finally{ao(n),Yt(r)}}get(t,n=vi,r=K.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Dg))return t[Dg](this);r=Sa(r);let o,i=ao(this),s=Yt(void 0);try{if(!(r&K.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=_D(t)&&Xl(t);u&&this.injectableDefInScope(u)?c=co(ll(t),ea):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&K.Self?od():this.parent;return n=r&K.Optional&&n===vi?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sa]=a[sa]||[]).unshift(ht(t)),i)throw a;return GE(a,t,"R3InjectorError",this.source)}else throw a}finally{Yt(s),ao(i)}}resolveInjectorInitializers(){let t=J(null),n=ao(this),r=Yt(void 0),o;try{let i=this.get(bi,St,K.Self);for(let s of i)s()}finally{ao(n),Yt(r),J(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(ht(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(t){t=Je(t);let n=yo(t)?t:Je(t&&t.provide),r=DD(t);if(!yo(t)&&t.multi===!0){let o=this.records.get(n);o||(o=co(void 0,ea,!0),o.factory=()=>al(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=J(null);try{return n.value===ea&&(n.value=bD,n.value=n.factory()),typeof n.value=="object"&&n.value&&ID(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Je(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ll(e){let t=Xl(e),n=t!==null?t.factory:po(e);if(n!==null)return n;if(e instanceof Q)throw new Z(204,!1);if(e instanceof Function)return ED(e);throw new Z(204,!1)}function ED(e){if(e.length>0)throw new Z(204,!1);let n=ME(e);return n!==null?()=>n.factory(e):()=>new e}function DD(e){if(Dm(e))return co(void 0,e.useValue);{let t=xm(e);return co(t,ea)}}function xm(e,t,n){let r;if(yo(e)){let o=Je(e);return po(o)||ll(o)}else if(Dm(e))r=()=>Je(e.useValue);else if(wD(e))r=()=>e.useFactory(...al(e.deps||[]));else if(yD(e))r=()=>ee(Je(e.useExisting));else{let o=Je(e&&(e.useClass||e.provide));if(xD(e))r=()=>new o(...al(e.deps));else return po(o)||ll(o)}return r}function co(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function xD(e){return!!e.deps}function ID(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function _D(e){return typeof e=="function"||typeof e=="object"&&e instanceof Q}function dl(e,t){for(let n of e)Array.isArray(n)?dl(n,t):n&&sm(n)?dl(n.\u0275providers,t):t(n)}function CD(){return am()!==void 0||UE()!=null}function SD(e){return typeof e=="function"}var hn=0,W=1,H=2,He=3,Bt=4,jt=5,la=6,da=7,Vt=8,wo=9,ln=10,Te=11,Di=12,Tg=13,Io=14,Jt=15,Er=16,uo=17,dn=18,Ma=19,Im=20,Pn=21,qu=22,Tt=23,Bn=25,_m=1;var Dr=7,fa=8,vo=9,pt=10,ha=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(ha||{});function Ln(e){return Array.isArray(e)&&typeof e[_m]=="object"}function pn(e){return Array.isArray(e)&&e[_m]===!0}function Cm(e){return(e.flags&4)!==0}function Na(e){return e.componentOffset>-1}function id(e){return(e.flags&1)===1}function Vn(e){return!!e.template}function fl(e){return(e[H]&512)!==0}var hl=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Sm(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function kr(){return Tm}function Tm(e){return e.type.prototype.ngOnChanges&&(e.setInput=AD),TD}kr.ngInherit=!0;function TD(){let e=Mm(this),t=e?.current;if(t){let n=e.previous;if(n===go)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function AD(e,t,n,r,o){let i=this.declaredInputs[r],s=Mm(e)||MD(e,{previous:go,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[i];a[i]=new hl(u&&u.currentValue,n,c===go),Sm(e,t,o,n)}var Am="__ngSimpleChanges__";function Mm(e){return e[Am]||null}function MD(e,t){return e[Am]=t}var Ag=null;var Zt=function(e,t,n){Ag?.(e,t,n)},ND="svg",RD="math";function en(e){for(;Array.isArray(e);)e=e[hn];return e}function Nm(e,t){return en(t[e])}function At(e,t){return en(t[e.index])}function Rm(e,t){return e.data[t]}function $n(e,t){let n=t[e];return Ln(n)?n:n[hn]}function kD(e){return(e[H]&4)===4}function sd(e){return(e[H]&128)===128}function OD(e){return pn(e[He])}function pa(e,t){return t==null?null:e[t]}function km(e){e[uo]=0}function Om(e){e[H]&1024||(e[H]|=1024,sd(e)&&Ra(e))}function PD(e,t){for(;e>0;)t=t[Io],e--;return t}function xi(e){return!!(e[H]&9216||e[Tt]?.dirty)}function pl(e){e[ln].changeDetectionScheduler?.notify(7),e[H]&64&&(e[H]|=1024),xi(e)&&Ra(e)}function Ra(e){e[ln].changeDetectionScheduler?.notify(0);let t=xr(e);for(;t!==null&&!(t[H]&8192||(t[H]|=8192,!sd(t)));)t=xr(t)}function Pm(e,t){if((e[H]&256)===256)throw new Z(911,!1);e[Pn]===null&&(e[Pn]=[]),e[Pn].push(t)}function LD(e,t){if(e[Pn]===null)return;let n=e[Pn].indexOf(t);n!==-1&&e[Pn].splice(n,1)}function xr(e){let t=e[He];return pn(t)?t[He]:t}var z={lFrame:Gm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lm=!1;function FD(){return z.lFrame.elementDepthCount}function BD(){z.lFrame.elementDepthCount++}function VD(){z.lFrame.elementDepthCount--}function Fm(){return z.bindingsEnabled}function jD(){return z.skipHydrationRootTNode!==null}function UD(e){return z.skipHydrationRootTNode===e}function $D(){z.skipHydrationRootTNode=null}function se(){return z.lFrame.lView}function et(){return z.lFrame.tView}function Hn(e){return z.lFrame.contextLView=e,e[Vt]}function Gn(e){return z.lFrame.contextLView=null,e}function ut(){let e=Bm();for(;e!==null&&e.type===64;)e=e.parent;return e}function Bm(){return z.lFrame.currentTNode}function HD(){let e=z.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ai(e,t){let n=z.lFrame;n.currentTNode=e,n.isParent=t}function Vm(){return z.lFrame.isParent}function GD(){z.lFrame.isParent=!1}function jm(){return Lm}function Mg(e){Lm=e}function WD(e){return z.lFrame.bindingIndex=e}function ka(){return z.lFrame.bindingIndex++}function zD(e){let t=z.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function qD(){return z.lFrame.inI18n}function KD(e,t){let n=z.lFrame;n.bindingIndex=n.bindingRootIndex=e,gl(t)}function YD(){return z.lFrame.currentDirectiveIndex}function gl(e){z.lFrame.currentDirectiveIndex=e}function ZD(e){let t=z.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Um(){return z.lFrame.currentQueryIndex}function ad(e){z.lFrame.currentQueryIndex=e}function QD(e){let t=e[W];return t.type===2?t.declTNode:t.type===1?e[jt]:null}function $m(e,t,n){if(n&K.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&K.Host);)if(o=QD(i),o===null||(i=i[Io],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=z.lFrame=Hm();return r.currentTNode=t,r.lView=e,!0}function cd(e){let t=Hm(),n=e[W];z.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Hm(){let e=z.lFrame,t=e===null?null:e.child;return t===null?Gm(e):t}function Gm(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Wm(){let e=z.lFrame;return z.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var zm=Wm;function ud(){let e=Wm();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function XD(e){return(z.lFrame.contextLView=PD(e,z.lFrame.contextLView))[Vt]}function _o(){return z.lFrame.selectedIndex}function Ir(e){z.lFrame.selectedIndex=e}function ld(){let e=z.lFrame;return Rm(e.tView,e.selectedIndex)}function JD(){return z.lFrame.currentNamespace}var qm=!0;function dd(){return qm}function fd(e){qm=e}function ex(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=Tm(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function hd(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function ta(e,t,n){Km(e,t,3,n)}function na(e,t,n,r){(e[H]&3)===n&&Km(e,t,n,r)}function Ku(e,t){let n=e[H];(n&3)===t&&(n&=16383,n+=1,e[H]=n)}function Km(e,t,n,r){let o=r!==void 0?e[uo]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[uo]+=65536),(a<i||i==-1)&&(tx(e,n,t,c),e[uo]=(e[uo]&4294901760)+c+2),c++}function Ng(e,t){Zt(4,e,t);let n=J(null);try{t.call(e)}finally{J(n),Zt(5,e,t)}}function tx(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[H]>>14<e[uo]>>16&&(e[H]&3)===t&&(e[H]+=16384,Ng(a,i)):Ng(a,i)}var ho=-1,_r=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function nx(e){return e instanceof _r}function rx(e){return(e.flags&8)!==0}function ox(e){return(e.flags&16)!==0}var Yu={},ml=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Sa(r);let o=this.injector.get(t,Yu,r);return o!==Yu||n===Yu?o:this.parentInjector.get(t,n,r)}};function Ym(e){return e!==ho}function ga(e){return e&32767}function ix(e){return e>>16}function ma(e,t){let n=ix(e),r=t;for(;n>0;)r=r[Io],n--;return r}var yl=!0;function Rg(e){let t=yl;return yl=e,t}var sx=256,Zm=sx-1,Qm=5,ax=0,Qt={};function cx(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(wi)&&(r=n[wi]),r==null&&(r=n[wi]=ax++);let o=r&Zm,i=1<<o;t.data[e+(o>>Qm)]|=i}function ya(e,t){let n=Xm(e,t);if(n!==-1)return n;let r=t[W];r.firstCreatePass&&(e.injectorIndex=t.length,Zu(r.data,e),Zu(t,null),Zu(r.blueprint,null));let o=pd(e,t),i=e.injectorIndex;if(Ym(o)){let s=ga(o),a=ma(o,t),c=a[W].data;for(let u=0;u<8;u++)t[i+u]=a[s+u]|c[s+u]}return t[i+8]=o,i}function Zu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Xm(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function pd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=ry(o),r===null)return ho;if(n++,o=o[Io],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ho}function wl(e,t,n){cx(e,t,n)}function Jm(e,t,n){if(n&K.Optional||e!==void 0)return e;ed(t,"NodeInjector")}function ey(e,t,n,r){if(n&K.Optional&&r===void 0&&(r=null),!(n&(K.Self|K.Host))){let o=e[wo],i=Yt(void 0);try{return o?o.get(t,r,n&K.Optional):cm(t,r,n&K.Optional)}finally{Yt(i)}}return Jm(r,t,n)}function ty(e,t,n,r=K.Default,o){if(e!==null){if(t[H]&2048&&!(r&K.Self)){let s=fx(e,t,n,r,Qt);if(s!==Qt)return s}let i=ny(e,t,n,r,Qt);if(i!==Qt)return i}return ey(t,n,r,o)}function ny(e,t,n,r,o){let i=lx(n);if(typeof i=="function"){if(!$m(t,e,r))return r&K.Host?Jm(o,n,r):ey(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&K.Optional))ed(n);else return s}finally{zm()}}else if(typeof i=="number"){let s=null,a=Xm(e,t),c=ho,u=r&K.Host?t[Jt][jt]:null;for((a===-1||r&K.SkipSelf)&&(c=a===-1?pd(e,t):t[a+8],c===ho||!Og(r,!1)?a=-1:(s=t[W],a=ga(c),t=ma(c,t)));a!==-1;){let l=t[W];if(kg(i,a,l.data)){let d=ux(a,t,n,s,r,u);if(d!==Qt)return d}c=t[a+8],c!==ho&&Og(r,t[W].data[a+8]===u)&&kg(i,a,t)?(s=l,a=ga(c),t=ma(c,t)):a=-1}}return o}function ux(e,t,n,r,o,i){let s=t[W],a=s.data[e+8],c=r==null?Na(a)&&yl:r!=s&&(a.type&3)!==0,u=o&K.Host&&i===a,l=ra(a,s,n,c,u);return l!==null?Cr(t,s,l,a):Qt}function ra(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,u=e.directiveEnd,l=i>>20,d=r?a:a+l,h=o?a+l:u;for(let p=d;p<h;p++){let y=s[p];if(p<c&&n===y||p>=c&&y.type===n)return p}if(o){let p=s[c];if(p&&Vn(p)&&p.type===n)return c}return null}function Cr(e,t,n,r){let o=e[n],i=t.data;if(nx(o)){let s=o;s.resolving&&LE(PE(i[n]));let a=Rg(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Yt(s.injectImpl):null,l=$m(e,r,K.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&ex(n,i[n],t)}finally{u!==null&&Yt(u),Rg(a),s.resolving=!1,zm()}}return o}function lx(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(wi)?e[wi]:void 0;return typeof t=="number"?t>=0?t&Zm:dx:t}function kg(e,t,n){let r=1<<e;return!!(n[t+(e>>Qm)]&r)}function Og(e,t){return!(e&K.Self)&&!(e&K.Host&&t)}var br=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ty(this._tNode,this._lView,t,Sa(r),n)}};function dx(){return new br(ut(),se())}function Mi(e){return Si(()=>{let t=e.prototype.constructor,n=t[ia]||vl(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[ia]||vl(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function vl(e){return rm(e)?()=>{let t=vl(Je(e));return t&&t()}:po(e)}function fx(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[H]&2048&&!(s[H]&512);){let a=ny(i,s,n,r|K.Self,Qt);if(a!==Qt)return a;let c=i.parent;if(!c){let u=s[Im];if(u){let l=u.get(n,Qt,r);if(l!==Qt)return l}c=ry(s),s=s[Io]}i=c}return o}function ry(e){let t=e[W],n=t.type;return n===2?t.declTNode:n===1?e[jt]:null}function Pg(e,t=null,n=null,r){let o=hx(e,t,n,r);return o.resolveInjectorInitializers(),o}function hx(e,t=null,n=null,r,o=new Set){let i=[n||St,gD(e)];return r=r||(typeof e=="object"?void 0:ht(e)),new ua(i,t||od(),r||null,o)}var vr=class vr{static create(t,n){if(Array.isArray(t))return Pg({name:""},n,t,"");{let r=t.name??"";return Pg({name:r},t.parent,t.providers,r)}}};vr.THROW_IF_NOT_FOUND=vi,vr.NULL=new ca,vr.\u0275prov=ae({token:vr,providedIn:"any",factory:()=>ee(fm)}),vr.__NG_ELEMENT_ID__=-1;var bo=vr;var px=new Q("");px.__NG_ELEMENT_ID__=e=>{let t=ut();if(t===null)throw new Z(204,!1);if(t.type&2)return t.value;if(e&K.Optional)return null;throw new Z(204,!1)};var gx="ngOriginalError";function Qu(e){return e[gx]}var oy=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=mx,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),bl=class extends oy{constructor(t){super(),this._lView=t}onDestroy(t){return Pm(this._lView,t),()=>LD(this._lView,t)}};function mx(){return new bl(se())}var Oa=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275prov=ae({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();var El=class extends Kt{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,CD()&&(this.destroyRef=ie(oy,{optional:!0})??void 0,this.pendingTasks=ie(Oa,{optional:!0})??void 0)}emit(t){let n=J(null);try{super.next(t)}finally{J(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof Xe&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ct=El;function wa(...e){}function iy(e){let t,n;function r(){e=wa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Lg(e){return queueMicrotask(()=>e()),()=>{e=wa}}var Pe=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,vx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Z(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,yx,wa,wa);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},yx={};function gd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wx(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{iy(()=>{e.callbackScheduled=!1,Dl(e),e.isCheckStableRunning=!0,gd(e),e.isCheckStableRunning=!1})}),Dl(e))}function vx(e){let t=()=>{wx(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(bx(a))return n.invokeTask(o,i,s,a);try{return Fg(e),n.invokeTask(o,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Bg(e)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return Fg(e),n.invoke(o,i,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Ex(a)&&t(),Bg(e)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(e._hasPendingMicrotasks=i.microTask,Dl(e),gd(e)):i.change=="macroTask"&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}function Dl(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Fg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Bg(e){e._nesting--,gd(e)}var xl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function bx(e){return sy(e,"__ignore_ng_zone__")}function Ex(e){return sy(e,"__scheduler_tick__")}function sy(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var jn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Qu(t);for(;n&&Qu(n);)n=Qu(n);return n||null}},Dx=new Q("",{providedIn:"root",factory:()=>{let e=ie(Pe),t=ie(jn);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function xx(){return Co(ut(),se())}function Co(e,t){return new lt(At(e,t))}var lt=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=xx;let e=t;return e})();function Ix(e){return e instanceof lt?e.nativeElement:e}function _x(){return this._results[Symbol.iterator]()}var Il=class e{get changes(){return this._changes??=new ct}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=_x)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=KE(t);(this._changesDetected=!qE(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ay(e){return(e.flags&128)===128}var cy=new Map,Cx=0;function Sx(){return Cx++}function Tx(e){cy.set(e[Ma],e)}function Ax(e){cy.delete(e[Ma])}var Vg="__ngContext__";function Sr(e,t){Ln(t)?(e[Vg]=t[Ma],Tx(t)):e[Vg]=t}function uy(e){return dy(e[Di])}function ly(e){return dy(e[Bt])}function dy(e){for(;e!==null&&!pn(e);)e=e[Bt];return e}var _l;function fy(e){_l=e}function Mx(){if(_l!==void 0)return _l;if(typeof document<"u")return document;throw new Z(210,!1)}var md=new Q("",{providedIn:"root",factory:()=>Nx}),Nx="ng",yd=new Q(""),So=new Q("",{providedIn:"platform",factory:()=>"unknown"});var wd=new Q("",{providedIn:"root",factory:()=>Mx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Rx="h",kx="b";var Ox=()=>null;function vd(e,t,n=!1){return Ox(e,t,n)}var hy=!1,Px=new Q("",{providedIn:"root",factory:()=>hy});var Cl=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${CE})`}};function bd(e){return e instanceof Cl?e.changingThisBreaksApplicationSecurity:e}var fn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(fn||{}),Lx;function Ed(e,t){return Lx(e,t)}function lo(e,t,n,r,o){if(r!=null){let i,s=!1;pn(r)?i=r:Ln(r)&&(s=!0,r=r[hn]);let a=en(r);e===0&&n!==null?o==null?wy(t,n,a):va(t,n,a,o||null,!0):e===1&&n!==null?va(t,n,a,o||null,!0):e===2?Qx(t,a,s):e===3&&t.destroyNode(a),i!=null&&Jx(t,e,i,n,o)}}function Fx(e,t){return e.createText(t)}function Bx(e,t,n){e.setValue(t,n)}function py(e,t,n){return e.createElement(t,n)}function Vx(e,t){gy(e,t),t[hn]=null,t[jt]=null}function jx(e,t,n,r,o,i){r[hn]=o,r[jt]=t,Pa(e,r,n,1,o,i)}function gy(e,t){t[ln].changeDetectionScheduler?.notify(8),Pa(e,t,t[Te],2,null,null)}function Ux(e){let t=e[Di];if(!t)return Xu(e[W],e);for(;t;){let n=null;if(Ln(t))n=t[Di];else{let r=t[pt];r&&(n=r)}if(!n){for(;t&&!t[Bt]&&t!==e;)Ln(t)&&Xu(t[W],t),t=t[He];t===null&&(t=e),Ln(t)&&Xu(t[W],t),n=t&&t[Bt]}t=n}}function $x(e,t,n,r){let o=pt+r,i=n.length;r>0&&(n[o-1][Bt]=t),r<i-pt?(t[Bt]=n[o],dm(n,pt+r,t)):(n.push(t),t[Bt]=null),t[He]=n;let s=t[Er];s!==null&&n!==s&&my(s,t);let a=t[dn];a!==null&&a.insertView(e),pl(t),t[H]|=128}function my(e,t){let n=e[vo],r=t[He];if(Ln(r))e[H]|=ha.HasTransplantedViews;else{let o=r[He][Jt];t[Jt]!==o&&(e[H]|=ha.HasTransplantedViews)}n===null?e[vo]=[t]:n.push(t)}function Dd(e,t){let n=e[vo],r=n.indexOf(t);n.splice(r,1)}function Sl(e,t){if(e.length<=pt)return;let n=pt+t,r=e[n];if(r){let o=r[Er];o!==null&&o!==e&&Dd(o,r),t>0&&(e[n-1][Bt]=r[Bt]);let i=aa(e,pt+t);Vx(r[W],r);let s=i[dn];s!==null&&s.detachView(i[W]),r[He]=null,r[Bt]=null,r[H]&=-129}return r}function yy(e,t){if(!(t[H]&256)){let n=t[Te];n.destroyNode&&Pa(e,t,n,3,null,null),Ux(t)}}function Xu(e,t){if(t[H]&256)return;let n=J(null);try{t[H]&=-129,t[H]|=256,t[Tt]&&Nu(t[Tt]),Gx(e,t),Hx(e,t),t[W].type===1&&t[Te].destroy();let r=t[Er];if(r!==null&&pn(t[He])){r!==t[He]&&Dd(r,t);let o=t[dn];o!==null&&o.detachView(e)}Ax(t)}finally{J(n)}}function Hx(e,t){let n=e.cleanup,r=t[da];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(t[da]=null);let o=t[Pn];if(o!==null){t[Pn]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function Gx(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof _r)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];Zt(4,a,c);try{c.call(a)}finally{Zt(5,a,c)}}else{Zt(4,o,i);try{i.call(o)}finally{Zt(5,o,i)}}}}}function Wx(e,t,n){return zx(e,t.parent,n)}function zx(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[hn];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=e.data[r.directiveStart+o];if(i===Xt.None||i===Xt.Emulated)return null}return At(r,n)}}function va(e,t,n,r,o){e.insertBefore(t,n,r,o)}function wy(e,t,n){e.appendChild(t,n)}function jg(e,t,n,r,o){r!==null?va(e,t,n,r,o):wy(e,t,n)}function vy(e,t){return e.parentNode(t)}function qx(e,t){return e.nextSibling(t)}function Kx(e,t,n){return Zx(e,t,n)}function Yx(e,t,n){return e.type&40?At(e,n):null}var Zx=Yx,Ug;function xd(e,t,n,r){let o=Wx(e,r,t),i=t[Te],s=r.parent||t[jt],a=Kx(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)jg(i,o,n[c],a,!1);else jg(i,o,n,a,!1);Ug!==void 0&&Ug(i,r,t,n,o)}function yi(e,t){if(t!==null){let n=t.type;if(n&3)return At(t,e);if(n&4)return Tl(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return yi(e,r);{let o=e[t.index];return pn(o)?Tl(-1,o):en(o)}}else{if(n&128)return yi(e,t.next);if(n&32)return Ed(t,e)()||en(e[t.index]);{let r=by(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=xr(e[Jt]);return yi(o,r)}else return yi(e,t.next)}}}return null}function by(e,t){if(t!==null){let r=e[Jt][jt],o=t.projection;return r.projection[o]}return null}function Tl(e,t){let n=pt+e+1;if(n<t.length){let r=t[n],o=r[W].firstChild;if(o!==null)return yi(r,o)}return t[Dr]}function Qx(e,t,n){e.removeChild(null,t,n)}function Id(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Sr(en(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Id(e,t,n.child,r,o,i,!1),lo(t,e,o,a,i);else if(c&32){let u=Ed(n,r),l;for(;l=u();)lo(t,e,o,l,i);lo(t,e,o,a,i)}else c&16?Xx(e,t,r,n,o,i):lo(t,e,o,a,i);n=s?n.projectionNext:n.next}}function Pa(e,t,n,r,o,i){Id(n,r,e.firstChild,t,o,i,!1)}function Xx(e,t,n,r,o,i){let s=n[Jt],c=s[jt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];lo(t,e,o,l,i)}else{let u=c,l=s[He];ay(r)&&(u.flags|=128),Id(e,t,u,l,o,i,!0)}}function Jx(e,t,n,r,o){let i=n[Dr],s=en(n);i!==s&&lo(t,e,r,i,o);for(let a=pt;a<n.length;a++){let c=n[a];Pa(c[W],c,e,t,r,i)}}function eI(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:fn.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=fn.Important),e.setStyle(n,r,o,i))}}function tI(e,t,n){e.setAttribute(t,"style",n)}function Ey(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Dy(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&cl(e,t,r),o!==null&&Ey(e,t,o),i!==null&&tI(e,t,i)}var To={};function gt(e=1){xy(et(),se(),_o()+e,!1)}function xy(e,t,n,r){if(!r)if((t[H]&3)===3){let i=e.preOrderCheckHooks;i!==null&&ta(t,i,n)}else{let i=e.preOrderHooks;i!==null&&na(t,i,0,n)}Ir(n)}function te(e,t=K.Default){let n=se();if(n===null)return ee(e,t);let r=ut();return ty(r,n,Je(e),t)}function Iy(e,t,n,r,o,i){let s=J(null);try{let a=null;o&Fn.SignalBased&&(a=t[r][cn]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Fn.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):Sm(t,a,r,i)}finally{J(s)}}function nI(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Ir(~o);else{let i=o,s=n[++r],a=n[++r];KD(s,i);let c=t[i];a(2,c)}}}finally{Ir(-1)}}function La(e,t,n,r,o,i,s,a,c,u,l){let d=t.blueprint.slice();return d[hn]=o,d[H]=r|4|128|8|64,(u!==null||e&&e[H]&2048)&&(d[H]|=2048),km(d),d[He]=d[Io]=e,d[Vt]=n,d[ln]=s||e&&e[ln],d[Te]=a||e&&e[Te],d[wo]=c||e&&e[wo]||null,d[jt]=i,d[Ma]=Sx(),d[la]=l,d[Im]=u,d[Jt]=t.type==2?e[Jt]:d,d}function Fa(e,t,n,r,o){let i=e.data[t];if(i===null)i=rI(e,t,n,r,o),qD()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=HD();i.injectorIndex=s===null?-1:s.injectorIndex}return Ai(i,!0),i}function rI(e,t,n,r,o){let i=Bm(),s=Vm(),a=s?i:i&&i.parent,c=e.data[t]=uI(e,a,n,t,r,o);return e.firstChild===null&&(e.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function _y(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Cy(e,t,n,r,o){let i=_o(),s=r&2;try{Ir(-1),s&&t.length>Bn&&xy(e,t,Bn,!1),Zt(s?2:0,o),n(r,o)}finally{Ir(i),Zt(s?3:1,o)}}function Sy(e,t,n){if(Cm(t)){let r=J(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{J(r)}}}function Ty(e,t,n){Fm()&&(gI(e,t,n,At(n,t)),(n.flags&64)===64&&Oy(e,t,n))}function Ay(e,t,n=At){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function My(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=_d(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function _d(e,t,n,r,o,i,s,a,c,u,l){let d=Bn+r,h=d+o,p=oI(d,h),y=typeof u=="function"?u():u;return p[W]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:l}}function oI(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:To);return n}function iI(e,t,n,r){let i=r.get(Px,hy)||n===Xt.ShadowDom,s=e.selectRootElement(t,i);return sI(s),s}function sI(e){aI(e)}var aI=()=>null;function cI(e,t,n,r){let o=Fy(t);o.push(n),e.firstCreatePass&&By(e).push(r,o.length-1)}function uI(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return jD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $g(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,c=Fn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=i;if(o!==null){if(!o.hasOwnProperty(i))continue;u=o[i]}e===0?Hg(r,n,u,a,c):Hg(r,n,u,a)}return r}function Hg(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function lI(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],c=null,u=null;for(let l=r;l<o;l++){let d=i[l],h=n?n.get(d):null,p=h?h.inputs:null,y=h?h.outputs:null;c=$g(0,d.inputs,l,c,p),u=$g(1,d.outputs,l,u,y);let f=c!==null&&s!==null&&!nd(t)?CI(c,l,s):null;a.push(f)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function dI(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Ny(e,t,n,r,o,i,s,a){let c=At(t,n),u=t.inputs,l;!a&&u!=null&&(l=u[r])?(Cd(e,n,l,r,o),Na(t)&&fI(n,t.index)):t.type&3?(r=dI(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(c,r,o)):t.type&12}function fI(e,t){let n=$n(t,e);n[H]&16||(n[H]|=64)}function Ry(e,t,n,r){if(Fm()){let o=r===null?null:{"":-1},i=yI(e,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&ky(e,t,n,s,o,a),o&&wI(n,r,o)}n.mergedAttrs=Ei(n.mergedAttrs,n.attrs)}function ky(e,t,n,r,o,i){for(let u=0;u<r.length;u++)wl(ya(n,t),e,r[u].type);bI(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=_y(e,t,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Ei(n.mergedAttrs,l.hostAttrs),EI(e,n,t,c,l),vI(c,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}lI(e,n,i)}function hI(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;pI(s)!=a&&s.push(a),s.push(n,r,i)}}function pI(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function gI(e,t,n,r){let o=n.directiveStart,i=n.directiveEnd;Na(n)&&DI(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||ya(n,t),Sr(r,t);let s=n.initialInputs;for(let a=o;a<i;a++){let c=e.data[a],u=Cr(t,e,a,n);if(Sr(u,t),s!==null&&_I(t,a-o,u,c,n,s),Vn(c)){let l=$n(n.index,t);l[Vt]=Cr(t,e,a,n)}}}function Oy(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=YD();try{Ir(i);for(let a=r;a<o;a++){let c=e.data[a],u=t[a];gl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&mI(c,u)}}finally{Ir(-1),gl(s)}}function mI(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function yI(e,t){let n=e.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(iD(t,s.selectors,!1))if(r||(r=[]),Vn(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;Al(e,t,c)}else r.unshift(s),Al(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function Al(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function wI(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new Z(-301,!1);r.push(t[o],i)}}}function vI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Vn(t)&&(n[""]=e)}}function bI(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function EI(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=po(o.type,!0)),s=new _r(i,Vn(o),te);e.blueprint[r]=s,n[r]=s,hI(e,t,r,_y(e,n,o.hostVars,To),o)}function DI(e,t,n){let r=At(t,e),o=My(n),i=e[ln].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Ba(e,La(e,o,null,s,r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=a}function xI(e,t,n,r,o,i){let s=At(e,t);II(t[Te],s,i,e.value,n,r,o)}function II(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?Jl(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function _I(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];Iy(r,n,c,u,l,d)}}function CI(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function Py(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Ly(e,t){let n=e.contentQueries;if(n!==null){let r=J(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];ad(i),a.contentQueries(2,t[s],s)}}}finally{J(r)}}}function Ba(e,t){return e[Di]?e[Tg][Bt]=t:e[Di]=t,e[Tg]=t,t}function Ml(e,t,n){ad(0);let r=J(null);try{t(e,n)}finally{J(r)}}function Fy(e){return e[da]??=[]}function By(e){return e.cleanup??=[]}function Vy(e,t){let n=e[wo],r=n?n.get(jn,null):null;r&&r.handleError(t)}function Cd(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=n[i++],u=t[s],l=e.data[s];Iy(l,u,r,a,c,o)}}function SI(e,t,n){let r=Nm(t,e);Bx(e[Te],r,n)}function TI(e,t){let n=$n(t,e),r=n[W];AI(r,n);let o=n[hn];o!==null&&n[la]===null&&(n[la]=vd(o,n[wo])),Sd(r,n,n[Vt])}function AI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Sd(e,t,n){cd(t);try{let r=e.viewQuery;r!==null&&Ml(1,r,n);let o=e.template;o!==null&&Cy(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[dn]?.finishViewCreation(e),e.staticContentQueries&&Ly(e,t),e.staticViewQueries&&Ml(2,e.viewQuery,n);let i=e.components;i!==null&&MI(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[H]&=-5,ud()}}function MI(e,t){for(let n=0;n<t.length;n++)TI(e,t[n])}function NI(e,t,n,r){let o=J(null);try{let i=t.tView,a=e[H]&4096?4096:16,c=La(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[Er]=u;let l=e[dn];return l!==null&&(c[dn]=l.createEmbeddedView(i)),Sd(i,c,n),c}finally{J(o)}}function Gg(e,t){return!t||t.firstChild===null||ay(e)}function RI(e,t,n,r=!0){let o=t[W];if($x(o,t,e,n),r){let s=Tl(n,e),a=t[Te],c=vy(a,e[Dr]);c!==null&&jx(o,e[jt],a,t,c,s)}let i=t[la];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function ba(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(en(i)),pn(i)&&kI(i,r);let s=n.type;if(s&8)ba(e,t,n.child,r);else if(s&32){let a=Ed(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=by(t,n);if(Array.isArray(a))r.push(...a);else{let c=xr(t[Jt]);ba(c[W],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function kI(e,t){for(let n=pt;n<e.length;n++){let r=e[n],o=r[W].firstChild;o!==null&&ba(r[W],r,o,t)}e[Dr]!==e[hn]&&t.push(e[Dr])}var jy=[];function OI(e){return e[Tt]??PI(e)}function PI(e){let t=jy.pop()??Object.create(FI);return t.lView=e,t}function LI(e){e.lView[Tt]!==e&&(e.lView=null,jy.push(e))}var FI=V(T({},pi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ra(e.lView)},consumerOnSignalRead(){this.lView[Tt]=this}});function BI(e){let t=e[Tt]??Object.create(VI);return t.lView=e,t}var VI=V(T({},pi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=xr(e.lView);for(;t&&!Uy(t[W]);)t=xr(t);t&&Om(t)},consumerOnSignalRead(){this.lView[Tt]=this}});function Uy(e){return e.type!==2}var jI=100;function $y(e,t=!0,n=0){let r=e[ln],o=r.rendererFactory,i=!1;i||o.begin?.();try{UI(e,n)}catch(s){throw t&&Vy(e,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function UI(e,t){let n=jm();try{Mg(!0),Nl(e,t);let r=0;for(;xi(e);){if(r===jI)throw new Z(103,!1);r++,Nl(e,1)}}finally{Mg(n)}}function $I(e,t,n,r){let o=t[H];if((o&256)===256)return;let i=!1,s=!1;!i&&t[ln].inlineEffectRunner?.flush(),cd(t);let a=!0,c=null,u=null;i||(Uy(e)?(u=OI(t),c=Ms(u)):Ap()===null?(a=!1,u=BI(t),c=Ms(u)):t[Tt]&&(Nu(t[Tt]),t[Tt]=null));try{km(t),WD(e.bindingStartIndex),n!==null&&Cy(e,t,n,2,r);let l=(o&3)===3;if(!i)if(l){let p=e.preOrderCheckHooks;p!==null&&ta(t,p,null)}else{let p=e.preOrderHooks;p!==null&&na(t,p,0,null),Ku(t,0)}if(s||HI(t),Hy(t,0),e.contentQueries!==null&&Ly(e,t),!i)if(l){let p=e.contentCheckHooks;p!==null&&ta(t,p)}else{let p=e.contentHooks;p!==null&&na(t,p,1),Ku(t,1)}nI(e,t);let d=e.components;d!==null&&Wy(t,d,0);let h=e.viewQuery;if(h!==null&&Ml(2,h,r),!i)if(l){let p=e.viewCheckHooks;p!==null&&ta(t,p)}else{let p=e.viewHooks;p!==null&&na(t,p,2),Ku(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[qu]){for(let p of t[qu])p();t[qu]=null}i||(t[H]&=-73)}catch(l){throw i||Ra(t),l}finally{u!==null&&(Au(u,c),a&&LI(u)),ud()}}function Hy(e,t){for(let n=uy(e);n!==null;n=ly(n))for(let r=pt;r<n.length;r++){let o=n[r];Gy(o,t)}}function HI(e){for(let t=uy(e);t!==null;t=ly(t)){if(!(t[H]&ha.HasTransplantedViews))continue;let n=t[vo];for(let r=0;r<n.length;r++){let o=n[r];Om(o)}}}function GI(e,t,n){let r=$n(t,e);Gy(r,n)}function Gy(e,t){sd(e)&&Nl(e,t)}function Nl(e,t){let r=e[W],o=e[H],i=e[Tt],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&Mu(i)),s||=!1,i&&(i.dirty=!1),e[H]&=-9217,s)$I(r,e,r.template,e[Vt]);else if(o&8192){Hy(e,1);let a=r.components;a!==null&&Wy(e,a,1)}}function Wy(e,t,n){for(let r=0;r<t.length;r++)GI(e,t[r],n)}function Td(e,t){let n=jm()?64:1088;for(e[ln].changeDetectionScheduler?.notify(t);e;){e[H]|=n;let r=xr(e);if(fl(e)&&!r)return e;e=r}return null}var Tr=class{get rootNodes(){let t=this._lView,n=t[W];return ba(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vt]}set context(t){this._lView[Vt]=t}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[He];if(pn(t)){let n=t[fa],r=n?n.indexOf(this):-1;r>-1&&(Sl(t,r),aa(n,r))}this._attachedToViewContainer=!1}yy(this._lView[W],this._lView)}onDestroy(t){Pm(this._lView,t)}markForCheck(){Td(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[H]&=-129}reattach(){pl(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,$y(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=fl(this._lView),n=this._lView[Er];n!==null&&!t&&Dd(n,this._lView),gy(this._lView[W],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=t;let n=fl(this._lView),r=this._lView[Er];r!==null&&!n&&my(r,this._lView),pl(this._lView)}},Ar=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=qI;let e=t;return e})(),WI=Ar,zI=class extends WI{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=NI(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Tr(o)}};function qI(){return Ad(ut(),se())}function Ad(e,t){return e.type&4?new zI(t,e,Co(e,t)):null}var Zk=new RegExp(`^(\\d+)*(${kx}|${Rx})*(.*)`);var KI=()=>null;function Wg(e,t){return KI(e,t)}var Ii=class{},zy=new Q("",{providedIn:"root",factory:()=>!1});var qy=new Q(""),Rl=class{},Ea=class{};function YI(e){let t=Error(`No component factory found for ${ht(e)}.`);return t[ZI]=e,t}var ZI="ngComponent";var kl=class{resolveComponentFactory(t){throw YI(t)}},Bd=class Bd{};Bd.NULL=new kl;var _i=Bd,Eo=class{},Wn=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>QI();let e=t;return e})();function QI(){let e=se(),t=ut(),n=$n(t.index,e);return(Ln(n)?n:e)[Te]}var XI=(()=>{let t=class t{};t.\u0275prov=ae({token:t,providedIn:"root",factory:()=>null});let e=t;return e})();var zg=new Set;function Va(e){zg.has(e)||(zg.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Ky=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ae({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Ol(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=wg(o,a);else if(i==2){let c=a,u=t[++s];r=wg(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var Pl=class extends _i{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=mo(t);return new Da(n,this.ngModule)}};function qg(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let o=e[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Fn.None;t?n.push({propName:s,templateName:r,isSignal:(a&Fn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function JI(e){let t=e.toLowerCase();return t==="svg"?ND:t==="math"?RD:null}var Da=class extends Ea{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=qg(t.inputs,!0);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return qg(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=uD(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=J(null);try{o=o||this.ngModule;let s=o instanceof un?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ml(t,s):t,c=a.get(Eo,null);if(c===null)throw new Z(407,!1);let u=a.get(XI,null),l=a.get(Ky,null),d=a.get(Ii,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",f=r?iI(p,r,this.componentDef.encapsulation,a):py(p,y,JI(y)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;f!==null&&(g=vd(f,a,!0));let w=_d(0,null,null,1,0,null,null,null,null,null,null),v=La(null,w,null,m,null,null,h,p,a,null,g);cd(v);let E,D;try{let b=this.componentDef,I,_=null;b.findHostDirectiveDefs?(I=[],_=new Map,b.findHostDirectiveDefs(b,I,_),I.push(b)):I=[b];let B=e_(v,f),N=t_(B,f,b,I,v,h,p);D=Rm(w,Bn),f&&o_(p,b,f,r),n!==void 0&&i_(D,this.ngContentSelectors,n),E=r_(N,b,I,_,v,[s_]),Sd(w,v,null)}finally{ud()}return new Ll(this.componentType,E,Co(D,v),v,D)}finally{J(i)}}},Ll=class extends Rl{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Tr(o,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;Cd(i[W],i,o,t,n),this.previousInputValues.set(t,n);let s=$n(this._tNode.index,i);Td(s,1)}}get injector(){return new br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function e_(e,t){let n=e[W],r=Bn;return e[r]=t,Fa(n,r,2,"#host",null)}function t_(e,t,n,r,o,i,s){let a=o[W];n_(r,e,t,s);let c=null;t!==null&&(c=vd(t,o[wo]));let u=i.rendererFactory.createRenderer(t,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=La(o,My(n),null,l,o[e.index],e,i,u,null,null,c);return a.firstCreatePass&&Al(a,e,r.length-1),Ba(o,d),o[e.index]=d}function n_(e,t,n,r){for(let o of e)t.mergedAttrs=Ei(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(Ol(t,t.mergedAttrs,!0),n!==null&&Dy(r,n,t))}function r_(e,t,n,r,o,i){let s=ut(),a=o[W],c=At(s,o);ky(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Cr(o,a,d,s);Sr(h,o)}Oy(a,o,s),c&&Sr(c,o);let u=Cr(o,a,s.directiveStart+s.componentOffset,s);if(e[Vt]=o[Vt]=u,i!==null)for(let l of i)l(u,t);return Sy(a,s,o),u}function o_(e,t,n,r){if(r)cl(e,n,["ng-version","18.1.4"]);else{let{attrs:o,classes:i}=lD(t.selectors[0]);o&&cl(e,n,o),i&&i.length>0&&Ey(e,n,i.join(" "))}}function i_(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function s_(){let e=ut();hd(se()[W],e)}var Ao=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=a_;let e=t;return e})();function a_(){let e=ut();return Zy(e,se())}var c_=Ao,Yy=class extends c_{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Co(this._hostTNode,this._hostLView)}get injector(){return new br(this._hostTNode,this._hostLView)}get parentInjector(){let t=pd(this._hostTNode,this._hostLView);if(Ym(t)){let n=ma(t,this._hostLView),r=ga(t),o=n[W].data[r+8];return new br(o,n)}else return new br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Kg(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-pt}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Wg(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Gg(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!SD(t),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,o=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}let c=s?t:new Da(mo(t)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let f=(s?u:this.parentInjector).get(un,null);f&&(i=f)}let l=mo(c.componentType??{}),d=Wg(this._lContainer,l?.id??null),h=d?.firstChild??null,p=c.create(u,o,h,i);return this.insertImpl(p.hostView,a,Gg(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(OD(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[He],u=new Yy(c,c[jt],c[He]);u.detach(u.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return RI(s,o,i,r),t.attachToViewContainerRef(),dm(Ju(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Kg(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Sl(this._lContainer,n);r&&(aa(Ju(this._lContainer),n),yy(r[W],r))}detach(t){let n=this._adjustIndex(t,-1),r=Sl(this._lContainer,n);return r&&aa(Ju(this._lContainer),n)!=null?new Tr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Kg(e){return e[fa]}function Ju(e){return e[fa]||(e[fa]=[])}function Zy(e,t){let n,r=t[e.index];return pn(r)?n=r:(n=Py(r,t,null,e),t[e.index]=n,Ba(t,n)),l_(n,t,e,r),new Yy(n,e,t)}function u_(e,t){let n=e[Te],r=n.createComment(""),o=At(t,e),i=vy(n,o);return va(n,i,r,qx(n,o),!1),r}var l_=h_,d_=()=>!1;function f_(e,t,n){return d_(e,t,n)}function h_(e,t,n,r){if(e[Dr])return;let o;n.type&8?o=en(r):o=u_(t,n),e[Dr]=o}var Fl=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Bl=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Md(t,n).matches!==null&&this.queries[n].setDirty()}},Vl=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=E_(t):this.predicate=t}},jl=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Ul=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,p_(n,i)),this.matchTNodeWithReadOption(t,n,ra(n,t,i,!1,!1))}else r===Ar?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ra(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===lt||o===Ao||o===Ar&&n.type&4)this.addMatch(n.index,-2);else{let i=ra(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function p_(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function g_(e,t){return e.type&11?Co(e,t):e.type&4?Ad(e,t):null}function m_(e,t,n,r){return n===-1?g_(t,e):n===-2?y_(e,t,r):Cr(e,e[W],n,t)}function y_(e,t,n){if(n===lt)return Co(t,e);if(n===Ar)return Ad(t,e);if(n===Ao)return Zy(t,e)}function Qy(e,t,n,r){let o=t[dn].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(m_(t,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function $l(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=Qy(e,t,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=t[-c];for(let d=pt;d<l.length;d++){let h=l[d];h[Er]===h[He]&&$l(h[W],h,u,r)}if(l[vo]!==null){let d=l[vo];for(let h=0;h<d.length;h++){let p=d[h];$l(p[W],p,u,r)}}}}}return r}function w_(e,t){return e[dn].queries[t].queryList}function v_(e,t,n){let r=new Il((n&4)===4);return cI(e,t,r,r.destroy),(t[dn]??=new Bl).queries.push(new Fl(r))-1}function b_(e,t,n){let r=et();return r.firstCreatePass&&(D_(r,new Vl(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),v_(r,se(),t)}function E_(e){return e.split(",").map(t=>t.trim())}function D_(e,t,n){e.queries===null&&(e.queries=new jl),e.queries.track(new Ul(t,n))}function Md(e,t){return e.queries.getByIndex(t)}function x_(e,t){let n=e[W],r=Md(n,t);return r.crossesNgTemplate?$l(n,e,t,[]):Qy(n,e,r,t)}function I_(e){return typeof e=="function"&&e[cn]!==void 0}function ja(e,t){Va("NgSignals");let n=jp(e),r=n[cn];return t?.equal&&(r.equal=t.equal),n.set=o=>Ru(r,o),n.update=o=>Up(r,o),n.asReadonly=__.bind(n),n}function __(){let e=this[cn];if(e.readonlyFn===void 0){let t=()=>this();t[cn]=e,e.readonlyFn=t}return e.readonlyFn}function Xy(e){return I_(e)&&typeof e.set=="function"}function C_(e){return Object.getPrototypeOf(e.prototype).constructor}function gn(e){let t=C_(e.type),n=!0,r=[e];for(;t;){let o;if(Vn(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Z(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=Xs(e.inputs),s.inputTransforms=Xs(e.inputTransforms),s.declaredInputs=Xs(e.declaredInputs),s.outputs=Xs(e.outputs);let a=o.hostBindings;a&&N_(e,a);let c=o.viewQuery,u=o.contentQueries;if(c&&A_(e,c),u&&M_(e,u),S_(e,o),TE(e.outputs,o.outputs),Vn(o)&&o.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===gn&&(n=!1)}}t=Object.getPrototypeOf(t)}T_(r)}function S_(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function T_(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Ei(o.hostAttrs,n=Ei(n,o.hostAttrs))}}function Xs(e){return e===go?{}:e===St?[]:e}function A_(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function M_(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function N_(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}var Do=class{};var xa=class extends Do{constructor(t){super(),this.componentFactoryResolver=new Pl(this),this.instance=null;let n=new ua([...t.providers,{provide:Do,useValue:this},{provide:_i,useValue:this.componentFactoryResolver}],t.parent||od(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function R_(e,t,n=null){return new xa({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Jy(e){return O_(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function k_(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function O_(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ni(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function P_(e){return(e.flags&32)===32}function L_(e,t,n,r,o,i,s,a,c){let u=t.consts,l=Fa(t,e,4,s||null,a||null);Ry(t,n,l,pa(u,c)),hd(t,l);let d=l.tView=_d(2,l,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}function F_(e,t,n,r,o,i,s,a,c,u){let l=n+Bn,d=t.firstCreatePass?L_(l,t,e,r,o,i,s,a,c):t.data[l];Ai(d,!1);let h=B_(t,e,d,n);dd()&&xd(t,e,h,d),Sr(h,e);let p=Py(h,e,h,d);return e[l]=p,Ba(e,p),f_(p,d,e),id(d)&&Ty(t,e,d),c!=null&&Ay(e,d,u),d}function Or(e,t,n,r,o,i,s,a){let c=se(),u=et(),l=pa(u.consts,i);return F_(c,u,e,t,n,r,o,l,s,a),Or}var B_=V_;function V_(e,t,n,r){return fd(!0),t[Te].createComment("")}function Ua(e,t,n,r){let o=se(),i=ka();if(Ni(o,i,t)){let s=et(),a=ld();xI(a,o,e,t,n,r)}return Ua}function j_(e,t,n,r){return Ni(e,ka(),n)?t+Jl(n)+r:To}function Js(e,t){return e<<17|t<<2}function Mr(e){return e>>17&32767}function U_(e){return(e&2)==2}function $_(e,t){return e&131071|t<<17}function Hl(e){return e|2}function xo(e){return(e&131068)>>2}function el(e,t){return e&-131069|t<<2}function H_(e){return(e&1)===1}function Gl(e){return e|1}function G_(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Mr(s),c=xo(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Ti(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=Mr(e[a+1]);e[r+1]=Js(h,a),h!==0&&(e[h+1]=el(e[h+1],r)),e[a+1]=$_(e[a+1],r)}else e[r+1]=Js(a,0),a!==0&&(e[a+1]=el(e[a+1],r)),a=r;else e[r+1]=Js(c,0),a===0?a=r:e[c+1]=el(e[c+1],r),c=r;u&&(e[r+1]=Hl(e[r+1])),Yg(e,l,r,!0),Yg(e,l,r,!1),W_(t,l,e,r,i),s=Js(a,c),i?t.classBindings=s:t.styleBindings=s}function W_(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Ti(i,t)>=0&&(n[r+1]=Gl(n[r+1]))}function Yg(e,t,n,r){let o=e[n+1],i=t===null,s=r?Mr(o):xo(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],u=e[s+1];z_(c,t)&&(a=!0,e[s+1]=r?Gl(u):Hl(u)),s=r?Mr(u):xo(u)}a&&(e[n+1]=r?Hl(o):Gl(o))}function z_(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Ti(e,t)>=0:!1}function We(e,t,n){let r=se(),o=ka();if(Ni(r,o,t)){let i=et(),s=ld();Ny(i,s,r,e,t,r[Te],n,!1)}return We}function Zg(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";Cd(e,n,i[s],s,r)}function Nd(e,t){return q_(e,t,null,!0),Nd}function q_(e,t,n,r){let o=se(),i=et(),s=zD(2);if(i.firstUpdatePass&&Y_(i,e,s,r),t!==To&&Ni(o,s,t)){let a=i.data[_o()];eC(i,a,o,o[Te],e,o[s+1]=tC(t,n),r,s)}}function K_(e,t){return t>=e.expandoStartIndex}function Y_(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[_o()],s=K_(e,n);nC(i,r)&&t===null&&!s&&(t=!1),t=Z_(o,i,t,r),G_(o,i,t,n,s,r)}}function Z_(e,t,n,r){let o=ZD(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=tl(null,e,t,n,r),n=Ci(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=tl(o,e,t,n,r),i===null){let c=Q_(e,t,r);c!==void 0&&Array.isArray(c)&&(c=tl(null,e,t,c[1],r),c=Ci(c,t.attrs,r),X_(e,t,r,c))}else i=J_(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function Q_(e,t,n){let r=n?t.classBindings:t.styleBindings;if(xo(r)!==0)return e[Mr(r)]}function X_(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[Mr(o)]=r}function J_(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Ci(r,s,n)}return Ci(r,t.attrs,n)}function tl(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Ci(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ci(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),ZE(e,s,n?!0:t[++i]))}return e===void 0?null:e}function eC(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=H_(u)?Qg(c,t,n,o,xo(u),s):void 0;if(!Ia(l)){Ia(i)||U_(u)&&(i=Qg(c,null,n,o,a,s));let d=Nm(_o(),n);eI(r,s,d,o,i)}}function Qg(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===To&&(h=d?St:void 0);let p=d?Wu(h,r):l===r?h:void 0;if(u&&!Ia(p)&&(p=Wu(c,r)),Ia(p)&&(a=p,s))return a;let y=e[o+1];o=s?Mr(y):xo(y)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=Wu(c,r))}return a}function Ia(e){return e!==void 0}function tC(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ht(bd(e)))),e}function nC(e,t){return(e.flags&(t?8:16))!==0}function rC(e,t,n,r,o,i){let s=t.consts,a=pa(s,o),c=Fa(t,e,2,r,a);return Ry(t,n,c,pa(s,i)),c.attrs!==null&&Ol(c,c.attrs,!1),c.mergedAttrs!==null&&Ol(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function k(e,t,n,r){let o=se(),i=et(),s=Bn+e,a=o[Te],c=i.firstCreatePass?rC(s,i,o,t,n,r):i.data[s],u=oC(i,o,c,a,t,e);o[s]=u;let l=id(c);return Ai(c,!0),Dy(a,u,c),!P_(c)&&dd()&&xd(i,o,u,c),FD()===0&&Sr(u,o),BD(),l&&(Ty(i,o,c),Sy(i,c,o)),r!==null&&Ay(o,c),k}function O(){let e=ut();Vm()?GD():(e=e.parent,Ai(e,!1));let t=e;UD(t)&&$D(),VD();let n=et();return n.firstCreatePass&&(hd(n,e),Cm(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&rx(t)&&Zg(n,t,se(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ox(t)&&Zg(n,t,se(),t.stylesWithoutHost,!1),O}function Pr(e,t,n,r){return k(e,t,n,r),O(),Pr}var oC=(e,t,n,r,o,i)=>(fd(!0),py(r,o,JD()));function Mo(){return se()}var _a="en-US";var iC=_a;function sC(e){typeof e=="string"&&(iC=e.toLowerCase().replace(/_/g,"-"))}var aC=(e,t,n)=>{};function mt(e,t,n,r){let o=se(),i=et(),s=ut();return ew(i,o,o[Te],s,e,t,r),mt}function cC(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[da],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function ew(e,t,n,r,o,i,s){let a=id(r),u=e.firstCreatePass&&By(e),l=t[Vt],d=Fy(t),h=!0;if(r.type&3||s){let f=At(r,t),m=s?s(f):f,g=d.length,w=s?E=>s(en(E[r.index])):r.index,v=null;if(!s&&a&&(v=cC(e,t,o,r.index)),v!==null){let E=v.__ngLastListenerFn__||v;E.__ngNextListenerFn__=i,v.__ngLastListenerFn__=i,h=!1}else{i=Jg(r,t,l,i),aC(f,o,i);let E=n.listen(m,o,i);d.push(i,E),u&&u.push(o,w,g,g+1)}}else i=Jg(r,t,l,i);let p=r.outputs,y;if(h&&p!==null&&(y=p[o])){let f=y.length;if(f)for(let m=0;m<f;m+=2){let g=y[m],w=y[m+1],D=t[g][w].subscribe(i),b=d.length;d.push(i,D),u&&u.push(o,r.index,b,-(b+1))}}}function Xg(e,t,n,r){let o=J(null);try{return Zt(6,t,n),n(r)!==!1}catch(i){return Vy(e,i),!1}finally{Zt(7,t,n),J(o)}}function Jg(e,t,n,r){return function o(i){if(i===Function)return r;let s=e.componentOffset>-1?$n(e.index,t):t;Td(s,5);let a=Xg(t,n,r,i),c=o.__ngNextListenerFn__;for(;c;)a=Xg(t,n,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function mn(e=1){return XD(e)}function tw(e,t,n){b_(e,t,n)}function nw(e){let t=se(),n=et(),r=Um();ad(r+1);let o=Md(n,r);if(e.dirty&&kD(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=x_(t,r);e.reset(i,Ix),e.notifyOnChanges()}return!0}return!1}function rw(){return w_(se(),Um())}function A(e,t=""){let n=se(),r=et(),o=e+Bn,i=r.firstCreatePass?Fa(r,o,1,t,null):r.data[o],s=uC(r,n,i,t,e);n[o]=s,dd()&&xd(r,n,s,i),Ai(i,!1)}var uC=(e,t,n,r,o)=>(fd(!0),Fx(t[Te],r));function Rd(e,t,n){let r=se(),o=j_(r,e,t,n);return o!==To&&SI(r,_o(),o),Rd}function kd(e,t,n){Xy(t)&&(t=t());let r=se(),o=ka();if(Ni(r,o,t)){let i=et(),s=ld();Ny(i,s,r,e,t,r[Te],n,!1)}return kd}function ow(e,t){let n=Xy(e);return n&&e.set(t),n}function Od(e,t){let n=se(),r=et(),o=ut();return ew(r,n,n[Te],o,e,t),Od}function lC(e,t,n){let r=et();if(r.firstCreatePass){let o=Vn(e);Wl(n,r.data,r.blueprint,o,!0),Wl(t,r.data,r.blueprint,o,!1)}}function Wl(e,t,n,r,o){if(e=Je(e),Array.isArray(e))for(let i=0;i<e.length;i++)Wl(e[i],t,n,r,o);else{let i=et(),s=se(),a=ut(),c=yo(e)?e:Je(e.provide),u=xm(e),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(yo(e)||!e.multi){let p=new _r(u,o,te),y=rl(c,t,o?l:l+h,d);y===-1?(wl(ya(a,s),i,c),nl(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[y]=p,s[y]=p)}else{let p=rl(c,t,l+h,d),y=rl(c,t,l,l+h),f=p>=0&&n[p],m=y>=0&&n[y];if(o&&!m||!o&&!f){wl(ya(a,s),i,c);let g=hC(o?fC:dC,n.length,o,r,u);!o&&m&&(n[y].providerFactory=g),nl(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=iw(n[o?y:p],u,!o&&r);nl(i,e,p>-1?p:y,g)}!o&&r&&m&&n[y].componentProviders++}}}function nl(e,t,n,r){let o=yo(t),i=vD(t);if(o||i){let c=(i?Je(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function iw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function rl(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function dC(e,t,n,r){return zl(this.multi,[])}function fC(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Cr(n,n[W],this.providerFactory.index,r);i=a.slice(0,s),zl(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],zl(o,i);return i}function zl(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function hC(e,t,n,r,o){let i=new _r(e,n,te);return i.multi=[],i.index=t,i.componentProviders=0,iw(i,o,r&&!n),i}function No(e,t=[]){return n=>{n.providersResolver=(r,o)=>lC(r,o?o(e):e,t)}}var pC=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=bm(!1,r.type),i=o.length>0?R_([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ae({token:t,providedIn:"environment",factory:()=>new t(ee(un))});let e=t;return e})();function $a(e){Va("NgStandalone"),e.getStandaloneInjector=t=>t.get(pC).getOrCreateStandaloneInjector(e)}var sw=new Q("");function Ri(e){return!!e&&typeof e.then=="function"}function aw(e){return!!e&&typeof e.subscribe=="function"}var gC=new Q(""),cw=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=ie(gC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(Ri(s))r.push(s);else if(aw(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),mC=new Q("");function yC(){Vp(()=>{throw new Z(600,!1)})}function wC(e){return e.isBoundToModule}var vC=10;function bC(e,t,n){try{let r=n();return Ri(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Ha=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ie(Dx),this.afterRenderEffectManager=ie(Ky),this.zonelessEnabled=ie(zy),this.externalTestViews=new Set,this.beforeRender=new Kt,this.afterTick=new Kt,this.componentTypes=[],this.components=[],this.isStable=ie(Oa).hasPendingTasks.pipe(at(r=>!r)),this._injector=ie(un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof Ea;if(!this._injector.get(cw).done){let p=!i&&hD(r),y=!1;throw new Z(405,y)}let a;i?a=r:a=this._injector.get(_i).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=wC(a)?void 0:this._injector.get(Do),u=o||a.selector,l=a.create(bo.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(sw,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ol(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Z(101,!1);let o=J(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,J(o),this.afterTick.next()}}detectChangesInAttachedViews(r){let o=null;this._injector.destroyed||(o=this._injector.get(Eo,null,{optional:!0}));let i=0,s=this.afterRenderEffectManager;for(;i<vC;){let a=i===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)EC(c,u,a,this.zonelessEnabled)}else o?.begin?.(),o?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>xi(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>xi(c))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;ol(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(mC,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ol(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ol(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function EC(e,t,n,r){if(!n&&!xi(e))return;$y(e,t,n&&!r?0:1)}var DC=(()=>{let t=class t{constructor(){this.zone=ie(Pe),this.changeDetectionScheduler=ie(Ii),this.applicationRef=ie(Ha)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function xC({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new Pe(IC()),[{provide:Pe,useFactory:e},{provide:bi,multi:!0,useFactory:()=>{let n=ie(DC,{optional:!0});return()=>n.initialize()}},{provide:bi,multi:!0,useFactory:()=>{let n=ie(_C);return()=>{n.initialize()}}},t===!0?{provide:qy,useValue:!0}:[]]}function IC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var _C=(()=>{let t=class t{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=ie(Pe),this.pendingTasks=ie(Oa)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var CC=(()=>{let t=class t{constructor(){this.appRef=ie(Ha),this.taskService=ie(Oa),this.ngZone=ie(Pe),this.zonelessEnabled=ie(zy),this.disableScheduling=ie(qy,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Xe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xl||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Lg:iy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Pe.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(o),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Lg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function SC(){return typeof $localize<"u"&&$localize.locale||_a}var Pd=new Q("",{providedIn:"root",factory:()=>ie(Pd,K.Optional|K.SkipSelf)||SC()});var uw=new Q("");var oa=null;function TC(e=[],t){return bo.create({name:t,providers:[{provide:Aa,useValue:"platform"},{provide:uw,useValue:new Set([()=>oa=null])},...e]})}function AC(e=[]){if(oa)return oa;let t=TC(e);return oa=t,yC(),MC(t),t}function MC(e){e.get(yd,null)?.forEach(n=>n())}var Ro=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=NC;let e=t;return e})();function NC(e){return RC(ut(),se(),(e&16)===16)}function RC(e,t,n){if(Na(e)&&!n){let r=$n(e.index,t);return new Tr(r,r)}else if(e.type&175){let r=t[Jt];return new Tr(r,t)}return null}var ql=class{constructor(){}supports(t){return Jy(t)}create(t){return new Kl(t)}},kC=(e,t)=>t,Kl=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||kC}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<em(r,o,i)?n:r,a=em(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let u=a-o,l=c-o;if(u!=l){for(let h=0;h<u;h++){let p=h<i.length?i[h]:i[h]=0,y=p+h;l<=y&&y<u&&(i[h]=p+1)}let d=s.previousIndex;i[d]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Jy(t))throw new Z(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,k_(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new Yl(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ca),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ca),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Yl=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Zl=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ca=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Zl,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function em(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function tm(){return new Ld([new ql])}var Ld=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,o){if(o!=null){let i=o.factories.slice();r=r.concat(i)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||tm()),deps:[[t,new zE,new lm]]}}find(r){let o=this.factories.find(i=>i.supports(r));if(o!=null)return o;throw new Z(901,!1)}};t.\u0275prov=ae({token:t,providedIn:"root",factory:tm});let e=t;return e})();function lw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=AC(r),i=[xC({}),{provide:Ii,useExisting:CC},...n||[]],a=new xa({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Pe);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(jn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:p=>{u.handleError(p)}})});let d=()=>a.destroy(),h=o.get(uw);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),bC(u,c,()=>{let p=a.get(cw);return p.runInitializers(),p.donePromise.then(()=>{let y=a.get(Pd,_a);sC(y||_a);let f=a.get(Ha);return t!==void 0&&f.bootstrap(t),f})})})}catch(t){return Promise.reject(t)}}var dw=new Q("");function Fd(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Ga(e,t){Va("NgSignals");let n=Lp(e);return t?.equal&&(n[cn].equal=t.equal),n}function zn(e){let t=J(null);try{return e()}finally{J(t)}}var mw=null;function ko(){return mw}function yw(e){mw??=e}var Wa=class{};var yn=new Q("");function ww(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var Vd=/\s+/,fw=[],vw=(()=>{let t=class t{constructor(r,o){this._ngEl=r,this._renderer=o,this.initialClasses=fw,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Vd):fw}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Vd):r}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let o of r)this._updateState(o,!0);else if(r!=null)for(let o of Object.keys(r))this._updateState(o,!!r[o]);this._applyStateDiff()}_updateState(r,o){let i=this.stateMap.get(r);i!==void 0?(i.enabled!==o&&(i.changed=!0,i.enabled=o),i.touched=!0):this.stateMap.set(r,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let o=r[0],i=r[1];i.changed?(this._toggleClass(o,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),i.touched=!1}}_toggleClass(r,o){r=r.trim(),r.length>0&&r.split(Vd).forEach(i=>{o?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}};t.\u0275fac=function(o){return new(o||t)(te(lt),te(Wn))},t.\u0275dir=Ge({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var jd=class{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bw=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,o,i){this._viewContainer=r,this._template=o,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let o=this._viewContainer;r.forEachOperation((i,s,a)=>{if(i.previousIndex==null)o.createEmbeddedView(this._template,new jd(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)o.remove(s===null?void 0:s);else if(s!==null){let c=o.get(s);o.move(c,a),hw(c,i)}});for(let i=0,s=o.length;i<s;i++){let c=o.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(i=>{let s=o.get(i.currentIndex);hw(s,i)})}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(te(Ao),te(Ar),te(Ld))},t.\u0275dir=Ge({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function hw(e,t){e.context.$implicit=t.item}var qa=(()=>{let t=class t{constructor(r,o){this._viewContainer=r,this._context=new Ud,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){pw("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){pw("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(te(Ao),te(Ar))},t.\u0275dir=Ge({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),Ud=class{constructor(){this.$implicit=null,this.ngIf=null}};function pw(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${ht(t)}'.`)}var ki=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rr({type:t}),t.\u0275inj=Nr({});let e=t;return e})(),Ew="browser",OC="server";function $d(e){return e===OC}var za=class{};var Gd=class{};var Oo=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Wd=class{encodeKey(t){return xw(t)}encodeValue(t){return xw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function PC(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var LC=/%(\d[a-f0-9])/gi,FC={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xw(e){return encodeURIComponent(e).replace(LC,(t,n)=>FC[n]??t)}function Ka(e){return`${e}`}var Kn=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Wd,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PC(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],o=Array.isArray(r)?r.map(Ka):[Ka(r)];this.map.set(n,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Ka(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],o=r.indexOf(Ka(t.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var zd=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function BC(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Iw(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function _w(e){return typeof Blob<"u"&&e instanceof Blob}function Cw(e){return typeof FormData<"u"&&e instanceof FormData}function VC(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Oi=class e{constructor(t,n,r,o){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let i;if(BC(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new Oo,this.context??=new zd,!this.params)this.params=new Kn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Iw(this.body)||_w(this.body)||Cw(this.body)||VC(this.body)?this.body:this.body instanceof Kn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Cw(this.body)?null:_w(this.body)?this.body.type||null:Iw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Kn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,u=t.headers||this.headers,l=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),l)),new e(n,r,s,{params:l,headers:u,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},Sw=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Sw||{}),qd=class{constructor(t,n=200,r="OK"){this.headers=t.headers||new Oo,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Kd=class e extends qd{constructor(t={}){super(t),this.type=Sw.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};function Hd(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Tw=(()=>{let t=class t{constructor(r){this.handler=r}request(r,o,i={}){let s;if(r instanceof Oi)s=r;else{let u;i.headers instanceof Oo?u=i.headers:u=new Oo(i.headers);let l;i.params&&(i.params instanceof Kn?l=i.params:l=new Kn({fromObject:i.params})),s=new Oi(r,o,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=ju(s).pipe(Gu(u=>this.handler.handle(u)));if(r instanceof Oi||i.observe==="events")return a;let c=a.pipe(Hu(u=>u instanceof Kd));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(at(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(at(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(at(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(at(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,o={}){return this.request("DELETE",r,o)}get(r,o={}){return this.request("GET",r,o)}head(r,o={}){return this.request("HEAD",r,o)}jsonp(r,o){return this.request("JSONP",r,{params:new Kn().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,o={}){return this.request("OPTIONS",r,o)}patch(r,o,i={}){return this.request("PATCH",r,Hd(i,o))}post(r,o,i={}){return this.request("POST",r,Hd(i,o))}put(r,o,i={}){return this.request("PUT",r,Hd(i,o))}};t.\u0275fac=function(o){return new(o||t)(ee(Gd))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})();var Qd=class extends Wa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Xd=class e extends Qd{static makeCurrent(){yw(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=$C();return n==null?null:HC(n)}resetBaseElement(){Pi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ww(document.cookie,t)}},Pi=null;function $C(){return Pi=Pi||document.querySelector("base"),Pi?Pi.getAttribute("href"):null}function HC(e){return new URL(e,document.baseURI).pathname}var GC=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),Ya=new Q(""),Rw=(()=>{let t=class t{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new Z(5101,!1);return this._eventNameToPlugin.set(r,o),o}};t.\u0275fac=function(o){return new(o||t)(ee(Ya),ee(Pe))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),Li=class{constructor(t){this._doc=t}},Yd="ng-app-id",kw=(()=>{let t=class t{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$d(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Yd}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(Yd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Yd,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(o){return new(o||t)(ee(yn),ee(md),ee(wd,8),ee(So))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),Zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ef=/%COMP%/g,Ow="%COMP%",WC=`_nghost-${Ow}`,zC=`_ngcontent-${Ow}`,qC=!0,KC=new Q("",{providedIn:"root",factory:()=>qC});function YC(e){return zC.replace(ef,e)}function ZC(e){return WC.replace(ef,e)}function Pw(e,t){return t.map(n=>n.replace(ef,e))}var Aw=(()=>{let t=class t{constructor(r,o,i,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=$d(c),this.defaultRenderer=new Fi(r,a,u,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Xt.ShadowDom&&(o=V(T({},o),{encapsulation:Xt.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof Za?i.applyToHost(r):i instanceof Bi&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(o.encapsulation){case Xt.Emulated:s=new Za(u,l,o,this.appId,d,a,c,h);break;case Xt.ShadowDom:return new Jd(u,l,r,o,a,c,this.nonce,h);default:s=new Bi(u,l,o,d,a,c,h);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(o){return new(o||t)(ee(Rw),ee(kw),ee(md),ee(KC),ee(yn),ee(So),ee(Pe),ee(wd))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),Fi=class{constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Zd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Mw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Mw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=Zd[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=Zd[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(fn.DashCase|fn.Important)?t.style.setProperty(n,r,o&fn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&fn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=ko().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Mw(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Jd=class extends Fi{constructor(t,n,r,o,i,s,a,c){super(t,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Pw(o.id,o.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bi=class extends Fi{constructor(t,n,r,o,i,s,a,c){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?Pw(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Za=class extends Bi{constructor(t,n,r,o,i,s,a,c){let u=o+"-"+r.id;super(t,n,r,i,s,a,c,u),this.contentAttr=YC(u),this.hostAttr=ZC(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},QC=(()=>{let t=class t extends Li{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};t.\u0275fac=function(o){return new(o||t)(ee(yn))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),XC=(()=>{let t=class t extends Li{constructor(r){super(r),this.delegate=ie(dw,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,o,i){return this.delegate.addEventListener(r,o,i)}removeEventListener(r,o,i){return this.delegate.removeEventListener(r,o,i)}};t.\u0275fac=function(o){return new(o||t)(ee(yn))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})(),Nw=["alt","control","meta","shift"],JC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},tS=(()=>{let t=class t extends Li{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,o,i){let s=t.parseEventName(o),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ko().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),Nw.forEach(l=>{let d=o.indexOf(l);d>-1&&(o.splice(d,1),a+=l+".")}),a+=s,o.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(r,o){let i=JC[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Nw.forEach(a=>{if(a!==i){let c=eS[a];c(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{t.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(o){return new(o||t)(ee(yn))},t.\u0275prov=ae({token:t,factory:t.\u0275fac});let e=t;return e})();function Lw(e,t){return lw(T({rootComponent:e},nS(t)))}function nS(e){return{appProviders:[...aS,...e?.providers??[]],platformProviders:sS}}function rS(){Xd.makeCurrent()}function oS(){return new jn}function iS(){return fy(document),document}var sS=[{provide:So,useValue:Ew},{provide:yd,useValue:rS,multi:!0},{provide:yn,useFactory:iS,deps:[]}];var aS=[{provide:Aa,useValue:"root"},{provide:jn,useFactory:oS,deps:[]},{provide:Ya,useClass:QC,multi:!0,deps:[yn,Pe,So]},{provide:Ya,useClass:tS,multi:!0,deps:[yn]},{provide:Ya,useClass:XC,multi:!0},Aw,kw,Rw,{provide:Eo,useExisting:Aw},{provide:za,useClass:GC,deps:[]},[]];var Fw={providers:[]};var Qa=class{constructor(t){this.#e=t}#e;#t=void 0;init(t=1,n){return le(this,null,function*(){let r=this.#e.module;this.cpp=new r.EmLlamaCpp,yield this.cpp.init(t),this.#t=o=>{let i=o.data;if(!(!i||!i.em_cmd)){if(i.em_cmd==="msg")n.log(i.data);else if(i.em_cmd==="msgAppend"){let s=n.messages[n.messages.length-1];i.data.text&&(s.text+=i.data.text.replace(/\n/g,"")),i.data.pending!==void 0&&(s.pending=i.data.pending)}}},this.#e.worker.addEventListener("message",this.#t)})}destroy(t){return le(this,null,function*(){yield this.cpp.destroy(),t&&this.#e.module.FS.unlink(t.id),this.#t&&(this.#e.worker.removeEventListener("message",this.#t),this.#t=void 0),this.cpp=void 0})}loadModel(t){return le(this,null,function*(){this.#e.module.FS.writeFile(t.id,new Uint8Array(t.bytes)),yield this.cpp.load_model(t.id)})}predict(t){return le(this,null,function*(){return yield this.cpp.predict(t)})}};function Bw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function cS(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Po(e,...t){if(!cS(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Vw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bw(e.outputLen),Bw(e.blockLen)}function Lo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function jw(e,t){Po(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var Xa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ja=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ut=(e,t)=>e<<32-t|e>>>t,Vi=(e,t)=>e<<t|e>>>32-t>>>0,yP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function uS(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ji(e){return typeof e=="string"&&(e=uS(e)),Po(e),e}function ec(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];Po(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}var Fo=class{clone(){return this._cloneInto()}},wP={}.toString;function tc(e){let t=r=>e().update(ji(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Bo(e=32){if(Xa&&typeof Xa.getRandomValues=="function")return Xa.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function lS(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}var Uw=(e,t,n)=>e&t^~e&n,$w=(e,t,n)=>e&t^e&n^t&n,Vo=class extends Fo{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ja(this.buffer)}update(t){Lo(this);let{view:n,buffer:r,blockLen:o}=this;t=ji(t);let i=t.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=Ja(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lo(this),jw(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let d=s;d<o;d++)n[d]=0;lS(r,o-8,BigInt(this.length*8),i),this.process(r,0);let a=Ja(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}};var dS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zn=new Uint32Array(64),tf=class extends Vo{constructor(){super(64,32,8,!1),this.A=Yn[0]|0,this.B=Yn[1]|0,this.C=Yn[2]|0,this.D=Yn[3]|0,this.E=Yn[4]|0,this.F=Yn[5]|0,this.G=Yn[6]|0,this.H=Yn[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Zn[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){let h=Zn[d-15],p=Zn[d-2],y=Ut(h,7)^Ut(h,18)^h>>>3,f=Ut(p,17)^Ut(p,19)^p>>>10;Zn[d]=f+Zn[d-7]+y+Zn[d-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){let h=Ut(a,6)^Ut(a,11)^Ut(a,25),p=l+h+Uw(a,c,u)+dS[d]+Zn[d]|0,f=(Ut(r,2)^Ut(r,13)^Ut(r,22))+$w(r,o,i)|0;l=u,u=c,c=a,a=s+p|0,s=i,i=o,o=r,r=p+f|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,o,i,s,a,c,u,l)}roundClean(){Zn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var De=tc(()=>new tf);var nc=class extends Fo{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Vw(t);let r=ji(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return Lo(this),this.iHash.update(t),this}digestInto(t){Lo(this),Po(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ui=(e,t,n)=>new nc(e,t).update(n).digest();Ui.create=(e,t)=>new nc(e,t);var cf={};Sp(cf,{aInRange:()=>Jn,abool:()=>Lr,abytes:()=>jo,bitGet:()=>wS,bitLen:()=>yS,bitMask:()=>Hi,bitSet:()=>vS,bytesToHex:()=>Fr,bytesToNumberBE:()=>vn,bytesToNumberLE:()=>oc,concatBytes:()=>Uo,createHmacDrbg:()=>af,ensureBytes:()=>yt,equalBytes:()=>gS,hexToBytes:()=>Br,hexToNumber:()=>sf,inRange:()=>$i,isBytes:()=>Qn,memoized:()=>sc,notImplemented:()=>ES,numberToBytesBE:()=>Xn,numberToBytesLE:()=>ic,numberToHexUnpadded:()=>Ww,numberToVarBytesBE:()=>pS,utf8ToBytes:()=>mS,validateObject:()=>er});var of=BigInt(0),rc=BigInt(1),fS=BigInt(2);function Qn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function jo(e){if(!Qn(e))throw new Error("Uint8Array expected")}function Lr(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}var hS=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Fr(e){jo(e);let t="";for(let n=0;n<e.length;n++)t+=hS[e[n]];return t}function Ww(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function sf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var wn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Hw(e){if(e>=wn._0&&e<=wn._9)return e-wn._0;if(e>=wn._A&&e<=wn._F)return e-(wn._A-10);if(e>=wn._a&&e<=wn._f)return e-(wn._a-10)}function Br(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){let s=Hw(e.charCodeAt(i)),a=Hw(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function vn(e){return sf(Fr(e))}function oc(e){return jo(e),sf(Fr(Uint8Array.from(e).reverse()))}function Xn(e,t){return Br(e.toString(16).padStart(t*2,"0"))}function ic(e,t){return Xn(e,t).reverse()}function pS(e){return Br(Ww(e))}function yt(e,t,n){let r;if(typeof t=="string")try{r=Br(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Qn(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Uo(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];jo(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}function gS(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function mS(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}var nf=e=>typeof e=="bigint"&&of<=e;function $i(e,t,n){return nf(e)&&nf(t)&&nf(n)&&t<=e&&e<n}function Jn(e,t,n,r){if(!$i(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function yS(e){let t;for(t=0;e>of;e>>=rc,t+=1);return t}function wS(e,t){return e>>BigInt(t)&rc}function vS(e,t,n){return e|(n?rc:of)<<BigInt(t)}var Hi=e=>(fS<<BigInt(e-1))-rc,rf=e=>new Uint8Array(e),Gw=e=>Uint8Array.from(e);function af(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=rf(e),o=rf(e),i=0,s=()=>{r.fill(1),o.fill(0),i=0},a=(...d)=>n(o,r,...d),c=(d=rf())=>{o=a(Gw([0]),d),r=a(),d.length!==0&&(o=a(Gw([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<t;){r=a();let p=r.slice();h.push(p),d+=r.length}return Uo(...h)};return(d,h)=>{s(),c(d);let p;for(;!(p=h(u()));)c();return s(),p}}var bS={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Qn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function er(e,t,n={}){let r=(o,i,s)=>{let a=bS[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var ES=()=>{throw new Error("not implemented")};function sc(e){let t=new WeakMap;return(n,...r)=>{let o=t.get(n);if(o!==void 0)return o;let i=e(n,...r);return t.set(n,i),i}}var Ae=BigInt(0),be=BigInt(1),Vr=BigInt(2),DS=BigInt(3),uf=BigInt(4),zw=BigInt(5),qw=BigInt(8),xS=BigInt(9),IS=BigInt(16);function ze(e,t){let n=e%t;return n>=Ae?n:t+n}function _S(e,t,n){if(n<=Ae||t<Ae)throw new Error("Expected power/modulo > 0");if(n===be)return Ae;let r=be;for(;t>Ae;)t&be&&(r=r*e%n),e=e*e%n,t>>=be;return r}function wt(e,t,n){let r=e;for(;t-- >Ae;)r*=r,r%=n;return r}function ac(e,t){if(e===Ae||t<=Ae)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ze(e,t),r=t,o=Ae,i=be,s=be,a=Ae;for(;n!==Ae;){let u=r/n,l=r%n,d=o-s*u,h=i-a*u;r=n,n=l,o=s,i=a,s=d,a=h}if(r!==be)throw new Error("invert: does not exist");return ze(o,t)}function CS(e){let t=(e-be)/Vr,n,r,o;for(n=e-be,r=0;n%Vr===Ae;n/=Vr,r++);for(o=Vr;o<e&&_S(o,t,e)!==e-be;o++);if(r===1){let s=(e+be)/uf;return function(c,u){let l=c.pow(u,s);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}let i=(n+be)/Vr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,o),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let f=a.sqr(h);p<u&&!a.eql(f,a.ONE);p++)f=a.sqr(f);let y=a.pow(l,be<<BigInt(u-p-1));l=a.sqr(y),d=a.mul(d,y),h=a.mul(h,l),u=p}return d}}function SS(e){if(e%uf===DS){let t=(e+be)/uf;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%qw===zw){let t=(e-zw)/qw;return function(r,o){let i=r.mul(o,Vr),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,Vr),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return e%IS,CS(e)}var TS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lf(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=TS.reduce((r,o)=>(r[o]="function",r),t);return er(e,n)}function AS(e,t,n){if(n<Ae)throw new Error("Expected power > 0");if(n===Ae)return e.ONE;if(n===be)return t;let r=e.ONE,o=t;for(;n>Ae;)n&be&&(r=e.mul(r,o)),o=e.sqr(o),n>>=be;return r}function MS(e,t){let n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function df(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Kw(e,t,n=!1,r={}){if(e<=Ae)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=df(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=SS(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Hi(o),ZERO:Ae,ONE:be,create:c=>ze(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ae<=c&&c<e},is0:c=>c===Ae,isOdd:c=>(c&be)===be,neg:c=>ze(-c,e),eql:(c,u)=>c===u,sqr:c=>ze(c*c,e),add:(c,u)=>ze(c+u,e),sub:(c,u)=>ze(c-u,e),mul:(c,u)=>ze(c*u,e),pow:(c,u)=>AS(a,c,u),div:(c,u)=>ze(c*ac(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>ac(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>MS(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?ic(c,i):Xn(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?oc(c):vn(c)}});return Object.freeze(a)}function Yw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function ff(e){let t=Yw(e);return t+Math.ceil(t/2)}function Zw(e,t,n=!1){let r=e.length,o=Yw(t),i=ff(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let s=n?vn(e):oc(e),a=ze(s,t-be)+be;return n?ic(a,o):Xn(a,o)}var RS=BigInt(0),hf=BigInt(1),pf=new WeakMap,Qw=new WeakMap;function Xw(e,t){let n=(i,s)=>{let a=s.negate();return i?a:s},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},o=i=>{r(i);let s=Math.ceil(t/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>RS;)s&hf&&(a=a.add(c)),c=c.double(),s>>=hf;return a},precomputeWindow(i,s){let{windows:a,windowSize:c}=o(s),u=[],l=i,d=l;for(let h=0;h<a;h++){d=l,u.push(d);for(let p=1;p<c;p++)d=d.add(l),u.push(d);l=d.double()}return u},wNAF(i,s,a){let{windows:c,windowSize:u}=o(i),l=e.ZERO,d=e.BASE,h=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let f=0;f<c;f++){let m=f*u,g=Number(a&h);a>>=y,g>u&&(g-=p,a+=hf);let w=m,v=m+Math.abs(g)-1,E=f%2!==0,D=g<0;g===0?d=d.add(n(E,s[w])):l=l.add(n(D,s[v]))}return{p:l,f:d}},wNAFCached(i,s,a){let c=Qw.get(i)||1,u=pf.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&pf.set(i,a(u))),this.wNAF(c,u,s)},setWindowSize(i,s){r(s),Qw.set(i,s),pf.delete(i)}}}function gf(e){return lf(e.Fp),er(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(V(T(T({},df(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}function Jw(e){e.lowS!==void 0&&Lr("lowS",e.lowS),e.prehash!==void 0&&Lr("prehash",e.prehash)}function kS(e){let t=gf(e);er(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(T({},t))}var{bytesToNumberBE:OS,hexToBytes:PS}=cf,jr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=jr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:OS(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=jr,n=typeof e=="string"?PS(e):e;jo(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=jr._parseInt(n.subarray(2)),{d:s,l:a}=jr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{let l=u.toString(16);return l.length&1?`0${l}`:l},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},tr=BigInt(0),Le=BigInt(1),BP=BigInt(2),ev=BigInt(3),VP=BigInt(4);function LS(e){let t=kS(e),{Fp:n}=t,r=t.toBytes||((y,f,m)=>{let g=f.toAffine();return Uo(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),o=t.fromBytes||(y=>{let f=y.subarray(1),m=n.fromBytes(f.subarray(0,n.BYTES)),g=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:m,y:g}});function i(y){let{a:f,b:m}=t,g=n.sqr(y),w=n.mul(g,y);return n.add(n.add(w,n.mul(y,f)),m)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return $i(y,Le,t.n)}function a(y){let{allowedPrivateKeyLengths:f,nByteLength:m,wrapPrivateKey:g,n:w}=t;if(f&&typeof y!="bigint"){if(Qn(y)&&(y=Fr(y)),typeof y!="string"||!f.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let v;try{v=typeof y=="bigint"?y:vn(yt("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return g&&(v=ze(v,w)),Jn("private key",v,Le,w),v}function c(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}let u=sc((y,f)=>{let{px:m,py:g,pz:w}=y;if(n.eql(w,n.ONE))return{x:m,y:g};let v=y.is0();f==null&&(f=v?n.ONE:n.inv(w));let E=n.mul(m,f),D=n.mul(g,f),b=n.mul(w,f);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(b,n.ONE))throw new Error("invZ was invalid");return{x:E,y:D}}),l=sc(y=>{if(y.is0()){if(t.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}let{x:f,y:m}=y.toAffine();if(!n.isValid(f)||!n.isValid(m))throw new Error("bad point: x or y not FE");let g=n.sqr(m),w=i(f);if(!n.eql(g,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(f,m,g){if(this.px=f,this.py=m,this.pz=g,f==null||!n.isValid(f))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:m,y:g}=f||{};if(!f||!n.isValid(m)||!n.isValid(g))throw new Error("invalid affine point");if(f instanceof d)throw new Error("projective point not allowed");let w=v=>n.eql(v,n.ZERO);return w(m)&&w(g)?d.ZERO:new d(m,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let m=n.invertBatch(f.map(g=>g.pz));return f.map((g,w)=>g.toAffine(m[w])).map(d.fromAffine)}static fromHex(f){let m=d.fromAffine(o(yt("pointHex",f)));return m.assertValidity(),m}static fromPrivateKey(f){return d.BASE.multiply(a(f))}_setWindowSize(f){p.setWindowSize(this,f)}assertValidity(){l(this)}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);let{px:m,py:g,pz:w}=this,{px:v,py:E,pz:D}=f,b=n.eql(n.mul(m,D),n.mul(v,w)),I=n.eql(n.mul(g,D),n.mul(E,w));return b&&I}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b:m}=t,g=n.mul(m,ev),{px:w,py:v,pz:E}=this,D=n.ZERO,b=n.ZERO,I=n.ZERO,_=n.mul(w,w),B=n.mul(v,v),N=n.mul(E,E),S=n.mul(w,v);return S=n.add(S,S),I=n.mul(w,E),I=n.add(I,I),D=n.mul(f,I),b=n.mul(g,N),b=n.add(D,b),D=n.sub(B,b),b=n.add(B,b),b=n.mul(D,b),D=n.mul(S,D),I=n.mul(g,I),N=n.mul(f,N),S=n.sub(_,N),S=n.mul(f,S),S=n.add(S,I),I=n.add(_,_),_=n.add(I,_),_=n.add(_,N),_=n.mul(_,S),b=n.add(b,_),N=n.mul(v,E),N=n.add(N,N),_=n.mul(N,S),D=n.sub(D,_),I=n.mul(N,B),I=n.add(I,I),I=n.add(I,I),new d(D,b,I)}add(f){c(f);let{px:m,py:g,pz:w}=this,{px:v,py:E,pz:D}=f,b=n.ZERO,I=n.ZERO,_=n.ZERO,B=t.a,N=n.mul(t.b,ev),S=n.mul(m,v),G=n.mul(g,E),L=n.mul(w,D),M=n.add(m,g),x=n.add(v,E);M=n.mul(M,x),x=n.add(S,G),M=n.sub(M,x),x=n.add(m,w);let C=n.add(v,D);return x=n.mul(x,C),C=n.add(S,L),x=n.sub(x,C),C=n.add(g,w),b=n.add(E,D),C=n.mul(C,b),b=n.add(G,L),C=n.sub(C,b),_=n.mul(B,x),b=n.mul(N,L),_=n.add(b,_),b=n.sub(G,_),_=n.add(G,_),I=n.mul(b,_),G=n.add(S,S),G=n.add(G,S),L=n.mul(B,L),x=n.mul(N,x),G=n.add(G,L),L=n.sub(S,L),L=n.mul(B,L),x=n.add(x,L),S=n.mul(G,x),I=n.add(I,S),S=n.mul(C,x),b=n.mul(M,b),b=n.sub(b,S),S=n.mul(M,G),_=n.mul(C,_),_=n.add(_,S),new d(b,I,_)}subtract(f){return this.add(f.negate())}is0(){return this.equals(d.ZERO)}wNAF(f){return p.wNAFCached(this,f,d.normalizeZ)}multiplyUnsafe(f){Jn("scalar",f,tr,t.n);let m=d.ZERO;if(f===tr)return m;if(f===Le)return this;let{endo:g}=t;if(!g)return p.unsafeLadder(this,f);let{k1neg:w,k1:v,k2neg:E,k2:D}=g.splitScalar(f),b=m,I=m,_=this;for(;v>tr||D>tr;)v&Le&&(b=b.add(_)),D&Le&&(I=I.add(_)),_=_.double(),v>>=Le,D>>=Le;return w&&(b=b.negate()),E&&(I=I.negate()),I=new d(n.mul(I.px,g.beta),I.py,I.pz),b.add(I)}multiply(f){let{endo:m,n:g}=t;Jn("scalar",f,Le,g);let w,v;if(m){let{k1neg:E,k1:D,k2neg:b,k2:I}=m.splitScalar(f),{p:_,f:B}=this.wNAF(D),{p:N,f:S}=this.wNAF(I);_=p.constTimeNegate(E,_),N=p.constTimeNegate(b,N),N=new d(n.mul(N.px,m.beta),N.py,N.pz),w=_.add(N),v=B.add(S)}else{let{p:E,f:D}=this.wNAF(f);w=E,v=D}return d.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(f,m,g){let w=d.BASE,v=(D,b)=>b===tr||b===Le||!D.equals(w)?D.multiplyUnsafe(b):D.multiply(b),E=v(this,m).add(v(f,g));return E.is0()?void 0:E}toAffine(f){return u(this,f)}isTorsionFree(){let{h:f,isTorsionFree:m}=t;if(f===Le)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:m}=t;return f===Le?this:m?m(d,this):this.multiplyUnsafe(t.h)}toRawBytes(f=!0){return Lr("isCompressed",f),this.assertValidity(),r(d,this,f)}toHex(f=!0){return Lr("isCompressed",f),Fr(this.toRawBytes(f))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);let h=t.nBitLength,p=Xw(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:s}}function FS(e){let t=gf(e);return er(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(T({lowS:!0},t))}function tv(e){let t=FS(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(M){return ze(M,r)}function a(M){return ac(M,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=LS(V(T({},t),{toBytes(M,x,C){let R=x.toAffine(),P=n.toBytes(R.x),U=Uo;return Lr("isCompressed",C),C?U(Uint8Array.from([x.hasEvenY()?2:3]),P):U(Uint8Array.from([4]),P,n.toBytes(R.y))},fromBytes(M){let x=M.length,C=M[0],R=M.subarray(1);if(x===o&&(C===2||C===3)){let P=vn(R);if(!$i(P,Le,n.ORDER))throw new Error("Point is not on curve");let U=l(P),Y;try{Y=n.sqrt(U)}catch(ye){let ve=ye instanceof Error?": "+ye.message:"";throw new Error("Point is not on curve"+ve)}let X=(Y&Le)===Le;return(C&1)===1!==X&&(Y=n.neg(Y)),{x:P,y:Y}}else if(x===i&&C===4){let P=n.fromBytes(R.subarray(0,n.BYTES)),U=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:P,y:U}}else throw new Error(`Point of length ${x} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}})),h=M=>Fr(Xn(M,t.nByteLength));function p(M){let x=r>>Le;return M>x}function y(M){return p(M)?s(-M):M}let f=(M,x,C)=>vn(M.slice(x,C));class m{constructor(x,C,R){this.r=x,this.s=C,this.recovery=R,this.assertValidity()}static fromCompact(x){let C=t.nByteLength;return x=yt("compactSignature",x,C*2),new m(f(x,0,C),f(x,C,2*C))}static fromDER(x){let{r:C,s:R}=jr.toSig(yt("DER",x));return new m(C,R)}assertValidity(){Jn("r",this.r,Le,r),Jn("s",this.s,Le,r)}addRecoveryBit(x){return new m(this.r,this.s,x)}recoverPublicKey(x){let{r:C,s:R,recovery:P}=this,U=b(yt("msgHash",x));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");let Y=P===2||P===3?C+t.n:C;if(Y>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let X=P&1?"03":"02",ne=c.fromHex(X+h(Y)),ye=a(Y),ve=s(-U*ye),ot=s(R*ye),it=c.BASE.multiplyAndAddUnsafe(ne,ve,ot);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Br(this.toDERHex())}toDERHex(){return jr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Br(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let g={isValidPrivateKey(M){try{return u(M),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let M=ff(t.n);return Zw(t.randomBytes(M),t.n)},precompute(M=8,x=c.BASE){return x._setWindowSize(M),x.multiply(BigInt(3)),x}};function w(M,x=!0){return c.fromPrivateKey(M).toRawBytes(x)}function v(M){let x=Qn(M),C=typeof M=="string",R=(x||C)&&M.length;return x?R===o||R===i:C?R===2*o||R===2*i:M instanceof c}function E(M,x,C=!0){if(v(M))throw new Error("first arg must be private key");if(!v(x))throw new Error("second arg must be public key");return c.fromHex(x).multiply(u(M)).toRawBytes(C)}let D=t.bits2int||function(M){let x=vn(M),C=M.length*8-t.nBitLength;return C>0?x>>BigInt(C):x},b=t.bits2int_modN||function(M){return s(D(M))},I=Hi(t.nBitLength);function _(M){return Jn(`num < 2^${t.nBitLength}`,M,tr,I),Xn(M,t.nByteLength)}function B(M,x,C=N){if(["recovered","canonical"].some(kt=>kt in C))throw new Error("sign() legacy options not supported");let{hash:R,randomBytes:P}=t,{lowS:U,prehash:Y,extraEntropy:X}=C;U==null&&(U=!0),M=yt("msgHash",M),Jw(C),Y&&(M=yt("prehashed msgHash",R(M)));let ne=b(M),ye=u(x),ve=[_(ye),_(ne)];if(X!=null&&X!==!1){let kt=X===!0?P(n.BYTES):X;ve.push(yt("extraEntropy",kt))}let ot=Uo(...ve),it=ne;function It(kt){let st=D(kt);if(!d(st))return;let an=a(st),ft=c.BASE.multiply(st).toAffine(),Ue=s(ft.x);if(Ue===tr)return;let Ot=s(an*s(it+Ue*ye));if(Ot===tr)return;let gr=(ft.x===Ue?0:2)|Number(ft.y&Le),di=Ot;return U&&p(Ot)&&(di=y(Ot),gr^=1),new m(Ue,di,gr)}return{seed:ot,k2sig:It}}let N={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};function G(M,x,C=N){let{seed:R,k2sig:P}=B(M,x,C),U=t;return af(U.hash.outputLen,U.nByteLength,U.hmac)(R,P)}c.BASE._setWindowSize(8);function L(M,x,C,R=S){let P=M;if(x=yt("msgHash",x),C=yt("publicKey",C),"strict"in R)throw new Error("options.strict was renamed to lowS");Jw(R);let{lowS:U,prehash:Y}=R,X,ne;try{if(typeof P=="string"||Qn(P))try{X=m.fromDER(P)}catch(ft){if(!(ft instanceof jr.Err))throw ft;X=m.fromCompact(P)}else if(typeof P=="object"&&typeof P.r=="bigint"&&typeof P.s=="bigint"){let{r:ft,s:Ue}=P;X=new m(ft,Ue)}else throw new Error("PARSE");ne=c.fromHex(C)}catch(ft){if(ft.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&X.hasHighS())return!1;Y&&(x=t.hash(x));let{r:ye,s:ve}=X,ot=b(x),it=a(ve),It=s(ot*it),kt=s(ye*it),st=c.BASE.multiplyAndAddUnsafe(ne,It,kt)?.toAffine();return st?s(st.x)===ye:!1}return{CURVE:t,getPublicKey:w,getSharedSecret:E,sign:G,verify:L,ProjectivePoint:c,Signature:m,utils:g}}function BS(e){return{hash:e,hmac:(t,...n)=>Ui(e,t,ec(...n)),randomBytes:Bo}}function nv(e,t){let n=r=>tv(T(T({},e),BS(r)));return Object.freeze(V(T({},n(t)),{create:n}))}var iv=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rv=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),VS=BigInt(1),mf=BigInt(2),ov=(e,t)=>(e+t/mf)/t;function jS(e){let t=iv,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=wt(l,n,t)*l%t,h=wt(d,n,t)*l%t,p=wt(h,mf,t)*u%t,y=wt(p,o,t)*p%t,f=wt(y,i,t)*y%t,m=wt(f,a,t)*f%t,g=wt(m,c,t)*m%t,w=wt(g,a,t)*f%t,v=wt(w,n,t)*l%t,E=wt(v,s,t)*y%t,D=wt(E,r,t)*u%t,b=wt(D,mf,t);if(!yf.eql(yf.sqr(b),e))throw new Error("Cannot find square root");return b}var yf=Kw(iv,void 0,void 0,{sqrt:jS}),wf=nv({a:BigInt(0),b:BigInt(7),Fp:yf,n:rv,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=rv,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-VS*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=ov(i*e,t),c=ov(-r*e,t),u=ze(e-a*n-c*o,t),l=ze(-a*r-c*i,t),d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},De),ZP=BigInt(0);var QP=wf.ProjectivePoint;function $o(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function cc(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function lc(...e){let t=i=>i,n=(i,s)=>a=>i(s(a)),r=e.map(i=>i.encode).reduceRight(n,t),o=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:o}}function Ef(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Df(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function US(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function sv(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0,o=[],i=Array.from(e);for(i.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=r;c<i.length;c++){let u=i[c],l=t*s+u;if(!Number.isSafeInteger(l)||t*s/t!==s||l-u!==t*s)throw new Error("convertRadix: carry overflow");s=l%n;let d=Math.floor(l/n);if(i[c]=d,!Number.isSafeInteger(d)||d*n+s!==l)throw new Error("convertRadix: carry overflow");if(a)d?a=!1:r=c;else continue}if(o.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}var lv=(e,t)=>t?lv(t,e%t):e,uc=(e,t)=>e+(t-lv(e,t));function vf(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(uc(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${uc(t,n)}`);let o=0,i=0,s=2**n-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function $S(e){return{encode:t=>{if(!cc(t))throw new Error("radix.encode input should be Uint8Array");return sv(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(sv(t,e,2**8))}}}function dv(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(uc(8,e)>32||uc(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!cc(n))throw new Error("radix2.encode input should be Uint8Array");return vf(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(vf(n,e,8,t))}}}function av(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function HS(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!cc(n))throw new Error("checksum.encode: input should be Uint8Array");let r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!cc(n))throw new Error("checksum.decode: input should be Uint8Array");let r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let s=0;s<e;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return r}}}var GS=e=>lc($S(58),Ef(e),Df("")),dc=GS("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var fv=e=>lc(HS(4,t=>e(e(t))),dc);var bf=lc(Ef("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Df("")),cv=[996825010,642813549,513874426,1027748829,705979059];function Gi(e){let t=e>>25,n=(e&33554431)<<5;for(let r=0;r<cv.length;r++)(t>>r&1)===1&&(n^=cv[r]);return n}function uv(e,t,n=1){let r=e.length,o=1;for(let i=0;i<r;i++){let s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=Gi(o)^s>>5}o=Gi(o);for(let i=0;i<r;i++)o=Gi(o)^e.charCodeAt(i)&31;for(let i of t)o=Gi(o)^i;for(let i=0;i<6;i++)o=Gi(o);return o^=n,bf.encode(vf([o%2**30],30,5,!1))}function hv(e){let t=e==="bech32"?1:734539939,n=dv(5),r=n.decode,o=n.encode,i=av(r);function s(l,d,h=90){if(typeof l!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof l}`);if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof d}`);if(l.length===0)throw new TypeError(`Invalid prefix length ${l.length}`);let p=l.length+7+d.length;if(h!==!1&&p>h)throw new TypeError(`Length ${p} exceeds limit ${h}`);let y=l.toLowerCase(),f=uv(y,d,t);return`${y}1${bf.encode(d)}${f}`}function a(l,d=90){if(typeof l!="string")throw new Error(`bech32.decode input should be string, not ${typeof l}`);if(l.length<8||d!==!1&&l.length>d)throw new TypeError(`Wrong string length: ${l.length} (${l}). Expected (8..${d})`);let h=l.toLowerCase();if(l!==h&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");let p=h.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');let y=h.slice(0,p),f=h.slice(p+1);if(f.length<6)throw new Error("Data must be at least 6 characters long");let m=bf.decode(f).slice(0,-6),g=uv(y,m,t);if(!f.endsWith(g))throw new Error(`Invalid checksum in ${l}: expected "${g}"`);return{prefix:y,words:m}}let c=av(a);function u(l){let{prefix:d,words:h}=a(l,!1);return{prefix:d,words:h,bytes:r(h)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:i,toWords:o}}var fc=hv("bech32"),xf=hv("bech32m"),pv={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},ce=lc(dv(4),Ef("0123456789abcdef"),Df(""),US(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var fe=new Uint8Array,Sf=new Uint8Array([0]);function Ho(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Mt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function WS(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];if(!Mt(o))throw new Error("Uint8Array expected");t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}var Tf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Go(e){return Object.prototype.toString.call(e)==="[object Object]"}function tn(e){return Number.isSafeInteger(e)}var gv={equalBytes:Ho,isBytes:Mt,isCoder:vt,checkBounds:yv,concatBytes:WS,createView:Tf,isPlainObject:Go},mv=e=>{if(e!==null&&typeof e!="string"&&!vt(e)&&!Mt(e)&&!tn(e))throw new Error(`lengthCoder: expected null | number | Uint8Array | CoderType, got ${e} (${typeof e})`);return{encodeStream(t,n){if(e===null)return;if(vt(e))return e.encodeStream(t,n);let r;if(typeof e=="number"?r=e:typeof e=="string"&&(r=bn.resolve(t.stack,e)),typeof r=="bigint"&&(r=Number(r)),r===void 0||r!==n)throw t.err(`Wrong length: ${r} len=${e} exp=${n} (${typeof n})`)},decodeStream(t){let n;if(vt(e)?n=Number(e.decodeStream(t)):typeof e=="number"?n=e:typeof e=="string"&&(n=bn.resolve(t.stack,e)),typeof n=="bigint"&&(n=Number(n)),typeof n!="number")throw t.err(`Wrong length: ${n}`);return n}}},Fe={BITS:32,FULL_MASK:-1>>>0,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(Fe.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map(t=>(t>>>0).toString(2).padStart(32,"0")),checkLen:(e,t)=>{if(Fe.len(t)!==e.length)throw new Error(`wrong length=${e.length}. Expected: ${Fe.len(t)}`)},chunkLen:(e,t,n)=>{if(t<0)throw new Error(`wrong pos=${t}`);if(t+n>e)throw new Error(`wrong range=${t}/${n} of ${e}`)},set:(e,t,n,r=!0)=>!r&&e[t]&n?!1:(e[t]|=n,!0),pos:(e,t)=>({chunk:Math.floor((e+t)/32),mask:1<<32-(e+t)%32-1}),indices:(e,t,n=!1)=>{Fe.checkLen(e,t);let{FULL_MASK:r,BITS:o}=Fe,i=o-t%o,s=i?r>>>i<<i:r,a=[];for(let c=0;c<e.length;c++){let u=e[c];if(n&&(u=~u),c===e.length-1&&(u&=s),u!==0)for(let l=0;l<o;l++){let d=1<<o-l-1;u&d&&a.push(c*o+l)}}return a},range:e=>{let t=[],n;for(let r of e)n===void 0||r!==n.pos+n.length?t.push(n={pos:r,length:1}):n.length+=1;return t},rangeDebug:(e,t,n=!1)=>`[${Fe.range(Fe.indices(e,t,n)).map(r=>`(${r.pos}/${r.length})`).join(", ")}]`,setRange:(e,t,n,r,o=!0)=>{Fe.chunkLen(t,n,r);let{FULL_MASK:i,BITS:s}=Fe,a=n%s?Math.floor(n/s):void 0,c=n+r,u=c%s?Math.floor(c/s):void 0;if(a!==void 0&&a===u)return Fe.set(e,a,i>>>s-r<<s-r-n,o);if(a!==void 0&&!Fe.set(e,a,i>>>n%s,o))return!1;let l=a!==void 0?a+1:n/s,d=u!==void 0?u:c/s;for(let h=l;h<d;h++)if(!Fe.set(e,h,i,o))return!1;return!(u!==void 0&&a!==u&&!Fe.set(e,u,i<<s-c%s,o))}},bn={pushObj:(e,t,n)=>{let r={obj:t};e.push(r),n((o,i)=>{r.field=o,i(),r.field=void 0}),e.pop()},path:e=>{let t=[];for(let n of e)n.field!==void 0&&t.push(n.field);return t.join("/")},err(e,t,n){let r=new Error(`${e}(${bn.path(t)}): ${typeof n=="string"?n:n.message}`);return n instanceof Error&&n.stack&&(r.stack=n.stack),r},resolve:(e,t)=>{let n=t.split("/"),r=e.map(s=>s.obj),o=0;for(;o<n.length&&n[o]==="..";o++)r.pop();let i=r.pop();for(;o<n.length;o++){if(!i||i[n[o]]===void 0)return;i=i[n[o]]}return i}},If=class e{constructor(t,n={},r=[],o=void 0,i=0){this.data=t,this.opts=n,this.stack=r,this.parent=o,this.parentOffset=i,this.pos=0,this.bitBuf=0,this.bitPos=0,this.view=Tf(t)}_enablePointers(){if(this.parent)return this.parent._enablePointers();this.bs||(this.bs=Fe.create(this.data.length),Fe.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(t,n){return this.parent?this.parent.markBytesBS(this.parentOffset+t,n):!n||!this.bs?!0:Fe.setRange(this.bs,this.data.length,t,n,!1)}markBytes(t){let n=this.pos;this.pos+=t;let r=this.markBytesBS(n,t);if(!this.opts.allowMultipleReads&&!r)throw this.err(`multiple read pos=${this.pos} len=${t}`);return r}pushObj(t,n){return bn.pushObj(this.stack,t,n)}readView(t,n){if(!Number.isFinite(t))throw this.err(`readView: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readView: Unexpected end of buffer");let r=n(this.view,this.pos);return this.markBytes(t),r}absBytes(t){if(t>this.data.length)throw new Error("Unexpected end of buffer");return this.data.subarray(t)}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err(`${this.bitPos} bits left after unpack: ${ce.encode(this.data.slice(this.pos))}`);if(this.bs&&!this.parent){let t=Fe.indices(this.bs,this.data.length,!0);if(t.length){let n=Fe.range(t).map(({pos:r,length:o})=>`(${r}/${o})[${ce.encode(this.data.subarray(r,r+o))}]`).join(", ");throw this.err(`unread byte ranges: ${n} (total=${this.data.length})`)}else return}if(!this.isEnd())throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${ce.encode(this.data.slice(this.pos))}`)}}err(t){return bn.err("Reader",this.stack,t)}offsetReader(t){if(t>this.data.length)throw this.err("offsetReader: Unexpected end of buffer");return new e(this.absBytes(t),this.opts,this.stack,this,t)}bytes(t,n=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let r=this.data.subarray(this.pos,this.pos+t);return n||this.markBytes(t),r}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");if(this.pos+1>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data[this.pos];return t||this.markBytes(1),n}get leftBytes(){return this.data.length-this.pos}get totalBytes(){return this.data.length}isEnd(){return this.pos>=this.data.length&&!this.bitPos}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let n=0;for(;t;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);let r=Math.min(t,this.bitPos);this.bitPos-=r,n=n<<r|this.bitBuf>>this.bitPos&2**r-1,this.bitBuf&=2**this.bitPos-1,t-=r}return n>>>0}find(t,n=this.pos){if(!Mt(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let r=n;(r=this.data.indexOf(t[0],r))!==-1;r++){if(r===-1||this.data.length-r<t.length)return;if(Ho(t,this.data.subarray(r,r+t.length)))return r}}},_f=class{constructor(t=[]){this.stack=t,this.pos=0,this.buffers=[],this.ptrs=[],this.bitBuf=0,this.bitPos=0,this.viewBuf=new Uint8Array(8),this.finished=!1,this.view=Tf(this.viewBuf)}pushObj(t,n){return bn.pushObj(this.stack,t,n)}writeView(t,n){if(this.finished)throw this.err("buffer: finished");if(!tn(t)||t>8)throw new Error(`wrong writeView length=${t}`);n(this.view),this.bytes(this.viewBuf.slice(0,t)),this.viewBuf.fill(0)}err(t){if(this.finished)throw this.err("buffer: finished");return bn.err("Reader",this.stack,t)}bytes(t){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}finish(t=!0){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let n=this.buffers.concat(this.ptrs.map(i=>i.buffer)),r=n.map(i=>i.length).reduce((i,s)=>i+s,0),o=new Uint8Array(r);for(let i=0,s=0;i<n.length;i++){let a=n[i];o.set(a,s),s+=a.length}for(let i=this.pos,s=0;s<this.ptrs.length;s++){let a=this.ptrs[s];o.set(a.ptr.encode(i),a.pos),i+=a.buffer.length}if(t){this.buffers=[];for(let i of this.ptrs)i.buffer.fill(0);this.ptrs=[],this.finished=!0,this.bitBuf=0}return o}bits(t,n){if(n>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**n)throw this.err(`writeBits: value (${t}) >= 2**bits (${n})`);for(;n;){let r=Math.min(n,8-this.bitPos);this.bitBuf=this.bitBuf<<r|t>>n-r,this.bitPos+=r,n-=r,t&=2**n-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}},Cf=e=>Uint8Array.from(e).reverse();function yv(e,t,n){if(n){let r=2n**(t-1n);if(e<-r||e>=r)throw new Error(`value out of signed bounds. Expected ${-r} <= ${e} < ${r}`)}else if(0n>e||e>=2n**t)throw new Error(`value out of unsigned bounds. Expected 0 <= ${e} < ${2n**t}`)}function wv(e){return{encodeStream:e.encodeStream,decodeStream:e.decodeStream,size:e.size,encode:t=>{let n=new _f;return e.encodeStream(n,t),n.finish()},decode:(t,n={})=>{let r=new If(t,n),o=e.decodeStream(r);return r.finish(),o}}}function qe(e,t){if(!vt(e))throw new Error(`validate: invalid inner value ${e}`);if(typeof t!="function")throw new Error("validate: fn should be function");return wv({size:e.size,encodeStream:(n,r)=>{let o;try{o=t(r)}catch(i){throw n.err(i)}e.encodeStream(n,o)},decodeStream:n=>{let r=e.decodeStream(n);try{return t(r)}catch(o){throw n.err(o)}}})}var Ke=e=>{let t=wv(e);return e.validate?qe(t,e.validate):t},hc=e=>Go(e)&&typeof e.decode=="function"&&typeof e.encode=="function";function vt(e){return Go(e)&&hc(e)&&typeof e.encodeStream=="function"&&typeof e.decodeStream=="function"&&(e.size===void 0||tn(e.size))}function zS(){return{encode:e=>{if(!Array.isArray(e))throw new Error("array expected");let t={};for(let n of e){if(!Array.isArray(n)||n.length!==2)throw new Error("array of two elements expected");let r=n[0],o=n[1];if(t[r]!==void 0)throw new Error(`key(${r}) appears twice in struct`);t[r]=o}return t},decode:e=>{if(!Go(e))throw new Error(`expected plain object, got ${e}`);return Object.entries(e)}}}var qS={encode:e=>{if(typeof e!="bigint")throw new Error(`expected bigint, got ${typeof e}`);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>{if(!tn(e))throw new Error("element is not a safe integer");return BigInt(e)}};function KS(e){if(!Go(e))throw new Error("plain object expected");return{encode:t=>{if(!tn(t)||!(t in e))throw new Error(`wrong value ${t}`);return e[t]},decode:t=>{if(typeof t!="string")throw new Error(`wrong value ${typeof t}`);return e[t]}}}function YS(e,t=!1){if(!tn(e))throw new Error(`decimal/precision: wrong value ${e}`);if(typeof t!="boolean")throw new Error(`decimal/round: expected boolean, got ${typeof t}`);let n=10n**BigInt(e);return{encode:r=>{if(typeof r!="bigint")throw new Error(`expected bigint, got ${typeof r}`);let o=(r<0n?-r:r).toString(10),i=o.length-e;i<0&&(o=o.padStart(o.length-i,"0"),i=0);let s=o.length-1;for(;s>=i&&o[s]==="0";s--);let a=o.slice(0,i),c=o.slice(i,s+1);return a||(a="0"),r<0n&&(a="-"+a),c?`${a}.${c}`:a},decode:r=>{if(typeof r!="string")throw new Error(`expected string, got ${typeof r}`);if(r==="-0")throw new Error("negative zero is not allowed");let o=!1;if(r.startsWith("-")&&(o=!0,r=r.slice(1)),!/^(0|[1-9]\d*)(\.\d+)?$/.test(r))throw new Error(`wrong string value=${r}`);let i=r.indexOf(".");i=i===-1?r.length:i;let s=r.slice(0,i),a=r.slice(i+1).replace(/0+$/,""),c=BigInt(s)*n;if(!t&&a.length>e)throw new Error(`fractional part cannot be represented with this precision (num=${r}, prec=${e})`);let u=Math.min(a.length,e),l=BigInt(a.slice(0,u))*10n**BigInt(e-u),d=c+l;return o?-d:d}}}function ZS(e){if(!Array.isArray(e))throw new Error(`expected array, got ${typeof e}`);for(let t of e)if(!hc(t))throw new Error(`wrong base coder ${t}`);return{encode:t=>{for(let n of e){let r=n.encode(t);if(r!==void 0)return r}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let n of e){let r=n.decode(t);if(r!==void 0)return r}throw new Error(`match/decode: cannot find match in ${t}`)}}}var vv=e=>{if(!hc(e))throw new Error("BaseCoder expected");return{encode:e.decode,decode:e.encode}},En={dict:zS,numberBigint:qS,tsEnum:KS,decimal:YS,match:ZS,reverse:vv};var Af=(e,t=!1,n=!1,r=!0)=>{if(!tn(e))throw new Error(`bigint/size: wrong value ${e}`);if(typeof t!="boolean")throw new Error(`bigint/le: expected boolean, got ${typeof t}`);if(typeof n!="boolean")throw new Error(`bigint/signed: expected boolean, got ${typeof n}`);if(typeof r!="boolean")throw new Error(`bigint/sized: expected boolean, got ${typeof r}`);let o=BigInt(e),i=2n**(8n*o-1n);return Ke({size:r?e:void 0,encodeStream:(s,a)=>{n&&a<0&&(a=a|i);let c=[];for(let l=0;l<e;l++)c.push(Number(a&255n)),a>>=8n;let u=new Uint8Array(c).reverse();if(!r){let l=0;for(l=0;l<u.length&&u[l]===0;l++);u=u.subarray(l)}s.bytes(t?u.reverse():u)},decodeStream:s=>{let a=s.bytes(r?e:Math.min(e,s.leftBytes)),c=t?a:Cf(a),u=0n;for(let l=0;l<c.length;l++)u|=BigInt(c[l])<<8n*BigInt(l);return n&&u&i&&(u=(u^i)-i),u},validate:s=>{if(typeof s!="bigint")throw new Error(`bigint: invalid value: ${s}`);return yv(s,8n*o,!!n),s}})};var bv=Af(32,!1);var Wo=Af(8,!0);var Ev=Af(8,!0,!0);var QS=(e,t)=>Ke({size:e,encodeStream:(n,r)=>n.writeView(e,o=>t.write(o,r)),decodeStream:n=>n.readView(e,t.read),validate:n=>{if(typeof n!="number")throw new Error(`viewCoder: expected number, got ${typeof n}`);return t.validate&&t.validate(n),n}}),Wi=(e,t,n)=>{let r=e*8,o=2**(r-1),i=c=>{if(!tn(c))throw new Error(`sintView: value is not safe integer: ${c}`);if(c<-o||c>=o)throw new Error(`sintView: value out of bounds. Expected ${-o} <= ${c} < ${o}`)},s=2**r,a=c=>{if(!tn(c))throw new Error(`uintView: value is not safe integer: ${c}`);if(0>c||c>=s)throw new Error(`uintView: value out of bounds. Expected 0 <= ${c} < ${s}`)};return QS(e,{write:n.write,read:n.read,validate:t?i:a})},re=Wi(4,!1,{read:(e,t)=>e.getUint32(t,!0),write:(e,t)=>e.setUint32(0,t,!0)}),Dv=Wi(4,!1,{read:(e,t)=>e.getUint32(t,!1),write:(e,t)=>e.setUint32(0,t,!1)}),Ur=Wi(4,!0,{read:(e,t)=>e.getInt32(t,!0),write:(e,t)=>e.setInt32(0,t,!0)});var Mf=Wi(2,!1,{read:(e,t)=>e.getUint16(t,!0),write:(e,t)=>e.setUint16(0,t,!0)});var Ht=Wi(1,!1,{read:(e,t)=>e.getUint8(t),write:(e,t)=>e.setUint8(0,t)});var he=(e,t=!1)=>{if(typeof t!="boolean")throw new Error(`bytes/le: expected boolean, got ${typeof t}`);let n=mv(e),r=Mt(e);return Ke({size:typeof e=="number"?e:void 0,encodeStream:(o,i)=>{r||n.encodeStream(o,i.length),o.bytes(t?Cf(i):i),r&&o.bytes(e)},decodeStream:o=>{let i;if(r){let s=o.find(e);if(!s)throw o.err("bytes: cannot find terminator");i=o.bytes(s-o.pos),o.bytes(e.length)}else i=o.bytes(e===null?o.leftBytes:n.decodeStream(o));return t?Cf(i):i},validate:o=>{if(!Mt(o))throw new Error(`bytes: invalid value ${o}`);return o}})};function xv(e,t){if(!vt(t))throw new Error(`prefix: invalid inner value ${t}`);return $t(he(e),vv(t))}var pc=(e,t=!1)=>qe($t(he(e,t),pv),n=>{if(typeof n!="string")throw new Error(`expected string, got ${typeof n}`);return n});var Iv=(e,t={isLE:!1,with0x:!1})=>{let n=$t(he(e,t.isLE),ce);if(typeof t.with0x!="boolean")throw new Error(`hex/with0x: expected boolean, got ${typeof t.with0x}`);return t.with0x&&(n=$t(n,{encode:r=>`0x${r}`,decode:r=>{if(!r.startsWith("0x"))throw new Error("hex(with0x=true).encode input should start with 0x");return r.slice(2)}})),n};function $t(e,t){if(!vt(e))throw new Error(`apply: invalid inner value ${e}`);if(!hc(t))throw new Error(`apply: invalid base value ${e}`);return Ke({size:e.size,encodeStream:(n,r)=>{let o;try{o=t.decode(r)}catch(i){throw n.err(""+i)}return e.encodeStream(n,o)},decodeStream:n=>{let r=e.decodeStream(n);try{return t.encode(r)}catch(o){throw n.err(""+o)}}})}var _v=(e,t=!1)=>{if(!Mt(e))throw new Error(`flag/flagValue: expected Uint8Array, got ${typeof e}`);if(typeof t!="boolean")throw new Error(`flag/xor: expected boolean, got ${typeof t}`);return Ke({size:e.length,encodeStream:(n,r)=>{!!r!==t&&n.bytes(e)},decodeStream:n=>{let r=n.leftBytes>=e.length;return r&&(r=Ho(n.bytes(e.length,!0),e),r&&n.bytes(e.length)),r!==t},validate:n=>{if(n!==void 0&&typeof n!="boolean")throw new Error(`flag: expected boolean value or undefined, got ${typeof n}`);return n}})};function Cv(e,t,n){if(!vt(t))throw new Error(`flagged: invalid inner value ${t}`);if(typeof e!="string"&&!vt(t))throw new Error(`flagged: wrong path=${e}`);return Ke({encodeStream:(r,o)=>{typeof e=="string"?bn.resolve(r.stack,e)?t.encodeStream(r,o):n&&t.encodeStream(r,n):(e.encodeStream(r,!!o),o?t.encodeStream(r,o):n&&t.encodeStream(r,n))},decodeStream:r=>{let o=!1;if(typeof e=="string"?o=!!bn.resolve(r.stack,e):o=e.decodeStream(r),o)return t.decodeStream(r);n&&t.decodeStream(r)}})}function gc(e,t,n=!0){if(!vt(e))throw new Error(`magic: invalid inner value ${e}`);if(typeof n!="boolean")throw new Error(`magic: expected boolean, got ${typeof n}`);return Ke({size:e.size,encodeStream:(r,o)=>e.encodeStream(r,t),decodeStream:r=>{let o=e.decodeStream(r);if(n&&typeof o!="object"&&o!==t||Mt(t)&&!Ho(t,o))throw r.err(`magic: invalid value: ${o} !== ${t}`)},validate:r=>{if(r!==void 0)throw new Error(`magic: wrong value=${typeof r}`);return r}})}function Sv(e){let t=0;for(let n of e){if(n.size===void 0)return;if(!tn(n.size))throw new Error(`sizeof: wrong element size=${t}`);t+=n.size}return t}function Be(e){if(!Go(e))throw new Error(`struct: expected plain object, got ${e}`);for(let t in e)if(!vt(e[t]))throw new Error(`struct: field ${t} is not CoderType`);return Ke({size:Sv(Object.values(e)),encodeStream:(t,n)=>{t.pushObj(n,r=>{for(let o in e)r(o,()=>e[o].encodeStream(t,n[o]))})},decodeStream:t=>{let n={};return t.pushObj(n,r=>{for(let o in e)r(o,()=>n[o]=e[o].decodeStream(t))}),n},validate:t=>{if(typeof t!="object"||t===null)throw new Error(`struct: invalid value ${t}`);return t}})}function Tv(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);for(let t=0;t<e.length;t++)if(!vt(e[t]))throw new Error(`tuple: field ${t} is not CoderType`);return Ke({size:Sv(e),encodeStream:(t,n)=>{if(!Array.isArray(n))throw t.err(`tuple: invalid value ${n}`);t.pushObj(n,r=>{for(let o=0;o<e.length;o++)r(`${o}`,()=>e[o].encodeStream(t,n[o]))})},decodeStream:t=>{let n=[];return t.pushObj(n,r=>{for(let o=0;o<e.length;o++)r(`${o}`,()=>n.push(e[o].decodeStream(t)))}),n},validate:t=>{if(!Array.isArray(t))throw new Error(`tuple: invalid value ${t}`);if(t.length!==e.length)throw new Error(`tuple: wrong length=${t.length}, expected ${e.length}`);return t}})}function Ye(e,t){if(!vt(t))throw new Error(`array: invalid inner value ${t}`);let n=mv(typeof e=="string"?`../${e}`:e);return Ke({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,o)=>{let i=r;i.pushObj(o,s=>{Mt(e)||n.encodeStream(r,o.length);for(let a=0;a<o.length;a++)s(`${a}`,()=>{let c=o[a],u=r.pos;if(t.encodeStream(r,c),Mt(e)){if(e.length>i.pos-u)return;let l=i.finish(!1).subarray(u,i.pos);if(Ho(l.subarray(0,e.length),e))throw i.err(`array: inner element encoding same as separator. elm=${c} data=${l}`)}})}),Mt(e)&&r.bytes(e)},decodeStream:r=>{let o=[];return r.pushObj(o,i=>{if(e===null)for(let s=0;!r.isEnd()&&(i(`${s}`,()=>o.push(t.decodeStream(r))),!(t.size&&r.leftBytes<t.size));s++);else if(Mt(e))for(let s=0;;s++){if(Ho(r.bytes(e.length,!0),e)){r.bytes(e.length);break}i(`${s}`,()=>o.push(t.decodeStream(r)))}else{let s;i("arrayLen",()=>s=n.decodeStream(r));for(let a=0;a<s;a++)i(`${a}`,()=>o.push(t.decodeStream(r)))}}),o},validate:r=>{if(!Array.isArray(r))throw new Error(`array: invalid value ${r}`);return r}})}var XS=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Mv=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),JS=Mv.map(e=>(9*e+5)%16),Rf=[Mv],kf=[JS];for(let e=0;e<4;e++)for(let t of[Rf,kf])t.push(t[e].map(n=>XS[n]));var Nv=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),eT=Rf.map((e,t)=>e.map(n=>Nv[t][n])),tT=kf.map((e,t)=>e.map(n=>Nv[t][n])),nT=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),rT=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Av(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}var yc=new Uint32Array(16),Nf=class extends Vo{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:n,h2:r,h3:o,h4:i}=this;return[t,n,r,o,i]}set(t,n,r,o,i){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=o|0,this.h4=i|0}process(t,n){for(let p=0;p<16;p++,n+=4)yc[p]=t.getUint32(n,!0);let r=this.h0|0,o=r,i=this.h1|0,s=i,a=this.h2|0,c=a,u=this.h3|0,l=u,d=this.h4|0,h=d;for(let p=0;p<5;p++){let y=4-p,f=nT[p],m=rT[p],g=Rf[p],w=kf[p],v=eT[p],E=tT[p];for(let D=0;D<16;D++){let b=Vi(r+Av(p,i,a,u)+yc[g[D]]+f,v[D])+d|0;r=d,d=u,u=Vi(a,10)|0,a=i,i=b}for(let D=0;D<16;D++){let b=Vi(o+Av(y,s,c,l)+yc[w[D]]+m,E[D])+h|0;o=h,h=l,l=Vi(c,10)|0,c=s,s=b}}this.set(this.h1+a+l|0,this.h2+u+h|0,this.h3+d+o|0,this.h4+r+s|0,this.h0+i+c|0)}roundClean(){yc.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},Rv=tc(()=>new Nf);var Ff={};Sp(Ff,{abytes:()=>zo,bitGet:()=>lT,bitLen:()=>uT,bitMask:()=>zi,bitSet:()=>dT,bytesToHex:()=>$r,bytesToNumberBE:()=>$e,bytesToNumberLE:()=>vc,concatBytes:()=>xn,createHmacDrbg:()=>Lf,ensureBytes:()=>Me,equalBytes:()=>aT,hexToBytes:()=>Hr,hexToNumber:()=>Pf,isBytes:()=>nr,numberToBytesBE:()=>Gt,numberToBytesLE:()=>bc,numberToHexUnpadded:()=>Lv,numberToVarBytesBE:()=>sT,utf8ToBytes:()=>cT,validateObject:()=>rr});var Pv=BigInt(0),wc=BigInt(1),oT=BigInt(2);function nr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function zo(e){if(!nr(e))throw new Error("Uint8Array expected")}var iT=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $r(e){zo(e);let t="";for(let n=0;n<e.length;n++)t+=iT[e[n]];return t}function Lv(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Pf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var Dn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function kv(e){if(e>=Dn._0&&e<=Dn._9)return e-Dn._0;if(e>=Dn._A&&e<=Dn._F)return e-(Dn._A-10);if(e>=Dn._a&&e<=Dn._f)return e-(Dn._a-10)}function Hr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){let s=kv(e.charCodeAt(i)),a=kv(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function $e(e){return Pf($r(e))}function vc(e){return zo(e),Pf($r(Uint8Array.from(e).reverse()))}function Gt(e,t){return Hr(e.toString(16).padStart(t*2,"0"))}function bc(e,t){return Gt(e,t).reverse()}function sT(e){return Hr(Lv(e))}function Me(e,t,n){let r;if(typeof t=="string")try{r=Hr(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(nr(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function xn(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];zo(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}function aT(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function cT(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function uT(e){let t;for(t=0;e>Pv;e>>=wc,t+=1);return t}function lT(e,t){return e>>BigInt(t)&wc}function dT(e,t,n){return e|(n?wc:Pv)<<BigInt(t)}var zi=e=>(oT<<BigInt(e-1))-wc,Of=e=>new Uint8Array(e),Ov=e=>Uint8Array.from(e);function Lf(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Of(e),o=Of(e),i=0,s=()=>{r.fill(1),o.fill(0),i=0},a=(...d)=>n(o,r,...d),c=(d=Of())=>{o=a(Ov([0]),d),r=a(),d.length!==0&&(o=a(Ov([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<t;){r=a();let p=r.slice();h.push(p),d+=r.length}return xn(...h)};return(d,h)=>{s(),c(d);let p;for(;!(p=h(u()));)c();return s(),p}}var fT={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||nr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function rr(e,t,n={}){let r=(o,i,s)=>{let a=fT[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var Re=BigInt(0),Ee=BigInt(1),Gr=BigInt(2),hT=BigInt(3),Bf=BigInt(4),Fv=BigInt(5),Bv=BigInt(8),pT=BigInt(9),gT=BigInt(16);function Ne(e,t){let n=e%t;return n>=Re?n:t+n}function mT(e,t,n){if(n<=Re||t<Re)throw new Error("Expected power/modulo > 0");if(n===Ee)return Re;let r=Ee;for(;t>Re;)t&Ee&&(r=r*e%n),e=e*e%n,t>>=Ee;return r}function bt(e,t,n){let r=e;for(;t-- >Re;)r*=r,r%=n;return r}function Ec(e,t){if(e===Re||t<=Re)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Ne(e,t),r=t,o=Re,i=Ee,s=Ee,a=Re;for(;n!==Re;){let u=r/n,l=r%n,d=o-s*u,h=i-a*u;r=n,n=l,o=s,i=a,s=d,a=h}if(r!==Ee)throw new Error("invert: does not exist");return Ne(o,t)}function yT(e){let t=(e-Ee)/Gr,n,r,o;for(n=e-Ee,r=0;n%Gr===Re;n/=Gr,r++);for(o=Gr;o<e&&mT(o,t,e)!==e-Ee;o++);if(r===1){let s=(e+Ee)/Bf;return function(c,u){let l=c.pow(u,s);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}let i=(n+Ee)/Gr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,o),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let f=a.sqr(h);p<u&&!a.eql(f,a.ONE);p++)f=a.sqr(f);let y=a.pow(l,Ee<<BigInt(u-p-1));l=a.sqr(y),d=a.mul(d,y),h=a.mul(h,l),u=p}return d}}function wT(e){if(e%Bf===hT){let t=(e+Ee)/Bf;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%Bv===Fv){let t=(e-Fv)/Bv;return function(r,o){let i=r.mul(o,Gr),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,Gr),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return e%gT,yT(e)}var vT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vf(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vT.reduce((r,o)=>(r[o]="function",r),t);return rr(e,n)}function bT(e,t,n){if(n<Re)throw new Error("Expected power > 0");if(n===Re)return e.ONE;if(n===Ee)return t;let r=e.ONE,o=t;for(;n>Re;)n&Ee&&(r=e.mul(r,o)),o=e.sqr(o),n>>=Ee;return r}function ET(e,t){let n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function jf(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vv(e,t,n=!1,r={}){if(e<=Re)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=jf(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=wT(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:zi(o),ZERO:Re,ONE:Ee,create:c=>Ne(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Re<=c&&c<e},is0:c=>c===Re,isOdd:c=>(c&Ee)===Ee,neg:c=>Ne(-c,e),eql:(c,u)=>c===u,sqr:c=>Ne(c*c,e),add:(c,u)=>Ne(c+u,e),sub:(c,u)=>Ne(c-u,e),mul:(c,u)=>Ne(c*u,e),pow:(c,u)=>bT(a,c,u),div:(c,u)=>Ne(c*Ec(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Ec(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>ET(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?bc(c,i):Gt(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?vc(c):$e(c)}});return Object.freeze(a)}function jv(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Uf(e){let t=jv(e);return t+Math.ceil(t/2)}function Uv(e,t,n=!1){let r=e.length,o=jv(t),i=Uf(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let s=n?$e(e):vc(e),a=Ne(s,t-Ee)+Ee;return n?bc(a,o):Gt(a,o)}var xT=BigInt(0),$f=BigInt(1);function $v(e,t){let n=(o,i)=>{let s=i.negate();return o?s:i},r=o=>{let i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,a=o;for(;i>xT;)i&$f&&(s=s.add(a)),a=a.double(),i>>=$f;return s},precomputeWindow(o,i){let{windows:s,windowSize:a}=r(i),c=[],u=o,l=u;for(let d=0;d<s;d++){l=u,c.push(l);for(let h=1;h<a;h++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(o,i,s){let{windows:a,windowSize:c}=r(o),u=e.ZERO,l=e.BASE,d=BigInt(2**o-1),h=2**o,p=BigInt(o);for(let y=0;y<a;y++){let f=y*c,m=Number(s&d);s>>=p,m>c&&(m-=h,s+=$f);let g=f,w=f+Math.abs(m)-1,v=y%2!==0,E=m<0;m===0?l=l.add(n(v,i[g])):u=u.add(n(E,i[w]))}return{p:u,f:l}},wNAFCached(o,i,s,a){let c=o._WINDOW_SIZE||1,u=i.get(o);return u||(u=this.precomputeWindow(o,c),c!==1&&i.set(o,a(u))),this.wNAF(c,u,s)}}}function Hf(e){return Vf(e.Fp),rr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(V(T(T({},jf(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}function IT(e){let t=Hf(e);rr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(T({},t))}var{bytesToNumberBE:_T,hexToBytes:CT}=Ff,Wr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Wr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_T(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=Wr,n=typeof e=="string"?CT(e):e;zo(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Wr._parseInt(n.subarray(2)),{d:s,l:a}=Wr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{let l=u.toString(16);return l.length&1?`0${l}`:l},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},In=BigInt(0),Nt=BigInt(1),f2=BigInt(2),Hv=BigInt(3),h2=BigInt(4);function ST(e){let t=IT(e),{Fp:n}=t,r=t.toBytes||((y,f,m)=>{let g=f.toAffine();return xn(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),o=t.fromBytes||(y=>{let f=y.subarray(1),m=n.fromBytes(f.subarray(0,n.BYTES)),g=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:m,y:g}});function i(y){let{a:f,b:m}=t,g=n.sqr(y),w=n.mul(g,y);return n.add(n.add(w,n.mul(y,f)),m)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return typeof y=="bigint"&&In<y&&y<t.n}function a(y){if(!s(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){let{allowedPrivateKeyLengths:f,nByteLength:m,wrapPrivateKey:g,n:w}=t;if(f&&typeof y!="bigint"){if(nr(y)&&(y=$r(y)),typeof y!="string"||!f.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let v;try{v=typeof y=="bigint"?y:$e(Me("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return g&&(v=Ne(v,w)),a(v),v}let u=new Map;function l(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(f,m,g){if(this.px=f,this.py=m,this.pz=g,f==null||!n.isValid(f))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(f){let{x:m,y:g}=f||{};if(!f||!n.isValid(m)||!n.isValid(g))throw new Error("invalid affine point");if(f instanceof d)throw new Error("projective point not allowed");let w=v=>n.eql(v,n.ZERO);return w(m)&&w(g)?d.ZERO:new d(m,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let m=n.invertBatch(f.map(g=>g.pz));return f.map((g,w)=>g.toAffine(m[w])).map(d.fromAffine)}static fromHex(f){let m=d.fromAffine(o(Me("pointHex",f)));return m.assertValidity(),m}static fromPrivateKey(f){return d.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:f,y:m}=this.toAffine();if(!n.isValid(f)||!n.isValid(m))throw new Error("bad point: x or y not FE");let g=n.sqr(m),w=i(f);if(!n.eql(g,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){l(f);let{px:m,py:g,pz:w}=this,{px:v,py:E,pz:D}=f,b=n.eql(n.mul(m,D),n.mul(v,w)),I=n.eql(n.mul(g,D),n.mul(E,w));return b&&I}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b:m}=t,g=n.mul(m,Hv),{px:w,py:v,pz:E}=this,D=n.ZERO,b=n.ZERO,I=n.ZERO,_=n.mul(w,w),B=n.mul(v,v),N=n.mul(E,E),S=n.mul(w,v);return S=n.add(S,S),I=n.mul(w,E),I=n.add(I,I),D=n.mul(f,I),b=n.mul(g,N),b=n.add(D,b),D=n.sub(B,b),b=n.add(B,b),b=n.mul(D,b),D=n.mul(S,D),I=n.mul(g,I),N=n.mul(f,N),S=n.sub(_,N),S=n.mul(f,S),S=n.add(S,I),I=n.add(_,_),_=n.add(I,_),_=n.add(_,N),_=n.mul(_,S),b=n.add(b,_),N=n.mul(v,E),N=n.add(N,N),_=n.mul(N,S),D=n.sub(D,_),I=n.mul(N,B),I=n.add(I,I),I=n.add(I,I),new d(D,b,I)}add(f){l(f);let{px:m,py:g,pz:w}=this,{px:v,py:E,pz:D}=f,b=n.ZERO,I=n.ZERO,_=n.ZERO,B=t.a,N=n.mul(t.b,Hv),S=n.mul(m,v),G=n.mul(g,E),L=n.mul(w,D),M=n.add(m,g),x=n.add(v,E);M=n.mul(M,x),x=n.add(S,G),M=n.sub(M,x),x=n.add(m,w);let C=n.add(v,D);return x=n.mul(x,C),C=n.add(S,L),x=n.sub(x,C),C=n.add(g,w),b=n.add(E,D),C=n.mul(C,b),b=n.add(G,L),C=n.sub(C,b),_=n.mul(B,x),b=n.mul(N,L),_=n.add(b,_),b=n.sub(G,_),_=n.add(G,_),I=n.mul(b,_),G=n.add(S,S),G=n.add(G,S),L=n.mul(B,L),x=n.mul(N,x),G=n.add(G,L),L=n.sub(S,L),L=n.mul(B,L),x=n.add(x,L),S=n.mul(G,x),I=n.add(I,S),S=n.mul(C,x),b=n.mul(M,b),b=n.sub(b,S),S=n.mul(M,G),_=n.mul(C,_),_=n.add(_,S),new d(b,I,_)}subtract(f){return this.add(f.negate())}is0(){return this.equals(d.ZERO)}wNAF(f){return p.wNAFCached(this,u,f,m=>{let g=n.invertBatch(m.map(w=>w.pz));return m.map((w,v)=>w.toAffine(g[v])).map(d.fromAffine)})}multiplyUnsafe(f){let m=d.ZERO;if(f===In)return m;if(a(f),f===Nt)return this;let{endo:g}=t;if(!g)return p.unsafeLadder(this,f);let{k1neg:w,k1:v,k2neg:E,k2:D}=g.splitScalar(f),b=m,I=m,_=this;for(;v>In||D>In;)v&Nt&&(b=b.add(_)),D&Nt&&(I=I.add(_)),_=_.double(),v>>=Nt,D>>=Nt;return w&&(b=b.negate()),E&&(I=I.negate()),I=new d(n.mul(I.px,g.beta),I.py,I.pz),b.add(I)}multiply(f){a(f);let m=f,g,w,{endo:v}=t;if(v){let{k1neg:E,k1:D,k2neg:b,k2:I}=v.splitScalar(m),{p:_,f:B}=this.wNAF(D),{p:N,f:S}=this.wNAF(I);_=p.constTimeNegate(E,_),N=p.constTimeNegate(b,N),N=new d(n.mul(N.px,v.beta),N.py,N.pz),g=_.add(N),w=B.add(S)}else{let{p:E,f:D}=this.wNAF(m);g=E,w=D}return d.normalizeZ([g,w])[0]}multiplyAndAddUnsafe(f,m,g){let w=d.BASE,v=(D,b)=>b===In||b===Nt||!D.equals(w)?D.multiplyUnsafe(b):D.multiply(b),E=v(this,m).add(v(f,g));return E.is0()?void 0:E}toAffine(f){let{px:m,py:g,pz:w}=this,v=this.is0();f==null&&(f=v?n.ONE:n.inv(w));let E=n.mul(m,f),D=n.mul(g,f),b=n.mul(w,f);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(b,n.ONE))throw new Error("invZ was invalid");return{x:E,y:D}}isTorsionFree(){let{h:f,isTorsionFree:m}=t;if(f===Nt)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:m}=t;return f===Nt?this:m?m(d,this):this.multiplyUnsafe(t.h)}toRawBytes(f=!0){return this.assertValidity(),r(d,this,f)}toHex(f=!0){return $r(this.toRawBytes(f))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);let h=t.nBitLength,p=$v(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}function TT(e){let t=Hf(e);return rr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(T({lowS:!0},t))}function Gv(e){let t=TT(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(x){return In<x&&x<n.ORDER}function a(x){return Ne(x,r)}function c(x){return Ec(x,r)}let{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:h}=ST(V(T({},t),{toBytes(x,C,R){let P=C.toAffine(),U=n.toBytes(P.x),Y=xn;return R?Y(Uint8Array.from([C.hasEvenY()?2:3]),U):Y(Uint8Array.from([4]),U,n.toBytes(P.y))},fromBytes(x){let C=x.length,R=x[0],P=x.subarray(1);if(C===o&&(R===2||R===3)){let U=$e(P);if(!s(U))throw new Error("Point is not on curve");let Y=d(U),X;try{X=n.sqrt(Y)}catch(ve){let ot=ve instanceof Error?": "+ve.message:"";throw new Error("Point is not on curve"+ot)}let ne=(X&Nt)===Nt;return(R&1)===1!==ne&&(X=n.neg(X)),{x:U,y:X}}else if(C===i&&R===4){let U=n.fromBytes(P.subarray(0,n.BYTES)),Y=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:U,y:Y}}else throw new Error(`Point of length ${C} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}})),p=x=>$r(Gt(x,t.nByteLength));function y(x){let C=r>>Nt;return x>C}function f(x){return y(x)?a(-x):x}let m=(x,C,R)=>$e(x.slice(C,R));class g{constructor(C,R,P){this.r=C,this.s=R,this.recovery=P,this.assertValidity()}static fromCompact(C){let R=t.nByteLength;return C=Me("compactSignature",C,R*2),new g(m(C,0,R),m(C,R,2*R))}static fromDER(C){let{r:R,s:P}=Wr.toSig(Me("DER",C));return new g(R,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(C){return new g(this.r,this.s,C)}recoverPublicKey(C){let{r:R,s:P,recovery:U}=this,Y=I(Me("msgHash",C));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");let X=U===2||U===3?R+t.n:R;if(X>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let ne=U&1?"03":"02",ye=u.fromHex(ne+p(X)),ve=c(X),ot=a(-Y*ve),it=a(P*ve),It=u.BASE.multiplyAndAddUnsafe(ye,ot,it);if(!It)throw new Error("point at infinify");return It.assertValidity(),It}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Hr(this.toDERHex())}toDERHex(){return Wr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Hr(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let x=Uf(t.n);return Uv(t.randomBytes(x),t.n)},precompute(x=8,C=u.BASE){return C._setWindowSize(x),C.multiply(BigInt(3)),C}};function v(x,C=!0){return u.fromPrivateKey(x).toRawBytes(C)}function E(x){let C=nr(x),R=typeof x=="string",P=(C||R)&&x.length;return C?P===o||P===i:R?P===2*o||P===2*i:x instanceof u}function D(x,C,R=!0){if(E(x))throw new Error("first arg must be private key");if(!E(C))throw new Error("second arg must be public key");return u.fromHex(C).multiply(l(x)).toRawBytes(R)}let b=t.bits2int||function(x){let C=$e(x),R=x.length*8-t.nBitLength;return R>0?C>>BigInt(R):C},I=t.bits2int_modN||function(x){return a(b(x))},_=zi(t.nBitLength);function B(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(In<=x&&x<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Gt(x,t.nByteLength)}function N(x,C,R=S){if(["recovered","canonical"].some(st=>st in R))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:U}=t,{lowS:Y,prehash:X,extraEntropy:ne}=R;Y==null&&(Y=!0),x=Me("msgHash",x),X&&(x=Me("prehashed msgHash",P(x)));let ye=I(x),ve=l(C),ot=[B(ve),B(ye)];if(ne!=null&&ne!==!1){let st=ne===!0?U(n.BYTES):ne;ot.push(Me("extraEntropy",st))}let it=xn(...ot),It=ye;function kt(st){let an=b(st);if(!h(an))return;let ft=c(an),Ue=u.BASE.multiply(an).toAffine(),Ot=a(Ue.x);if(Ot===In)return;let gr=a(ft*a(It+Ot*ve));if(gr===In)return;let di=(Ue.x===Ot?0:2)|Number(Ue.y&Nt),Dp=gr;return Y&&y(gr)&&(Dp=f(gr),di^=1),new g(Ot,Dp,di)}return{seed:it,k2sig:kt}}let S={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function L(x,C,R=S){let{seed:P,k2sig:U}=N(x,C,R),Y=t;return Lf(Y.hash.outputLen,Y.nByteLength,Y.hmac)(P,U)}u.BASE._setWindowSize(8);function M(x,C,R,P=G){let U=x;if(C=Me("msgHash",C),R=Me("publicKey",R),"strict"in P)throw new Error("options.strict was renamed to lowS");let{lowS:Y,prehash:X}=P,ne,ye;try{if(typeof U=="string"||nr(U))try{ne=g.fromDER(U)}catch(Ue){if(!(Ue instanceof Wr.Err))throw Ue;ne=g.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){let{r:Ue,s:Ot}=U;ne=new g(Ue,Ot)}else throw new Error("PARSE");ye=u.fromHex(R)}catch(Ue){if(Ue.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&ne.hasHighS())return!1;X&&(C=t.hash(C));let{r:ve,s:ot}=ne,it=I(C),It=c(ot),kt=a(it*It),st=a(ve*It),an=u.BASE.multiplyAndAddUnsafe(ye,kt,st)?.toAffine();return an?a(an.x)===ve:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:D,sign:L,verify:M,ProjectivePoint:u,Signature:g,utils:w}}function AT(e){return{hash:e,hmac:(t,...n)=>Ui(e,t,ec(...n)),randomBytes:Bo}}function Wv(e,t){let n=r=>Gv(T(T({},e),AT(r)));return Object.freeze(V(T({},n(t)),{create:n}))}var _c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Dc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Kv=BigInt(1),xc=BigInt(2),zv=(e,t)=>(e+t/xc)/t;function Yv(e){let t=_c,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=bt(l,n,t)*l%t,h=bt(d,n,t)*l%t,p=bt(h,xc,t)*u%t,y=bt(p,o,t)*p%t,f=bt(y,i,t)*y%t,m=bt(f,a,t)*f%t,g=bt(m,c,t)*m%t,w=bt(g,a,t)*f%t,v=bt(w,n,t)*l%t,E=bt(v,s,t)*y%t,D=bt(E,r,t)*u%t,b=bt(D,xc,t);if(!Wf.eql(Wf.sqr(b),e))throw new Error("Cannot find square root");return b}var Wf=Vv(_c,void 0,void 0,{sqrt:Yv}),_n=Wv({a:BigInt(0),b:BigInt(7),Fp:Wf,n:Dc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Dc,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Kv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=zv(i*e,t),c=zv(-r*e,t),u=Ne(e-a*n-c*o,t),l=Ne(-a*r-c*i,t),d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},De),Cc=BigInt(0),Zv=e=>typeof e=="bigint"&&Cc<e&&e<_c,MT=e=>typeof e=="bigint"&&Cc<e&&e<Dc,qv={};function Ic(e,...t){let n=qv[e];if(n===void 0){let r=De(Uint8Array.from(e,o=>o.charCodeAt(0)));n=xn(r,r),qv[e]=n}return De(xn(n,...t))}var Kf=e=>e.toRawBytes(!0).slice(1),zf=e=>Gt(e,32),Gf=e=>Ne(e,_c),qi=e=>Ne(e,Dc),Yf=_n.ProjectivePoint,NT=(e,t,n)=>Yf.BASE.multiplyAndAddUnsafe(e,t,n);function qf(e){let t=_n.utils.normPrivateKeyToScalar(e),n=Yf.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:qi(-t),bytes:Kf(n)}}function Qv(e){if(!Zv(e))throw new Error("bad x: need 0 < x < p");let t=Gf(e*e),n=Gf(t*e+BigInt(7)),r=Yv(n);r%xc!==Cc&&(r=Gf(-r));let o=new Yf(e,r,Kv);return o.assertValidity(),o}function Xv(...e){return qi($e(Ic("BIP0340/challenge",...e)))}function RT(e){return qf(e).bytes}function kT(e,t,n=Bo(32)){let r=Me("message",e),{bytes:o,scalar:i}=qf(t),s=Me("auxRand",n,32),a=zf(i^$e(Ic("BIP0340/aux",s))),c=Ic("BIP0340/nonce",a,o,r),u=qi($e(c));if(u===Cc)throw new Error("sign failed: k is zero");let{bytes:l,scalar:d}=qf(u),h=Xv(l,o,r),p=new Uint8Array(64);if(p.set(l,0),p.set(zf(qi(d+h*i)),32),!Jv(p,r,o))throw new Error("sign: Invalid signature produced");return p}function Jv(e,t,n){let r=Me("signature",e,64),o=Me("message",t),i=Me("publicKey",n,32);try{let s=Qv($e(i)),a=$e(r.subarray(0,32));if(!Zv(a))return!1;let c=$e(r.subarray(32,64));if(!MT(c))return!1;let u=Xv(zf(a),Kf(s),o),l=NT(s,c,qi(-u));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}var nn={getPublicKey:RT,sign:kT,verify:Jv,utils:{randomPrivateKey:_n.utils.randomPrivateKey,lift_x:Qv,pointToBytes:Kf,numberToBytesBE:Gt,bytesToNumberBE:$e,taggedHash:Ic,mod:Ne}};var Tc=_n.ProjectivePoint,Sc=_n.CURVE.n,{isBytes:oe,concatBytes:Rt,equalBytes:we}=gv;var zr=e=>Rv(De(e)),Cn=(...e)=>De(De(Rt(...e))),t0=nn.utils.randomPrivateKey,qr=nn.getPublicKey,Ac=_n.getPublicKey,e0=e=>e.r<Sc/2n;function n0(e,t,n=!1){let r=_n.sign(e,t);if(n&&!e0(r)){let o=new Uint8Array(32),i=0;for(;!e0(r);)if(o.set(re.encode(i++)),r=_n.sign(e,t,{extraEntropy:o}),i>4294967295)throw new Error("lowR counter overflow: report the error")}return r.toDERRawBytes()}var Zf=nn.sign,Ki=nn.utils.taggedHash,Ve=function(e){return e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr",e}(Ve||{});function or(e,t){let n=e.length;if(t===Ve.ecdsa){if(n===32)throw new Error("Expected non-Schnorr key");return Tc.fromHex(e),e}else if(t===Ve.schnorr){if(n!==32)throw new Error("Expected 32-byte Schnorr key");return nn.utils.lift_x(nn.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function r0(e,t){let n=nn.utils,r=n.taggedHash("TapTweak",e,t),o=n.bytesToNumberBE(r);if(o>=Sc)throw new Error("tweak higher than curve order");return o}function o0(e,t=new Uint8Array){let n=nn.utils,r=n.bytesToNumberBE(e),o=Tc.fromPrivateKey(r),i=o.hasEvenY()?r:n.mod(-r,Sc),s=n.pointToBytes(o),a=r0(s,t);return n.numberToBytesBE(n.mod(i+a,Sc),32)}function qo(e,t){let n=nn.utils,r=r0(e,t),i=n.lift_x(n.bytesToNumberBE(e)).add(Tc.fromPrivateKey(r)),s=i.hasEvenY()?0:1;return[n.pointToBytes(i),s]}var Mc=De(Tc.BASE.toRawBytes(!1)),Wt={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};function ir(e,t){if(!oe(e)||!oe(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)if(e[r]!=t[r])return Math.sign(e[r]-t[r]);return Math.sign(e.length-t.length)}var je=function(e){return e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID",e}(je||{});function c0(e=6,t=!1){return Ke({encodeStream:(n,r)=>{if(r===0n)return;let o=r<0,i=BigInt(r),s=[];for(let a=o?-i:i;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(o?128:0):o&&(s[s.length-1]|=128),n.bytes(new Uint8Array(s))},decodeStream:n=>{let r=n.leftBytes;if(r>e)throw new Error(`ScriptNum: number (${r}) bigger than limit=${e}`);if(r===0)return 0n;if(t){let s=n.bytes(r,!0);if(!(s[s.length-1]&127)&&(r<=1||!(s[s.length-2]&128)))throw new Error("Non-minimally encoded ScriptNum")}let o=0,i=0n;for(let s=0;s<r;++s)o=n.byte(),i|=BigInt(o)<<8n*BigInt(s);return o>=128&&(i&=2n**BigInt(r*8)-1n>>1n,i=-i),i}})}function u0(e,t=4,n=!0){if(typeof e=="number")return e;if(oe(e))try{let r=c0(t,n).decode(e);return r>Number.MAX_SAFE_INTEGER?void 0:Number(r)}catch{return}}var xe=Ke({encodeStream:(e,t)=>{for(let n of t){if(typeof n=="string"){if(je[n]===void 0)throw new Error(`Unknown opcode=${n}`);e.byte(je[n]);continue}else if(typeof n=="number"){if(n===0){e.byte(0);continue}else if(1<=n&&n<=16){e.byte(je.OP_1-1+n);continue}}if(typeof n=="number"&&(n=c0().encode(BigInt(n))),!oe(n))throw new Error(`Wrong Script OP=${n} (${typeof n})`);let r=n.length;r<je.PUSHDATA1?e.byte(r):r<=255?(e.byte(je.PUSHDATA1),e.byte(r)):r<=65535?(e.byte(je.PUSHDATA2),e.bytes(Mf.encode(r))):(e.byte(je.PUSHDATA4),e.bytes(re.encode(r))),e.bytes(n)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let n=e.byte();if(je.OP_0<n&&n<=je.PUSHDATA4){let r;if(n<je.PUSHDATA1)r=n;else if(n===je.PUSHDATA1)r=Ht.decodeStream(e);else if(n===je.PUSHDATA2)r=Mf.decodeStream(e);else if(n===je.PUSHDATA4)r=re.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(r))}else if(n===0)t.push(0);else if(je.OP_1<=n&&n<=je.OP_16)t.push(n-(je.OP_1-1));else{let r=je[n];if(r===void 0)throw new Error(`Unknown opcode=${n.toString(16)}`);t.push(r)}}return t}}),s0={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},Yi=Ke({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[n,r,o,i]of Object.values(s0))if(!(o>t||t>i)){e.byte(n);for(let s=0;s<r;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[n,r,o]=s0[t],i=0n;for(let s=0;s<r;s++)i|=BigInt(e.byte())<<8n*BigInt(s);if(i<o)throw e.err(`Wrong CompactSize(${8*r})`);return i}}),dt=$t(Yi,En.numberBigint),tt=he(Yi),Ko=Ye(dt,tt),a0=e=>Ye(Yi,e),OT=Be({txid:he(32,!0),index:re,finalScriptSig:tt,sequence:re}),sr=Be({amount:Wo,script:tt}),PT=Be({version:Ur,segwitFlag:_v(new Uint8Array([0,1])),inputs:a0(OT),outputs:a0(sr),witnesses:Cv("segwitFlag",Ye("inputs/length",Ko)),lockTime:re});function LT(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var Et=qe(PT,LT);function Zi(e){if(e.nonWitnessUtxo){if(e.index===void 0)throw new Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}else{if(e.witnessUtxo)return e.witnessUtxo;throw new Error("Cannot find previous output info")}}function Qf(e,t,n,r=!1){let{nonWitnessUtxo:o,txid:i}=e;typeof o=="string"&&(o=ce.decode(o)),oe(o)&&(o=Et.decode(o)),!("nonWitnessUtxo"in e)&&o===void 0&&(o=t?.nonWitnessUtxo),typeof i=="string"&&(i=ce.decode(i)),i===void 0&&(i=t?.txid);let s=V(T(T({},t),e),{nonWitnessUtxo:o,txid:i});!("nonWitnessUtxo"in e)&&s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=Xf),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=Ji(Yo,s,t,n),Rc.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!r&&es(a&&a.script,s.redeemScript,s.witnessScript),s}function Nc(e,t=!1){let n="legacy",r=ge.ALL,o=Zi(e),i=Ie.decode(o.script),s=i.type,a=i,c=[i];if(i.type==="tr")return r=ge.DEFAULT,{txType:"taproot",type:"tr",last:i,lastScript:o.script,defaultSighash:r,sighash:e.sighashType||r};{if((i.type==="wpkh"||i.type==="wsh")&&(n="segwit"),i.type==="sh"){if(!e.redeemScript)throw new Error("inputType: sh without redeemScript");let h=Ie.decode(e.redeemScript);(h.type==="wpkh"||h.type==="wsh")&&(n="segwit"),c.push(h),a=h,s+=`-${h.type}`}if(a.type==="wsh"){if(!e.witnessScript)throw new Error("inputType: wsh without witnessScript");let h=Ie.decode(e.witnessScript);h.type==="wsh"&&(n="segwit"),c.push(h),a=h,s+=`-${h.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let l=Ie.encode(u),d={type:s,txType:n,last:u,lastScript:l,defaultSighash:r,sighash:e.sighashType||r};if(n==="legacy"&&!t&&!e.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return d}}var l0=e=>Math.ceil(e/4);var kc=new Uint8Array(32),FT={amount:0xffffffffffffffffn,script:fe},BT=8,VT=2,Kr=0,Xf=4294967295,W2=En.decimal(BT),ts=(e,t)=>e===void 0?t:e;function Oc(e){if(Array.isArray(e))return e.map(t=>Oc(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Oc(n)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var ge=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e}(ge||{}),h0=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY",e}(h0||{});function jT(e,t,n,r=fe){return we(n,t)&&(e=o0(e,r),t=qr(e)),{privKey:e,pubKey:t}}function Qo(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function Qi(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:ts(e.sequence,Xf),finalScriptSig:ts(e.finalScriptSig,fe)}}function Jf(e){for(let t in e){let n=t;p0.includes(n)||delete e[n]}}var eh=Be({txid:he(32,!0),index:re});function UT(e){if(typeof e!="number"||typeof h0[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function f0(e){let t=e&31;return{isAny:!!(e&ge.ANYONECANPAY),isNone:t===ge.NONE,isSingle:t===ge.SINGLE}}function $T(e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t=V(T({},e),{version:ts(e.version,VT),lockTime:ts(e.lockTime,0),PSBTVersion:ts(e.PSBTVersion,0)});if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(re.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let n of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[n];if(r!==void 0&&typeof r!="boolean")throw new Error(`Transation options wrong type: ${n}=${r} (${typeof r})`)}if(t.customScripts!==void 0){let n=t.customScripts;if(!Array.isArray(n))throw new Error(`wrong custom scripts type (expected array): customScripts=${n} (${typeof n})`);for(let r of n){if(typeof r.encode!="function"||typeof r.decode!="function")throw new Error(`wrong script=${r} (${typeof r})`);if(r.finalizeTaproot!==void 0&&typeof r.finalizeTaproot!="function")throw new Error(`wrong script=${r} (${typeof r})`)}}return Object.freeze(t)}var Xi=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let n=this.opts=$T(t);n.lockTime!==Kr&&(this.global.fallbackLocktime=n.lockTime),this.global.txVersion=n.version}static fromRaw(t,n={}){let r=Et.decode(t),o=new e(V(T({},n),{version:r.version,lockTime:r.lockTime}));for(let i of r.outputs)o.addOutput(i);if(o.outputs=r.outputs,o.inputs=r.inputs,r.witnesses)for(let i=0;i<r.witnesses.length;i++)o.inputs[i].finalScriptWitness=r.witnesses[i];return o}static fromPSBT(t,n={}){let r;try{r=nh.decode(t)}catch(d){try{r=rh.decode(t)}catch{throw d}}let o=r.global.version||0;if(o!==0&&o!==2)throw new Error(`Wrong PSBT version=${o}`);let i=r.global.unsignedTx,s=o===0?i?.version:r.global.txVersion,a=o===0?i?.lockTime:r.global.fallbackLocktime,c=new e(V(T({},n),{version:s,lockTime:a,PSBTVersion:o})),u=o===0?i?.inputs.length:r.global.inputCount;c.inputs=r.inputs.slice(0,u).map((d,h)=>T(T({finalScriptSig:fe},r.global.unsignedTx?.inputs[h]),d));let l=o===0?i?.outputs.length:r.global.outputCount;return c.outputs=r.outputs.slice(0,l).map((d,h)=>T(T({},d),r.global.unsignedTx?.outputs[h])),c.global=V(T({},r.global),{txVersion:s}),a!==Kr&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let n=this.inputs.map(i=>th(t,Yo,i));for(let i of n)i.partialSig&&!i.partialSig.length&&delete i.partialSig,i.finalScriptSig&&!i.finalScriptSig.length&&delete i.finalScriptSig,i.finalScriptWitness&&!i.finalScriptWitness.length&&delete i.finalScriptWitness;let r=this.outputs.map(i=>th(t,ns,i)),o=T({},this.global);return t===0?(o.unsignedTx=Et.decode(this.unsignedTx),delete o.fallbackLocktime,delete o.txVersion):(o.version=t,o.txVersion=this.version,o.inputCount=this.inputs.length,o.outputCount=this.outputs.length,o.fallbackLocktime&&o.fallbackLocktime===Kr&&delete o.fallbackLocktime),this.opts.bip174jsCompat&&(n.length||n.push({}),r.length||r.push({})),(t===0?nh:rh).encode({global:o,inputs:n,outputs:r})}get lockTime(){let t=Kr,n=0,r=Kr,o=0;for(let i of this.inputs)i.requiredHeightLocktime&&(t=Math.max(t,i.requiredHeightLocktime),n++),i.requiredTimeLocktime&&(r=Math.max(r,i.requiredTimeLocktime),o++);return n&&n>=o?t:r!==Kr?r:this.global.fallbackLocktime||Kr}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let n=this.inputs[t];return n.finalScriptSig&&n.finalScriptSig.length||n.finalScriptWitness&&n.finalScriptWitness.length?"finalized":n.tapKeySig||n.tapScriptSig&&n.tapScriptSig.length||n.partialSig&&n.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let n=Nc(this.inputs[t],this.opts.allowLegacyWitnessUtxo).sighash,r=n===ge.DEFAULT?ge.ALL:n&3;return{sigInputs:n&ge.ANYONECANPAY,sigOutputs:r}}signStatus(){let t=!0,n=!0,r=[],o=[];for(let i=0;i<this.inputs.length;i++){if(this.inputStatus(i)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(i);if(a===ge.ANYONECANPAY?r.push(i):t=!1,c===ge.ALL)n=!1;else if(c===ge.SINGLE)o.push(i);else if(c!==ge.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:n,inputs:r,outputs:o}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let n of this.inputs)n.finalScriptWitness&&n.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,n=this.outputs.map(Qo);t+=4*dt.encode(this.outputs.length).length;for(let r of n)t+=32+4*tt.encode(r.script).length;this.hasWitnesses&&(t+=2),t+=4*dt.encode(this.inputs.length).length;for(let r of this.inputs)t+=160+4*tt.encode(r.finalScriptSig||fe).length,this.hasWitnesses&&r.finalScriptWitness&&(t+=Ko.encode(r.finalScriptWitness).length);return t}get vsize(){return l0(this.weight)}toBytes(t=!1,n=!1){return Et.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(Qi).map(r=>V(T({},r),{finalScriptSig:t&&r.finalScriptSig||fe})),outputs:this.outputs.map(Qo),witnesses:this.inputs.map(r=>r.finalScriptWitness||[]),segwitFlag:n&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return ce.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ce.encode(Cn(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ce.encode(Cn(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),Oc(this.inputs[t])}get inputsLength(){return this.inputs.length}addInput(t,n=!1){if(!n&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(Qf(t,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(t,n,r=!1){this.checkInputIdx(t);let o;if(!r){let i=this.signStatus();(!i.addInput||i.inputs.includes(t))&&(o=g0)}this.inputs[t]=Qf(n,this.inputs[t],o,this.opts.disableScriptCheck)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),Oc(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,n,r){let{amount:o,script:i}=t;if(o===void 0&&(o=n?.amount),typeof o!="bigint")throw new Error("amount must be bigint sats");typeof i=="string"&&(i=ce.decode(i)),i===void 0&&(i=n?.script);let s=V(T(T({},n),t),{amount:o,script:i});if(s.amount===void 0&&delete s.amount,s=Ji(ns,s,n,r),Lc.encode(s),s.script&&!this.opts.allowUnknownOutputs&&Ie.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||es(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,n=!1){if(!n&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,n,r=!1){this.checkOutputIdx(t);let o;if(!r){let i=this.signStatus();(!i.addOutput||i.outputs.includes(t))&&(o=m0)}this.outputs[t]=this.normalizeOutput(n,this.outputs[t],o)}addOutputAddress(t,n,r=Wt){return this.addOutput({script:Ie.encode(ar(r).decode(t)),amount:n})}get fee(){let t=0n;for(let r of this.inputs){let o=Zi(r);if(!o)throw new Error("Empty input amount");t+=o.amount}let n=this.outputs.map(Qo);for(let r of n)t-=r.amount;return t}preimageLegacy(t,n,r){let{isAny:o,isNone:i,isSingle:s}=f0(r);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return bv.encode(1n);n=xe.encode(xe.decode(n).filter(l=>l!=="CODESEPARATOR"));let a=this.inputs.map(Qi).map((l,d)=>V(T({},l),{finalScriptSig:d===t?n:fe}));o?a=[a[t]]:(i||s)&&(a=a.map((l,d)=>V(T({},l),{sequence:d===t?l.sequence:0})));let c=this.outputs.map(Qo);i?c=[]:s&&(c=c.slice(0,t).fill(FT).concat([c[t]]));let u=Et.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return Cn(u,Ur.encode(r))}preimageWitnessV0(t,n,r,o){let{isAny:i,isNone:s,isSingle:a}=f0(r),c=kc,u=kc,l=kc,d=this.inputs.map(Qi),h=this.outputs.map(Qo);i||(c=Cn(...d.map(eh.encode))),!i&&!a&&!s&&(u=Cn(...d.map(y=>re.encode(y.sequence)))),!a&&!s?l=Cn(...h.map(sr.encode)):a&&t<h.length&&(l=Cn(sr.encode(h[t])));let p=d[t];return Cn(Ur.encode(this.version),c,u,he(32,!0).encode(p.txid),re.encode(p.index),tt.encode(n),Wo.encode(o),re.encode(p.sequence),l,re.encode(this.lockTime),re.encode(r))}preimageWitnessV1(t,n,r,o,i=-1,s,a=192,c){if(!Array.isArray(o)||this.inputs.length!==o.length)throw new Error(`Invalid amounts array=${o}`);if(!Array.isArray(n)||this.inputs.length!==n.length)throw new Error(`Invalid prevOutScript array=${n}`);let u=[Ht.encode(0),Ht.encode(r),Ur.encode(this.version),re.encode(this.lockTime)],l=r===ge.DEFAULT?ge.ALL:r&3,d=r&ge.ANYONECANPAY,h=this.inputs.map(Qi),p=this.outputs.map(Qo);d!==ge.ANYONECANPAY&&u.push(...[h.map(eh.encode),o.map(Wo.encode),n.map(tt.encode),h.map(f=>re.encode(f.sequence))].map(f=>De(Rt(...f)))),l===ge.ALL&&u.push(De(Rt(...p.map(sr.encode))));let y=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([y])),d===ge.ANYONECANPAY){let f=h[t];u.push(eh.encode(f),Wo.encode(o[t]),tt.encode(n[t]),re.encode(f.sequence))}else u.push(re.encode(t));return y&1&&u.push(De(tt.encode(c||fe))),l===ge.SINGLE&&u.push(t<p.length?De(sr.encode(p[t])):kc),s&&u.push(Zo(s,a),Ht.encode(0),Ur.encode(i)),Ki("TapSighash",...u)}signIdx(t,n,r,o){this.checkInputIdx(n);let i=this.inputs[n],s=Nc(i,this.opts.allowLegacyWitnessUtxo);if(!oe(t)){if(!i.bip32Derivation||!i.bip32Derivation.length)throw new Error("bip32Derivation: empty");let l=i.bip32Derivation.filter(h=>h[1].fingerprint==t.fingerprint).map(([h,{path:p}])=>{let y=t;for(let f of p)y=y.deriveChild(f);if(!we(y.publicKey,h))throw new Error("bip32Derivation: wrong pubKey");if(!y.privateKey)throw new Error("bip32Derivation: no privateKey");return y});if(!l.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let d=!1;for(let h of l)this.signIdx(h.privateKey,n)&&(d=!0);return d}r?r.forEach(UT):r=[s.defaultSighash];let a=s.sighash;if(!r.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${r.join(", ")}`);let{sigOutputs:c}=this.inputSighash(n);if(c===ge.SINGLE&&n>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${n}`);let u=Zi(i);if(s.txType==="taproot"){if(i.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let l=this.inputs.map(Zi),d=l.map(m=>m.script),h=l.map(m=>m.amount),p=!1,y=qr(t),f=i.tapMerkleRoot||fe;if(i.tapInternalKey){let{pubKey:m,privKey:g}=jT(t,y,i.tapInternalKey,f),[w,v]=qo(i.tapInternalKey,f);if(we(w,m)){let E=this.preimageWitnessV1(n,d,a,h),D=Rt(Zf(E,g,o),a!==ge.DEFAULT?new Uint8Array([a]):fe);this.updateInput(n,{tapKeySig:D},!0),p=!0}}if(i.tapLeafScript){i.tapScriptSig=i.tapScriptSig||[];for(let[m,g]of i.tapLeafScript){let w=g.subarray(0,-1),v=xe.decode(w),E=g[g.length-1],D=Zo(w,E);if(v.findIndex(B=>oe(B)&&we(B,y))===-1)continue;let I=this.preimageWitnessV1(n,d,a,h,void 0,w,E),_=Rt(Zf(I,t,o),a!==ge.DEFAULT?new Uint8Array([a]):fe);this.updateInput(n,{tapScriptSig:[[{pubKey:y,leafHash:D},_]]},!0),p=!0}}if(!p)throw new Error("No taproot scripts signed");return!0}else{let l=Ac(t),d=!1,h=zr(l);for(let f of xe.decode(s.lastScript))oe(f)&&(we(f,l)||we(f,h))&&(d=!0);if(!d)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let p;if(s.txType==="legacy")p=this.preimageLegacy(n,s.lastScript,a);else if(s.txType==="segwit"){let f=s.lastScript;s.last.type==="wpkh"&&(f=Ie.encode({type:"pkh",hash:s.last.hash})),p=this.preimageWitnessV0(n,f,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let y=n0(p,t,this.opts.lowR);this.updateInput(n,{partialSig:[[l,Rt(y,new Uint8Array([a]))]]},!0)}return!0}sign(t,n,r){let o=0;for(let i=0;i<this.inputs.length;i++)try{this.signIdx(t,i,n,r)&&o++}catch{}if(!o)throw new Error("No inputs signed");return o}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let n=this.inputs[t],r=Nc(n,this.opts.allowLegacyWitnessUtxo);if(r.txType==="taproot"){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else if(n.tapLeafScript&&n.tapScriptSig){let c=n.tapLeafScript.sort((u,l)=>rn.encode(u[0]).length-rn.encode(l[0]).length);for(let[u,l]of c){let d=l.slice(0,-1),h=l[l.length-1],p=Ie.decode(d),y=Zo(d,h),f=n.tapScriptSig.filter(g=>we(g[0].leafHash,y)),m=[];if(p.type==="tr_ms"){let g=p.m,w=p.pubkeys,v=0;for(let E of w){let D=f.findIndex(b=>we(b[0].pubKey,E));if(v===g||D===-1){m.push(fe);continue}m.push(f[D][1]),v++}if(v!==g)continue}else if(p.type==="tr_ns"){for(let g of p.pubkeys){let w=f.findIndex(v=>we(v[0].pubKey,g));w!==-1&&m.push(f[w][1])}if(m.length!==p.pubkeys.length)continue}else if(p.type==="unknown"&&this.opts.allowUnknownInputs){let g=xe.decode(d);if(m=f.map(([{pubKey:w},v])=>{let E=g.findIndex(D=>oe(D)&&we(D,w));if(E===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:v,pos:E}}).sort((w,v)=>w.pos-v.pos).map(w=>w.signature),!m.length)continue}else{let g=this.opts.customScripts;if(g)for(let w of g){if(!w.finalizeTaproot)continue;let v=xe.decode(d),E=w.encode(v);if(E===void 0)continue;let D=w.finalizeTaproot(d,E,f);if(D){n.finalScriptWitness=D.concat(rn.encode(u)),n.finalScriptSig=fe,Jf(n);return}}throw new Error("Finalize: Unknown tapLeafScript")}n.finalScriptWitness=m.reverse().concat([d,rn.encode(u)]);break}if(!n.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");n.finalScriptSig=fe,Jf(n);return}if(!n.partialSig||!n.partialSig.length)throw new Error("Not enough partial sign");let o=fe,i=[];if(r.last.type==="ms"){let c=r.last.m,u=r.last.pubkeys,l=[];for(let d of u){let h=n.partialSig.find(p=>we(d,p[0]));h&&l.push(h[1])}if(l=l.slice(0,c),l.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${l.length}`);o=xe.encode([0,...l])}else if(r.last.type==="pk")o=xe.encode([n.partialSig[0][1]]);else if(r.last.type==="pkh")o=xe.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if(r.last.type==="wpkh")o=fe,i=[n.partialSig[0][1],n.partialSig[0][0]];else if(r.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(r.type.includes("wsh-")&&(o.length&&r.lastScript.length&&(i=xe.decode(o).map(c=>{if(c===0)return fe;if(oe(c))return c;throw new Error(`Wrong witness op=${c}`)})),i=i.concat(r.lastScript)),r.txType==="segwit"&&(a=i),r.type.startsWith("sh-wsh-")?s=xe.encode([xe.encode([0,De(r.lastScript)])]):r.type.startsWith("sh-")?s=xe.encode([...xe.decode(o),r.lastScript]):r.type.startsWith("wsh-")||r.txType!=="segwit"&&(s=o),!s&&!a)throw new Error("Unknown error finalizing input");s&&(n.finalScriptSig=s),a&&(n.finalScriptWitness=a),Jf(n)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let o of["PSBTVersion","version","lockTime"])if(this.opts[o]!==t.opts[o])throw new Error(`Transaction/combine: different ${o} this=${this.opts[o]} other=${t.opts[o]}`);for(let o of["inputs","outputs"])if(this[o].length!==t[o].length)throw new Error(`Transaction/combine: different ${o} length this=${this[o].length} other=${t[o].length}`);let n=this.global.unsignedTx?Et.encode(this.global.unsignedTx):fe,r=t.global.unsignedTx?Et.encode(t.global.unsignedTx):fe;if(!we(n,r))throw new Error("Transaction/combine: different unsigned tx");this.global=Ji(Pc,this.global,t.global);for(let o=0;o<this.inputs.length;o++)this.updateInput(o,t.inputs[o],!0);for(let o=0;o<this.outputs.length;o++)this.updateOutput(o,t.outputs[o],!0);return this}clone(){return e.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}};var ih=qe(he(null),e=>or(e,Ve.ecdsa)),Fc=qe(he(32),e=>or(e,Ve.schnorr)),y0=qe(he(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e}),Bc=Be({fingerprint:Dv,path:Ye(null,re)}),b0=Be({hashes:Ye(dt,he(32)),der:Bc}),HT=he(78),GT=Be({pubKey:Fc,leafHash:he(32)}),WT=Be({version:Ht,internalKey:he(32),merklePath:Ye(null,he(32))}),rn=qe(WT,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),zT=Ye(null,Be({depth:Ht,version:Ht,script:tt})),ke=he(null),w0=he(20),rs=he(32),Pc={unsignedTx:[0,!1,Et,[0],[0],!1],xpub:[1,HT,Bc,[],[0,2],!1],txVersion:[2,!1,re,[2],[2],!1],fallbackLocktime:[3,!1,re,[],[2],!1],inputCount:[4,!1,dt,[2],[2],!1],outputCount:[5,!1,dt,[2],[2],!1],txModifiable:[6,!1,Ht,[],[2],!1],version:[251,!1,re,[],[0,2],!1],proprietary:[252,ke,ke,[],[0,2],!1]},Yo={nonWitnessUtxo:[0,!1,Et,[],[0,2],!1],witnessUtxo:[1,!1,sr,[],[0,2],!1],partialSig:[2,ih,ke,[],[0,2],!1],sighashType:[3,!1,re,[],[0,2],!1],redeemScript:[4,!1,ke,[],[0,2],!1],witnessScript:[5,!1,ke,[],[0,2],!1],bip32Derivation:[6,ih,Bc,[],[0,2],!1],finalScriptSig:[7,!1,ke,[],[0,2],!1],finalScriptWitness:[8,!1,Ko,[],[0,2],!1],porCommitment:[9,!1,ke,[],[0,2],!1],ripemd160:[10,w0,ke,[],[0,2],!1],sha256:[11,rs,ke,[],[0,2],!1],hash160:[12,w0,ke,[],[0,2],!1],hash256:[13,rs,ke,[],[0,2],!1],txid:[14,!1,rs,[2],[2],!0],index:[15,!1,re,[2],[2],!0],sequence:[16,!1,re,[],[2],!0],requiredTimeLocktime:[17,!1,re,[],[2],!1],requiredHeightLocktime:[18,!1,re,[],[2],!1],tapKeySig:[19,!1,y0,[],[0,2],!1],tapScriptSig:[20,GT,y0,[],[0,2],!1],tapLeafScript:[21,rn,ke,[],[0,2],!1],tapBip32Derivation:[22,rs,b0,[],[0,2],!1],tapInternalKey:[23,!1,Fc,[],[0,2],!1],tapMerkleRoot:[24,!1,rs,[],[0,2],!1],proprietary:[252,ke,ke,[],[0,2],!1]},p0=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],g0=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],ns={redeemScript:[0,!1,ke,[],[0,2],!1],witnessScript:[1,!1,ke,[],[0,2],!1],bip32Derivation:[2,ih,Bc,[],[0,2],!1],amount:[3,!1,Ev,[2],[2],!0],script:[4,!1,ke,[2],[2],!0],tapInternalKey:[5,!1,Fc,[],[0,2],!1],tapTree:[6,!1,zT,[],[0,2],!1],tapBip32Derivation:[7,Fc,b0,[],[0,2],!1],proprietary:[252,ke,ke,[],[0,2],!1]},m0=[],v0=Ye(Sf,Be({key:xv(dt,Be({type:dt,key:he(null)})),value:he(dt)}));function sh(e){let[t,n,r,o,i,s]=e;return{type:t,kc:n,vc:r,reqInc:o,allowInc:i,silentIgnore:s}}var X2=Be({type:dt,key:he(null)});function ah(e){let t={};for(let n in e){let[r,o,i]=e[n];t[r]=[n,o,i]}return Ke({encodeStream:(n,r)=>{let o=[];for(let i in e){let s=r[i];if(s===void 0)continue;let[a,c,u]=e[i];if(!c)o.push({key:{type:a,key:fe},value:u.encode(s)});else{let l=s.map(([d,h])=>[c.encode(d),u.encode(h)]);l.sort((d,h)=>ir(d[0],h[0]));for(let[d,h]of l)o.push({key:{key:d,type:a},value:h})}}if(r.unknown){r.unknown.sort((i,s)=>ir(i[0].key,s[0].key));for(let[i,s]of r.unknown)o.push({key:i,value:s})}v0.encodeStream(n,o)},decodeStream:n=>{let r=v0.decodeStream(n),o={},i={};for(let s of r){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[l,d,h]=t[s.key.type];if(a=l,!d&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${ce.encode(c)} value=${ce.encode(u)}`);if(c=d?d.decode(c):void 0,u=h.decode(u),!d){if(o[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);o[a]=u,i[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(i[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);o[a]||(o[a]=[]),o[a].push([c,u])}return o}})}var Rc=qe(ah(Yo),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)or(t,Ve.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)or(t,Ve.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let n=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!we(e.witnessUtxo.script,n.script)||e.witnessUtxo.amount!==n.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,n]of e.tapLeafScript){if((t.version&254)!==n[n.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(n[n.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index!==void 0&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let n=Xi.fromRaw(Et.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=ce.encode(e.txid);if(n.isFinal&&n.id!==r)throw new Error(`nonWitnessUtxo: wrong txid, exp=${r} got=${n.id}`)}return e}),Lc=qe(ah(ns),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)or(t,Ve.ecdsa);return e}),E0=qe(ah(Pc),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let n of e.unsignedTx.inputs)if(n.finalScriptSig&&n.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),qT=Be({magic:gc(pc(new Uint8Array([255])),"psbt"),global:E0,inputs:Ye("global/unsignedTx/inputs/length",Rc),outputs:Ye(null,Lc)}),KT=Be({magic:gc(pc(new Uint8Array([255])),"psbt"),global:E0,inputs:Ye("global/inputCount",Rc),outputs:Ye("global/outputCount",Lc)}),J2=Be({magic:gc(pc(new Uint8Array([255])),"psbt"),items:Ye(null,$t(Ye(Sf,Tv([Iv(dt),he(Yi)])),En.dict()))});function oh(e,t,n){for(let r in n){if(r==="unknown"||!t[r])continue;let{allowInc:o}=sh(t[r]);if(!o.includes(e))throw new Error(`PSBTv${e}: field ${r} is not allowed`)}for(let r in t){let{reqInc:o}=sh(t[r]);if(o.includes(e)&&n[r]===void 0)throw new Error(`PSBTv${e}: missing required field ${r}`)}}function th(e,t,n){let r={};for(let o in n){let i=o;if(i!=="unknown"){if(!t[i])continue;let{allowInc:s,silentIgnore:a}=sh(t[i]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${i} but versions allows inclusion=${s}`)}}r[i]=n[i]}return r}function D0(e){let t=e&&e.global&&e.global.version||0;oh(t,Pc,e.global);for(let s of e.inputs)oh(t,Yo,s);for(let s of e.outputs)oh(t,ns,s);let n=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<n)throw new Error("Not enough inputs");let r=e.inputs.slice(n);if(r.length>1||r.length&&Object.keys(r[0]).length)throw new Error(`Unexpected inputs left in tx=${r}`);let o=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<o)throw new Error("Not outputs inputs");let i=e.outputs.slice(o);if(i.length>1||i.length&&Object.keys(i[0]).length)throw new Error(`Unexpected outputs left in tx=${i}`);return e}function Ji(e,t,n,r){let o=T(T({},n),t);for(let i in e){let s=i,[a,c,u]=e[s],l=r&&!r.includes(i);if(t[i]===void 0&&i in t){if(l)throw new Error(`Cannot remove signed field=${i}`);delete o[i]}else if(c){let d=n&&n[i]?n[i]:[],h=t[s];if(h){if(!Array.isArray(h))throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);h=h.map(f=>{if(f.length!==2)throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);return[typeof f[0]=="string"?c.decode(ce.decode(f[0])):f[0],typeof f[1]=="string"?u.decode(ce.decode(f[1])):f[1]]});let p={},y=(f,m,g)=>{if(p[f]===void 0){p[f]=[m,g];return}let w=ce.encode(u.encode(p[f][1])),v=ce.encode(u.encode(g));if(w!==v)throw new Error(`keyMap(${s}): same key=${f} oldVal=${w} newVal=${v}`)};for(let[f,m]of d){let g=ce.encode(c.encode(f));y(g,f,m)}for(let[f,m]of h){let g=ce.encode(c.encode(f));if(m===void 0){if(l)throw new Error(`Cannot remove signed field=${s}/${f}`);delete p[g]}else y(g,f,m)}o[s]=Object.values(p)}}else if(typeof o[i]=="string")o[i]=u.decode(ce.decode(o[i]));else if(l&&i in t&&n&&n[i]!==void 0&&!we(u.encode(t[i]),u.encode(n[i])))throw new Error(`Cannot change signed field=${i}`)}for(let i in o)e[i]||delete o[i];return o}var nh=qe(qT,D0),rh=qe(KT,D0);function cr(e,t){try{return or(e,t),!0}catch{return!1}}var YT={encode(e){if(!(e.length!==2||!oe(e[0])||!cr(e[0],Ve.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0},ZT={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!oe(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},QT={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!oe(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},XT={encode(e){if(!(e.length!==2||e[0]!==0||!oe(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0},JT={encode(e){if(!(e.length!==2||e[0]!==0||!oe(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},eA={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let n=e[0],r=e[t-1];if(typeof n!="number"||typeof r!="number")return;let o=e.slice(1,-2);if(r===o.length){for(let i of o)if(!oe(i))return;return{type:"ms",m:n,pubkeys:o}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},tA={encode(e){if(!(e.length!==2||e[0]!==1||!oe(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0},nA={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let n=[];for(let r=0;r<t;r++){let o=e[r];if(r&1){if(o!=="CHECKSIGVERIFY"||r===t-1)return;continue}if(!oe(o))return;n.push(o)}return{type:"tr_ns",pubkeys:n}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let n=0;n<e.pubkeys.length-1;n++)t.push(e.pubkeys[n],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}},rA={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let n=[],r=u0(e[t-1]);if(typeof r=="number"){for(let o=0;o<t-1;o++){let i=e[o];if(o&1){if(i!==(o===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!oe(i))throw new Error("OutScript.encode/tr_ms: wrong key element");n.push(i)}return{type:"tr_ms",pubkeys:n,m:r}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let n=1;n<e.pubkeys.length;n++)t.push(e.pubkeys[n],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}},oA={encode(e){return{type:"unknown",script:xe.encode(e)}},decode:e=>e.type==="unknown"?xe.decode(e.script):void 0},iA=[YT,ZT,QT,XT,JT,eA,tA,nA,rA,oA],sA=$t(xe,En.match(iA)),Ie=qe(sA,e=>{if(e.type==="pk"&&!cr(e.pubkey,Ve.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!oe(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!oe(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!oe(e.pubkey)||!cr(e.pubkey,Ve.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let n of e.pubkeys)if(!cr(n,Ve.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!cr(t,Ve.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function x0(e,t){if(!we(e.hash,De(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let n=Ie.decode(t);if(n.type==="tr"||n.type==="tr_ns"||n.type==="tr_ms")throw new Error(`checkScript: P2${n.type} cannot be wrapped in P2SH`);if(n.type==="wpkh"||n.type==="sh")throw new Error(`checkScript: P2${n.type} cannot be wrapped in P2WSH`)}function es(e,t,n){if(e){let r=Ie.decode(e);if(r.type==="tr_ns"||r.type==="tr_ms"||r.type==="ms"||r.type=="pk")throw new Error(`checkScript: non-wrapped ${r.type}`);if(r.type==="sh"&&t){if(!we(r.hash,zr(t)))throw new Error("checkScript: sh wrong redeemScript hash");let o=Ie.decode(t);if(o.type==="tr"||o.type==="tr_ns"||o.type==="tr_ms")throw new Error(`checkScript: P2${o.type} cannot be wrapped in P2SH`);if(o.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}r.type==="wsh"&&n&&x0(r,n)}if(t){let r=Ie.decode(t);r.type==="wsh"&&n&&x0(r,n)}}var Vc=(e,t=Wt)=>{if(!cr(e,Ve.ecdsa))throw new Error("P2PKH: invalid publicKey");let n=zr(e);return{type:"pkh",script:Ie.encode({type:"pkh",hash:n}),address:ar(t).encode({type:"pkh",hash:n})}},hh=(e,t=Wt)=>{let n=e.script;if(!oe(n))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let r=zr(n),o=Ie.encode({type:"sh",hash:r});es(o,n,e.witnessScript);let i={type:"sh",redeemScript:n,script:Ie.encode({type:"sh",hash:r}),address:ar(t).encode({type:"sh",hash:r})};return e.witnessScript&&(i.witnessScript=e.witnessScript),i};var _0=(e,t=Wt)=>{if(!cr(e,Ve.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let n=zr(e);return{type:"wpkh",script:Ie.encode({type:"wpkh",hash:n}),address:ar(t).encode({type:"wpkh",hash:n})}};function aA(e,t,n=!1,r){let o=Ie.decode(e);if(o.type==="unknown"){if(r){let a=$t(xe,En.match(r)).decode(e);if(a!==void 0){if(typeof a.type!="string"||!a.type.startsWith("tr_"))throw new Error(`P2TR: invalid custom type=${a.type}`);return}}if(n)return}if(!["tr_ns","tr_ms"].includes(o.type))throw new Error(`P2TR: invalid leaf script=${o.type}`);let i=o;if(!n&&i.pubkeys)for(let s of i.pubkeys){if(we(s,Mc))throw new Error("Unspendable taproot key in leaf script");if(we(s,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function C0(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let r=t.pop(),o=t.pop(),i=(o?.weight||1)+(r?.weight||1);t.push({weight:i,childs:[o?.childs||o,r?.childs||r]})}let n=t[0];return n?.childs||n}function uh(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return V(T({},e),{path:t});if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return V(T({},e),{path:t,left:uh(e.left,[e.right.hash,...t]),right:uh(e.right,[e.left.hash,...t])})}function lh(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...lh(e.left),...lh(e.right)]}function dh(e,t,n=!1,r){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:c,script:u}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!we(e.tapMerkleRoot,fe))throw new Error("P2TR: tapRoot leafScript cannot have tree");let l=typeof u=="string"?ce.decode(u):u;if(!oe(l))throw new Error(`checkScript: wrong script type=${l}`);return aA(l,t,n,r),{type:"leaf",version:c,script:l,hash:Zo(l,c)}}if(e.length!==2&&(e=C0(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let o=dh(e[0],t,n,r),i=dh(e[1],t,n,r),[s,a]=[o.hash,i.hash];return ir(a,s)===-1&&([s,a]=[a,s]),{type:"branch",left:o,right:i,hash:Ki("TapBranch",s,a)}}var fh=192,Zo=(e,t=fh)=>Ki("TapLeaf",new Uint8Array([t]),tt.encode(e));function S0(e,t,n=Wt,r=!1,o){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?ce.decode(e):e||Mc;if(!cr(i,Ve.schnorr))throw new Error("p2tr: non-schnorr pubkey");let s=t?uh(dh(t,i,r,o)):void 0,a=s?s.hash:void 0,[c,u]=qo(i,a||fe),l;s&&(l=lh(s).map(p=>V(T({},p),{controlBlock:rn.encode({version:(p.version||fh)+u,internalKey:i,merklePath:p.path})})));let d;l&&(d=l.map(p=>[rn.decode(p.controlBlock),Rt(p.script,new Uint8Array([p.version||fh]))]));let h={type:"tr",script:Ie.encode({type:"tr",pubkey:c}),address:ar(n).encode({type:"tr",pubkey:c}),tweakedPubkey:c,tapInternalKey:i};return l&&(h.leaves=l),d&&(h.tapLeafScript=d),a&&(h.tapMerkleRoot=a),h}function ph(e,t,n=Wt){if(e==="tr")return S0(qr(t),void 0,n).address;let r=Ac(t);if(e==="pkh")return Vc(r,n).address;if(e==="wpkh")return _0(r,n).address;throw new Error(`getAddress: unknown type=${e}`)}var T0=fv(De);function A0(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function ch(e,t,n=Wt){A0(e,t);let r=e===0?fc:xf;return r.encode(n.bech32,[e].concat(r.toWords(t)))}function I0(e,t){return T0.encode(Rt(Uint8Array.from(t),e))}function ar(e=Wt){return{encode(t){let{type:n}=t;if(n==="wpkh")return ch(0,t.hash,e);if(n==="wsh")return ch(0,t.hash,e);if(n==="tr")return ch(1,t.pubkey,e);if(n==="pkh")return I0(t.hash,[e.pubKeyHash]);if(n==="sh")return I0(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${n}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let r;try{if(r=fc.decode(t),r.words[0]!==0)throw new Error(`bech32: wrong version=${r.words[0]}`)}catch{if(r=xf.decode(t),r.words[0]===0)throw new Error(`bech32m: wrong version=${r.words[0]}`)}if(r.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${r.prefix}`);let[o,...i]=r.words,s=fc.fromWords(i);if(A0(o,s),o===0&&s.length===32)return{type:"wsh",hash:s};if(o===0&&s.length===20)return{type:"wpkh",hash:s};if(o===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let n=T0.decode(t);if(n.length!==21)throw new Error("Invalid base58 address");if(n[0]===e.pubKeyHash)return{type:"pkh",hash:n.slice(1)};if(n[0]===e.scriptHash)return{type:"sh",hash:n.slice(1)};throw new Error(`Invalid address prefix=${n[0]}`)}}}var M0={isBytes:oe,concatBytes:Rt,compareBytes:ir,pubSchnorr:qr,randomPrivateKeyBytes:t0,taprootTweakPubkey:qo};var N0=(e,t="pkh")=>{let n;if(t==="sh"){let o=wf.getPublicKey(e);n=hh(Vc(o)).address}else n=ph(t,e);let r=dc.encode(e);return{format:t,privateKey:e,address:n,privateKeyBase58:r}},jc=(e="pkh")=>{let t=M0.randomPrivateKeyBytes();return N0(t,e)},R0=e=>{if(!(e.length<25||e.length>34)){if(e[0]==="1")return"pkh";if(e[0]==="3")return"sh";if(e.slice(0,4)==="bc1q")return"wpkh";if(e.slice(0,4)==="bc1p")return"tr"}},k0=e=>{let t=dc.decode(e.privateKeyBase58);return N0(t,e.format).address===e.address};var $0=(()=>{let t=class t{constructor(r,o){this._renderer=r,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(r,o){this._renderer.setProperty(this._elementRef.nativeElement,r,o)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(o){return new(o||t)(te(Wn),te(lt))},t.\u0275dir=Ge({type:t});let e=t;return e})(),H0=(()=>{let t=class t extends $0{};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Mi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,features:[gn]});let e=t;return e})(),vh=new Q("");var uA={provide:vh,useExisting:Un(()=>zc),multi:!0};function lA(){let e=ko()?ko().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var dA=new Q(""),zc=(()=>{let t=class t extends $0{constructor(r,o,i){super(r,o),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!lA())}writeValue(r){let o=r??"";this.setProperty("value",o)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(o){return new(o||t)(te(Wn),te(lt),te(dA,8))},t.\u0275dir=Ge({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&mt("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[No([uA]),gn]});let e=t;return e})();function $c(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var bh=new Q(""),fA=new Q("");function hA(e){return t=>{if($c(t.value)||$c(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function pA(e){return t=>{if($c(t.value)||$c(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function O0(e){return null}function G0(e){return e!=null}function W0(e){return Ri(e)?so(e):e}function z0(e){let t={};return e.forEach(n=>{t=n!=null?T(T({},t),n):t}),Object.keys(t).length===0?null:t}function q0(e,t){return t.map(n=>n(e))}function gA(e){return!e.validate}function K0(e){return e.map(t=>gA(t)?t:n=>t.validate(n))}function mA(e){if(!e)return null;let t=e.filter(G0);return t.length==0?null:function(n){return z0(q0(n,t))}}function Y0(e){return e!=null?mA(K0(e)):null}function yA(e){if(!e)return null;let t=e.filter(G0);return t.length==0?null:function(n){let r=q0(n,t).map(W0);return $u(r).pipe(at(z0))}}function Z0(e){return e!=null?yA(K0(e)):null}function P0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function wA(e){return e._rawValidators}function vA(e){return e._rawAsyncValidators}function gh(e){return e?Array.isArray(e)?e:[e]:[]}function Hc(e,t){return Array.isArray(e)?e.includes(t):e===t}function L0(e,t){let n=gh(t);return gh(e).forEach(o=>{Hc(n,o)||n.push(o)}),n}function F0(e,t){return gh(t).filter(n=>!Hc(e,n))}var Gc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Y0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Z0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},mh=class extends Gc{get formDirective(){return null}get path(){return null}},cs=class extends Gc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},yh=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},VL=V(T({},bA),{"[class.ng-submitted]":"isSubmitted"}),Q0=(()=>{let t=class t extends yh{constructor(r){super(r)}};t.\u0275fac=function(o){return new(o||t)(te(cs,2))},t.\u0275dir=Ge({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&Nd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[gn]});let e=t;return e})();var os="VALID",Uc="INVALID",Xo="PENDING",is="DISABLED",ei=class{},Wc=class extends ei{constructor(t,n){super(),this.value=t,this.source=n}},ss=class extends ei{constructor(t,n){super(),this.pristine=t,this.source=n}},as=class extends ei{constructor(t,n){super(),this.touched=t,this.source=n}},Jo=class extends ei{constructor(t,n){super(),this.status=t,this.source=n}};function EA(e){return(qc(e)?e.validators:e)||null}function DA(e){return Array.isArray(e)?Y0(e):e||null}function xA(e,t){return(qc(t)?t.asyncValidators:e)||null}function IA(e){return Array.isArray(e)?Z0(e):e||null}function qc(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var wh=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ga(()=>this.statusReactive()),this.statusReactive=ja(void 0),this._pristine=Ga(()=>this.pristineReactive()),this.pristineReactive=ja(!0),this._touched=Ga(()=>this.touchedReactive()),this.touchedReactive=ja(!1),this._events=new Kt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return zn(this.statusReactive)}set status(t){zn(()=>this.statusReactive.set(t))}get valid(){return this.status===os}get invalid(){return this.status===Uc}get pending(){return this.status==Xo}get disabled(){return this.status===is}get enabled(){return this.status!==is}get pristine(){return zn(this.pristineReactive)}set pristine(t){zn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return zn(this.touchedReactive)}set touched(t){zn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(L0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(L0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(F0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(F0(t,this._rawAsyncValidators))}hasValidator(t){return Hc(this._rawValidators,t)}hasAsyncValidator(t){return Hc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(V(T({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new as(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new as(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(V(T({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ss(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ss(!0,r))}markAsPending(t={}){this.status=Xo;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Jo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(V(T({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=is,this.errors=null,this._forEachChild(o=>{o.disable(V(T({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wc(this.value,r)),this._events.next(new Jo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(V(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=os,this._forEachChild(r=>{r.enable(V(T({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(V(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===os||this.status===Xo)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wc(this.value,n)),this._events.next(new Jo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(V(T({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?is:os}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Xo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=W0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Jo(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?is:this.errors?Uc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xo)?Xo:this._anyControlsHaveStatus(Uc)?Uc:os}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new ss(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new as(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){qc(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=DA(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=IA(this._rawAsyncValidators)}};var X0=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Eh}),Eh="always";function _A(e,t){return[...t.path,e]}function CA(e,t,n=Eh){TA(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),AA(e,t),NA(e,t),MA(e,t),SA(e,t)}function B0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function SA(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function TA(e,t){let n=wA(e);t.validator!==null?e.setValidators(P0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=vA(e);t.asyncValidator!==null?e.setAsyncValidators(P0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();B0(t._rawValidators,o),B0(t._rawAsyncValidators,o)}function AA(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&J0(e,t)})}function MA(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&J0(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function J0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function NA(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function RA(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function kA(e){return Object.getPrototypeOf(e.constructor)===H0}function OA(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===zc?n=i:kA(i)?r=i:o=i}),o||r||n||null}function V0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function j0(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var PA=class extends wh{constructor(t=null,n,r){super(EA(n),xA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(j0(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){V0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){V0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){j0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var LA={provide:cs,useExisting:Un(()=>Dh)},U0=Promise.resolve(),Dh=(()=>{let t=class t extends cs{constructor(r,o,i,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new PA,this._registered=!1,this.name="",this.update=new ct,this._parent=r,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=OA(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let o=r.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),RA(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){CA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){U0.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let o=r.isDisabled.currentValue,i=o!==0&&Fd(o);U0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?_A(r,this._parent):[r]}};t.\u0275fac=function(o){return new(o||t)(te(mh,9),te(bh,10),te(fA,10),te(vh,10),te(Ro,8),te(X0,8))},t.\u0275dir=Ge({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[No([LA]),gn,kr]});let e=t;return e})();var FA={provide:vh,useExisting:Un(()=>xh),multi:!0},xh=(()=>{let t=class t extends H0{writeValue(r){let o=r??"";this.setProperty("value",o)}registerOnChange(r){this.onChange=o=>{r(o==""?null:parseFloat(o))}}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Mi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,i){o&1&&mt("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[No([FA]),gn]});let e=t;return e})();function eb(e){return typeof e=="number"?e:parseFloat(e)}var tb=(()=>{let t=class t{constructor(){this._validator=O0}ngOnChanges(r){if(this.inputName in r){let o=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):O0,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=Ge({type:t,features:[kr]});let e=t;return e})(),BA={provide:bh,useExisting:Un(()=>Ih),multi:!0},Ih=(()=>{let t=class t extends tb{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>eb(r),this.createValidator=r=>pA(r)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Mi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&Ua("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[No([BA]),gn]});let e=t;return e})(),VA={provide:bh,useExisting:Un(()=>_h),multi:!0},_h=(()=>{let t=class t extends tb{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>eb(r),this.createValidator=r=>hA(r)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Mi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&Ua("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[No([VA]),gn]});let e=t;return e})();var jA=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rr({type:t}),t.\u0275inj=Nr({});let e=t;return e})();var nb=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:X0,useValue:r.callSetDisabledState??Eh}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rr({type:t}),t.\u0275inj=Nr({imports:[jA]});let e=t;return e})();var rb=(()=>{var t,n,ob,ib;let i=class i{constructor(a,c){xu(this,n);xu(this,t);this._elRef=a,this._renderer=c,this.busy=!1}ngOnChanges(a){let c=a.busy;c&&(c.currentValue?(this._renderer.setAttribute(this._elRef.nativeElement,"disabled",""),_u(this,n,ob).call(this)):c.firstChange||(this._renderer.removeAttribute(this._elRef.nativeElement,"disabled"),_u(this,n,ib).call(this)))}};t=new WeakMap,n=new WeakSet,ob=function(){Iu(this,t,document.createElement("span")),fi(this,t).classList.add("bar"),this._renderer.appendChild(this._elRef.nativeElement,fi(this,t))},ib=function(){fi(this,t)&&(fi(this,t).remove(),Iu(this,t,void 0))},i.\u0275fac=function(c){return new(c||i)(te(lt),te(Wn))},i.\u0275dir=Ge({type:i,selectors:[["button","progress",""]],inputs:{busy:"busy"},standalone:!0,features:[kr]});let e=i;return e})();function $A(e,t){e&1&&Pr(0,"span",6)}function HA(e,t){if(e&1&&(k(0,"div",3),Or(1,$A,1,0,"span",4),k(2,"span",5),A(3),O()()),e&2){let n=t.$implicit;gt(),We("ngIf",n.pending),gt(),We("ngClass",n.type==="INFO"?"text-cyan-300":n.type==="WARN"?"text-amber-300":n.type==="ERROR"?"text-red-300 font-bold":n.type==="SUCCESS"?"text-green-300 font-bold":"text-white"),gt(),Rd(" ",n.text," ")}}var Kc=class{constructor(t){this.type="INFO",this.text="",this.timestamp=Date.now(),this.pending=!1,Object.assign(this,t)}},Ch=(()=>{let t=class t{constructor(r,o){this.elRef=r,this.cd=o,this.messages=[]}ngOnInit(){this.window=this.elRef.nativeElement.children[0]}log(r){let o=r instanceof Kc?r:new Kc(r);return this.messages.push(o),this.cd.detectChanges(),this.window.scrollTop=this.window.scrollHeight,o}clear(){this.messages=[]}};t.\u0275fac=function(o){return new(o||t)(te(lt),te(Ro))},t.\u0275cmp=Ta({type:t,selectors:[["message-log"]],standalone:!0,features:[$a],decls:4,vars:1,consts:[[1,"bg-gray-900","text-white","p-4","rounded-md","h-96","overflow-y-scroll","relative","font-mono"],[1,"border-2","sticky","bg-black","top-0","ml-auto","block",3,"click"],["class","mb-2 flex items-center text-sm",4,"ngFor","ngForOf"],[1,"mb-2","flex","items-center","text-sm"],["class","log-message-loader absolute",4,"ngIf"],[1,"ml-6","whitespace-pre-line",3,"ngClass"],[1,"log-message-loader","absolute"]],template:function(o,i){o&1&&(k(0,"div",0)(1,"button",1),mt("click",function(){return i.clear()}),A(2," Clear "),O(),Or(3,HA,4,3,"div",2),O()),o&2&&(gt(3),We("ngForOf",i.messages))},dependencies:[ki,vw,bw,qa],styles:[".log-message-loader[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_log-message-loader-anim 1s linear infinite}@keyframes _ngcontent-%COMP%_log-message-loader-anim{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let e=t;return e})();var Yc=class{constructor(t){this.moduleName=t,this.module={},this.worker={};let n=window;this.factory=n[t]}init(){return le(this,null,function*(){return new Promise((t,n)=>le(this,null,function*(){this.module=yield this.factory();let{runningWorkers:r}=this.module.PThread;this.worker=r[0];let o=s=>{n(s.error),this.worker.removeEventListener("error",o)};this.worker.addEventListener("error",o);let i=s=>{let a=s.data;!a||a.em_cmd!=="main_thread_ready"||(t(),this.worker.removeEventListener("message",i))};this.worker.addEventListener("message",i)}))})}exit(){this.module.ccall("em_exit",null,[],[])}};var pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_e=Object.keys,Qe=Array.isArray;typeof Promise<"u"&&!pe.Promise&&(pe.Promise=Promise);function rt(e,t){return typeof t!="object"||_e(t).forEach(function(n){e[n]=t[n]}),e}var ps=Object.getPrototypeOf,GA={}.hasOwnProperty;function xt(e,t){return GA.call(e,t)}function ii(e,t){typeof t=="function"&&(t=t(ps(e))),(typeof Reflect>"u"?_e:Reflect.ownKeys)(t).forEach(n=>{Rn(e,n,t[n])})}var wb=Object.defineProperty;function Rn(e,t,n,r){wb(e,t,rt(n&&xt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ai(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Rn(e.prototype,"constructor",e),{extend:ii.bind(null,e.prototype)}}}}var WA=Object.getOwnPropertyDescriptor;function ap(e,t){let n=WA(e,t),r;return n||(r=ps(e))&&ap(r,t)}var zA=[].slice;function yu(e,t,n){return zA.call(e,t,n)}function vb(e,t){return t(e)}function us(e){if(!e)throw new Error("Assertion Failed")}function bb(e){pe.setImmediate?setImmediate(e):setTimeout(e,0)}function Eb(e,t){return e.reduce((n,r,o)=>{var i=t(r,o);return i&&(n[i[0]]=i[1]),n},{})}function qA(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function Nn(e,t){if(typeof t=="string"&&xt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var i=Nn(e,t[r]);n.push(i)}return n}var s=t.indexOf(".");if(s!==-1){var a=e[t.substr(0,s)];return a===void 0?void 0:Nn(a,t.substr(s+1))}}function zt(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){us(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)zt(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var s=t.substr(0,i),a=t.substr(i+1);if(a==="")n===void 0?Qe(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];(!c||!xt(e,s))&&(c=e[s]={}),zt(c,a,n)}}else n===void 0?Qe(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function KA(e,t){typeof t=="string"?zt(e,t,void 0):"length"in t&&[].map.call(t,function(n){zt(e,n,void 0)})}function Db(e){var t={};for(var n in e)xt(e,n)&&(t[n]=e[n]);return t}var YA=[].concat;function xb(e){return YA.apply([],e)}var Ib="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(xb([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>pe[e]),ZA=Ib.map(e=>pe[e]);Eb(Ib,e=>[e,!0]);var lr=null;function Es(e){lr=typeof WeakMap<"u"&&new WeakMap;let t=kh(e);return lr=null,t}function kh(e){if(!e||typeof e!="object")return e;let t=lr&&lr.get(e);if(t)return t;if(Qe(e)){t=[],lr&&lr.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(kh(e[n]))}else if(ZA.indexOf(e.constructor)>=0)t=e;else{let i=ps(e);t=i===Object.prototype?{}:Object.create(i),lr&&lr.set(e,t);for(var o in e)xt(e,o)&&(t[o]=kh(e[o]))}return t}var{toString:QA}={};function Oh(e){return QA.call(e).slice(8,-1)}var Ph=typeof Symbol<"u"?Symbol.iterator:"@@iterator",XA=typeof Ph=="symbol"?function(e){var t;return e!=null&&(t=e[Ph])&&t.apply(e)}:function(){return null},ri={};function An(e){var t,n,r,o;if(arguments.length===1){if(Qe(e))return e.slice();if(this===ri&&typeof e=="string")return[e];if(o=XA(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var cp=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,sn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _b(e,t){sn=e,Cb=t}var Cb=()=>!0,JA=!new Error("").stack;function to(){if(JA)try{throw to.arguments,new Error}catch(e){return e}return new Error}function Lh(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Cb).map(r=>`
`+r).join("")):""}var eM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Sb=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],up=eM.concat(Sb),tM={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ci(e,t){this._e=to(),this.name=e,this.message=t}ai(ci).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Lh(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Tb(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function au(e,t,n,r){this._e=to(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Tb(e,t)}ai(au).from(ci);function ds(e,t){this._e=to(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Tb(e,t)}ai(ds).from(ci);var lp=up.reduce((e,t)=>(e[t]=t+"Error",e),{}),nM=ci,$=up.reduce((e,t)=>{var n=t+"Error";function r(o,i){this._e=to(),this.name=n,o?typeof o=="string"?(this.message=`${o}${i?`
 `+i:""}`,this.inner=i||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=tM[t]||n,this.inner=null)}return ai(r).from(nM),e[t]=r,e},{});$.Syntax=SyntaxError;$.Type=TypeError;$.Range=RangeError;var sb=Sb.reduce((e,t)=>(e[t+"Error"]=$[t],e),{});function rM(e,t){if(!e||e instanceof ci||e instanceof TypeError||e instanceof SyntaxError||!e.name||!sb[e.name])return e;var n=new sb[e.name](t||e.message,e);return"stack"in e&&Rn(n,"stack",{get:function(){return this.inner.stack}}),n}var wu=up.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=$[t]),e),{});wu.ModifyError=au;wu.DexieError=ci;wu.BulkError=ds;function ue(){}function Ds(e){return e}function oM(e,t){return e==null||e===Ds?t:function(n){return t(e(n))}}function Jr(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function iM(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Jr(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Jr(o,this.onerror):o),i!==void 0?i:n}}function sM(e,t){return e===ue?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Jr(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Jr(r,this.onerror):r)}}function aM(e,t){return e===ue?t:function(n){var r=e.apply(this,arguments);rt(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Jr(o,this.onsuccess):o),i&&(this.onerror=this.onerror?Jr(i,this.onerror):i),r===void 0?s===void 0?void 0:s:rt(r,s)}}function cM(e,t){return e===ue?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function dp(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}var gs={},uM=100,lM=20,Ab=100,[Fh,cu,Bh]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ps(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ps(t),e]})(),Mb=cu&&cu.then,tu=Fh&&Fh.constructor,fp=!!Bh,Vh=!1,dM=Bh?()=>{Bh.then(Zc)}:pe.setImmediate?setImmediate.bind(null,Zc):pe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Zc(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Zc,0)},ms=function(e,t){ls.push([e,t]),uu&&(dM(),uu=!1)},jh=!0,uu=!0,Qr=[],nu=[],Uh=null,$h=Ds,oi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ub,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{ub(e[0],e[1])}catch{}})}},j=oi,ls=[],Xr=0,ru=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ue,this._lib=!1;var t=this._PSD=j;if(sn&&(this._stackHolder=to(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==gs)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Gh(this,this._value);return}this._state=null,this._value=null,++t.ref,Rb(this,e)}var Hh={get:function(){var e=j,t=lu;function n(r,o){var i=!e.global&&(e!==j||t!==lu);let s=i&&!kn();var a=new F((c,u)=>{hp(this,new Nb(fu(r,e,i,s),fu(o,e,i,s),c,u,e))});return sn&&Pb(a,this),a}return n.prototype=gs,n},set:function(e){Rn(this,"then",e&&e.prototype===gs?Hh:{get:function(){return e},set:Hh.set})}};ii(F.prototype,{then:Hh,_then:function(e,t){hp(this,new Nb(null,null,e,t,j))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):ou(r)):this.then(null,r=>r&&r.name===t?n(r):ou(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),ou(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Vh=!0;var e=Ob(this,[],lM),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Vh=!1}}},timeout:function(e,t){return e<1/0?new F((n,r)=>{var o=setTimeout(()=>r(new $.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Rn(F.prototype,Symbol.toStringTag,"Dexie.Promise");oi.env=Lb();function Nb(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}ii(F,{all:function(){var e=An.apply(null,arguments).map(du);return new F(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((o,i)=>F.resolve(o).then(s=>{e[i]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof F)return e;if(e&&typeof e.then=="function")return new F((n,r)=>{e.then(n,r)});var t=new F(gs,!0,e);return Pb(t,Uh),t},reject:ou,race:function(){var e=An.apply(null,arguments).map(du);return new F((t,n)=>{e.map(r=>F.resolve(r).then(t,n))})},PSD:{get:()=>j,set:e=>j=e},totalEchoes:{get:()=>lu},newPSD:fr,usePSD:li,scheduler:{get:()=>ms,set:e=>{ms=e}},rejectionMapper:{get:()=>$h,set:e=>{$h=e}},follow:(e,t)=>new F((n,r)=>fr((o,i)=>{var s=j;s.unhandleds=[],s.onunhandled=i,s.finalize=Jr(function(){hM(()=>{this.unhandleds.length===0?o():i(this.unhandleds[0])})},s.finalize),e()},t,n,r))});tu&&(tu.allSettled&&Rn(F,"allSettled",function(){let e=An.apply(null,arguments).map(du);return new F(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((o,i)=>F.resolve(o).then(s=>r[i]={status:"fulfilled",value:s},s=>r[i]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),tu.any&&typeof AggregateError<"u"&&Rn(F,"any",function(){let e=An.apply(null,arguments).map(du);return new F((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,o=new Array(r);e.forEach((i,s)=>F.resolve(i).then(a=>t(a),a=>{o[s]=a,--r||n(new AggregateError(o))}))})}));function Rb(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&xs();n&&typeof n.then=="function"?Rb(e,(o,i)=>{n instanceof F?n._then(o,i):n.then(o,i)}):(e._state=!0,e._value=n,kb(e)),r&&Is()}},Gh.bind(null,e))}catch(n){Gh(e,n)}}function Gh(e,t){if(nu.push(t),e._state===null){var n=e._lib&&xs();t=$h(t),e._state=!1,e._value=t,sn&&t!==null&&typeof t=="object"&&!t._promise&&qA(()=>{var r=ap(t,"stack");t._promise=e,Rn(t,"stack",{get:()=>Vh?r&&(r.get?r.get.apply(t):r.value):e.stack})}),pM(e),kb(e),n&&Is()}}function kb(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)hp(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),Xr===0&&(++Xr,ms(()=>{--Xr===0&&pp()},[]))}function hp(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Xr,ms(fM,[n,e,t])}function fM(e,t,n){try{Uh=t;var r,o=t._value;t._state?r=e(o):(nu.length&&(nu=[]),r=e(o),nu.indexOf(o)===-1&&gM(t)),n.resolve(r)}catch(i){n.reject(i)}finally{Uh=null,--Xr===0&&pp(),--n.psd.ref||n.psd.finalize()}}function Ob(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o=e._value,i,s;o!=null?(i=o.name||"Error",s=o.message||o,r=Lh(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return sn&&(r=Lh(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ob(e._prev,t,n)),t}function Pb(e,t){var n=t?t._numPrev+1:0;n<uM&&(e._prev=t,e._numPrev=n)}function Zc(){xs()&&Is()}function xs(){var e=jh;return jh=!1,uu=!1,e}function Is(){var e,t,n;do for(;ls.length>0;)for(e=ls,ls=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ls.length>0);jh=!0,uu=!0}function pp(){var e=Qr;Qr=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=ru.slice(0),n=t.length;n;)t[--n]()}function hM(e){function t(){e(),ru.splice(ru.indexOf(t),1)}ru.push(t),++Xr,ms(()=>{--Xr===0&&pp()},[])}function pM(e){Qr.some(t=>t._value===e._value)||Qr.push(e)}function gM(e){for(var t=Qr.length;t;)if(Qr[--t]._value===e._value){Qr.splice(t,1);return}}function ou(e){return new F(gs,!1,e)}function me(e,t){var n=j;return function(){var r=xs(),o=j;try{return hr(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{hr(o,!1),r&&Is()}}}var Ze={awaits:0,echoes:0,id:0},mM=0,iu=[],Sh=0,lu=0,yM=0;function fr(e,t,n,r){var o=j,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++yM;var s=oi.env;i.env=fp?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject,nthen:ab(s.nthen,i),gthen:ab(s.gthen,i)}:{},t&&rt(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=li(i,e,n,r);return i.ref===0&&i.finalize(),a}function ui(){return Ze.id||(Ze.id=++mM),++Ze.awaits,Ze.echoes+=Ab,Ze.id}function kn(){return Ze.awaits?(--Ze.awaits===0&&(Ze.id=0),Ze.echoes=Ze.awaits*Ab,!0):!1}(""+Mb).indexOf("[native code]")===-1&&(ui=kn=ue);function du(e){return Ze.echoes&&e&&e.constructor===tu?(ui(),e.then(t=>(kn(),t),t=>(kn(),Oe(t)))):e}function wM(e){++lu,(!Ze.echoes||--Ze.echoes===0)&&(Ze.echoes=Ze.id=0),iu.push(j),hr(e,!0)}function vM(){var e=iu[iu.length-1];iu.pop(),hr(e,!1)}function hr(e,t){var n=j;if((t?Ze.echoes&&(!Sh++||e!==j):Sh&&(!--Sh||e!==j))&&Fb(t?wM.bind(null,e):vM),e!==j&&(j=e,n===oi&&(oi.env=Lb()),fp)){var r=oi.env.Promise,o=e.env;cu.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(pe,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function Lb(){var e=pe.Promise;return fp?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(pe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:cu.then,gthen:e.prototype.then}:{}}function li(e,t,n,r,o){var i=j;try{return hr(e,!0),t(n,r,o)}finally{hr(i,!1)}}function Fb(e){Mb.call(Fh,e)}function fu(e,t,n,r){return typeof e!="function"?e:function(){var o=j;n&&ui(),hr(t,!0);try{return e.apply(this,arguments)}finally{hr(o,!1),r&&Fb(kn)}}}function ab(e,t){return function(n,r){return e.call(this,fu(n,t),fu(r,t))}}var cb="unhandledrejection";function ub(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,o={promise:t,reason:e};if(pe.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(cb,!0,!0),rt(r,o)):pe.CustomEvent&&(r=new CustomEvent(cb,{detail:o}),rt(r,o)),r&&pe.dispatchEvent&&(dispatchEvent(r),!pe.PromiseRejectionEvent&&pe.onunhandledrejection))try{pe.onunhandledrejection(r)}catch{}sn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Oe=F.reject;function Wh(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!j.letThrough&&!e._vip){if(e._state.openComplete)return Oe(new $.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Oe(new $.DatabaseClosed);e.open().catch(ue)}return e._state.dbReadyPromise.then(()=>Wh(e,t,n,r))}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===lp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Wh(e,t,n,r))):Oe(i)}return o._promise(t,(i,s)=>fr(()=>(j.trans=o,r(i,s,o)))).then(i=>o._completion.then(()=>i))}}var lb="3.2.5",Zr="\uFFFF",zh=-1/0,Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bb="String expected.",fs=[],vu=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bM=vu,EM=vu,Vb=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),bu="__dbnames",Th="readonly",Ah="readwrite";function eo(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var jb={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qc(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=Es(t),delete t[e]),t):t=>t}var qh=class{_trans(t,n,r){let o=this._tx||j.trans,i=this.name;function s(c,u,l){if(!l.schema[i])throw new $.NotFound("Table "+i+" not part of transaction");return n(l.idbtrans,l)}let a=xs();try{return o&&o.db===this.db?o===j.trans?o._promise(t,s,r):fr(()=>o._promise(t,s,r),{trans:o,transless:j.transless||j}):Wh(this.db,t,[this.name],s)}finally{a&&Is()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(o=>this.hook.reading.fire(o))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Qe(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);let n=_e(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(u=>{if(u.compound&&n.every(l=>u.keyPath.indexOf(l)>=0)){for(let l=0;l<n.length;++l)if(n.indexOf(u.keyPath[l])===-1)return!1;return!0}return!1}).sort((u,l)=>u.keyPath.length-l.keyPath.length)[0];if(r&&this.db._maxKey!==Zr){let u=r.keyPath.slice(0,n.length);return this.where(u).equals(u.map(l=>t[l]))}!r&&sn&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:o}=this.schema,i=this.db._deps.indexedDB;function s(u,l){try{return i.cmp(u,l)===0}catch{return!1}}let[a,c]=n.reduce(([u,l],d)=>{let h=o[d],p=t[d];return[u||h,u||!h?eo(l,h&&h.multi?y=>{let f=Nn(y,d);return Qe(f)&&f.some(m=>s(p,m))}:y=>s(p,Nn(y,d))):l]},[null,null]);return a?this.where(a.name).equals(t[a.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Qe(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;let n=r=>{if(!r)return r;let o=Object.create(t.prototype);for(var i in r)if(xt(r,i))try{o[i]=r[i]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){function t(n){rt(this,n)}return this.mapToClass(t)}add(t,n){let{auto:r,keyPath:o}=this.schema.primKey,i=t;return o&&r&&(i=Qc(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[i]})).then(s=>s.numFailures?F.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{zt(t,o,s)}catch{}return s})}update(t,n){if(typeof t=="object"&&!Qe(t)){let r=Nn(t,this.schema.primKey.keyPath);if(r===void 0)return Oe(new $.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?_e(n).forEach(o=>{zt(t,o,n[o])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)}put(t,n){let{auto:r,keyPath:o}=this.schema.primKey,i=t;return o&&r&&(i=Qc(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[i],keys:n!=null?[n]:null})).then(s=>s.numFailures?F.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{zt(t,o,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?F.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:jb})).then(t=>t.numFailures?F.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(t,n,r){let o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);let i=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&o)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,l=c&&a?t.map(Qc(c)):t;return this.core.mutate({trans:s,type:"add",keys:o,values:l,wantResults:i}).then(({numFailures:d,results:h,lastResult:p,failures:y})=>{let f=i?h:p;if(d===0)return f;throw new ds(`${this.name}.bulkAdd(): ${d} of ${u} operations failed`,y)})})}bulkPut(t,n,r){let o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);let i=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&o)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,l=c&&a?t.map(Qc(c)):t;return this.core.mutate({trans:s,type:"put",keys:o,values:l,wantResults:i}).then(({numFailures:d,results:h,lastResult:p,failures:y})=>{let f=i?h:p;if(d===0)return f;throw new ds(`${this.name}.bulkPut(): ${d} of ${u} operations failed`,y)})})}bulkDelete(t){let n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:o,failures:i})=>{if(r===0)return o;throw new ds(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}};function _s(e){var t={},n=function(a,c){if(c){for(var u=arguments.length,l=new Array(u-1);--u;)l[u-1]=arguments[u];return t[a].subscribe.apply(null,l),e}else if(typeof a=="string")return t[a]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(a,c,u){if(typeof a=="object")return s(a);c||(c=cM),u||(u=ue);var l={subscribers:[],fire:u,subscribe:function(d){l.subscribers.indexOf(d)===-1&&(l.subscribers.push(d),l.fire=c(l.fire,d))},unsubscribe:function(d){l.subscribers=l.subscribers.filter(function(h){return h!==d}),l.fire=l.subscribers.reduce(c,u)}};return t[a]=n[a]=l,l}function s(a){_e(a).forEach(function(c){var u=a[c];if(Qe(u))i(c,a[c][0],a[c][1]);else if(u==="asap")var l=i(c,Ds,function(){for(var h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];l.subscribers.forEach(function(y){bb(function(){y.apply(null,p)})})});else throw new $.InvalidArgument("Invalid event config")})}}function Cs(e,t){return ai(t).from({prototype:e}),t}function DM(e){return Cs(qh.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:_s(null,{creating:[iM,ue],reading:[oM,Ds],updating:[aM,ue],deleting:[sM,ue]})})}function ti(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Mh(e,t){e.filter=eo(e.filter,t)}function Nh(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>eo(r(),t()):t,e.justLimit=n&&!r}function xM(e,t){e.isMatch=eo(e.isMatch,t)}function su(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new $.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function db(e,t,n){let r=su(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Xc(e,t,n,r){let o=e.replayFilter?eo(e.filter,e.replayFilter()):e.filter;if(e.or){let i={},s=(a,c,u)=>{if(!o||o(c,u,h=>c.stop(h),h=>c.fail(h))){var l=c.primaryKey,d=""+l;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(l)),xt(i,d)||(i[d]=!0,t(a,c,u))}};return Promise.all([e.or._iterate(s,n),fb(db(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return fb(db(e,r,n),eo(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function fb(e,t,n,r){var o=r?(s,a,c)=>n(r(s),a,c):n,i=me(o);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();(!t||t(s,c=>a=c,c=>{s.stop(c),a=ue},c=>{s.fail(c),a=ue}))&&i(s.value,s,c=>a=c),a()})})}function nt(e,t){try{let n=hb(e),r=hb(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return _M(pb(e),pb(t));case"Array":return IM(e,t)}}catch{}return NaN}function IM(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let i=0;i<o;++i){let s=nt(e[i],t[i]);if(s!==0)return s}return n===r?0:n<r?-1:1}function _M(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}function hb(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=Oh(e);return n==="ArrayBuffer"?"binary":n}function pb(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Kh=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Oe.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Oe.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=eo(n.algorithm,t)}_iterate(t,n){return Xc(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&rt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Xc(n,t,r,n.table.core))}count(t){return this._read(n=>{let r=this._ctx,o=r.table.core;if(ti(r,!0))return o.count({trans:n,query:{index:su(r,o.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var i=0;return Xc(r,()=>(++i,!1),n,o).then(()=>i)}).then(t)}sortBy(t,n){let r=t.split(".").reverse(),o=r[0],i=r.length-1;function s(u,l){return l?s(u[r[l]],l-1):u[o]}var a=this._ctx.dir==="next"?1:-1;function c(u,l){var d=s(u,i),h=s(l,i);return d<h?-a:d>h?a:0}return this.toArray(function(u){return u.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ti(r,!0)&&r.limit>0){let{valueMapper:o}=r,i=su(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:s})=>o?s.map(o):s)}else{let o=[];return Xc(r,i=>o.push(i),n,r.table.core).then(()=>o)}},t)}offset(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ti(n)?Nh(n,()=>{var r=t;return(o,i)=>r===0?!0:r===1?(--r,!1):(i(()=>{o.advance(r),r=0}),!1)}):Nh(n,()=>{var r=t;return()=>--r<0}),this)}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Nh(this._ctx,()=>{var n=t;return function(r,o,i){return--n<=0&&o(i),n>=0}},!0),this}until(t,n){return Mh(this._ctx,function(r,o,i){return t(r.value)?(o(i),n):!0}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){return Mh(this._ctx,function(n){return t(n.value)}),xM(this._ctx,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.key,o)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.primaryKey,o)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ti(n,!0)&&n.limit>0)return this._read(o=>{var i=su(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:o})=>o).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Mh(this._ctx,function(o){var i=o.primaryKey.toString(),s=xt(r,i);return r[i]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var o;if(typeof t=="function")o=t;else{var i=_e(t),s=i.length;o=function(f){for(var m=!1,g=0;g<s;++g){var w=i[g],v=t[w];Nn(f,w)!==v&&(zt(f,w,v),m=!0)}return m}}let a=n.table.core,{outbound:c,extractKey:u}=a.schema.primaryKey,l=this.db._options.modifyChunkSize||200,d=[],h=0,p=[],y=(f,m)=>{let{failures:g,numFailures:w}=m;h+=f-w;for(let v of _e(g))d.push(g[v])};return this.clone().primaryKeys().then(f=>{let m=g=>{let w=Math.min(l,f.length-g);return a.getMany({trans:r,keys:f.slice(g,g+w),cache:"immutable"}).then(v=>{let E=[],D=[],b=c?[]:null,I=[];for(let B=0;B<w;++B){let N=v[B],S={value:Es(N),primKey:f[g+B]};o.call(S,S.value,S)!==!1&&(S.value==null?I.push(f[g+B]):!c&&nt(u(N),u(S.value))!==0?(I.push(f[g+B]),E.push(S.value)):(D.push(S.value),c&&b.push(f[g+B])))}let _=ti(n)&&n.limit===1/0&&(typeof t!="function"||t===Rh)&&{index:n.index,range:n.range};return Promise.resolve(E.length>0&&a.mutate({trans:r,type:"add",values:E}).then(B=>{for(let N in B.failures)I.splice(parseInt(N),1);y(E.length,B)})).then(()=>(D.length>0||_&&typeof t=="object")&&a.mutate({trans:r,type:"put",keys:b,values:D,criteria:_,changeSpec:typeof t!="function"&&t}).then(B=>y(D.length,B))).then(()=>(I.length>0||_&&t===Rh)&&a.mutate({trans:r,type:"delete",keys:I,criteria:_}).then(B=>y(I.length,B))).then(()=>f.length>g+w&&m(g+l))})};return m(0).then(()=>{if(d.length>0)throw new au("Error modifying one or more objects",d,h,p);return f.length})})})}delete(){var t=this._ctx,n=t.range;return ti(t)&&(t.isPrimKey&&!EM||n.type===3)?this._write(r=>{let{primaryKey:o}=t.table.core.schema,i=n;return t.table.core.count({trans:r,query:{index:o,range:i}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:c,results:u,numFailures:l})=>{if(l)throw new au("Could not delete some values",Object.keys(a).map(d=>a[d]),s-l);return s-l}))}):this.modify(Rh)}},Rh=(e,t)=>t.value=null;function CM(e){return Cs(Kh.prototype,function(n,r){this.db=e;let o=jb,i=null;if(r)try{o=r()}catch(u){i=u}let s=n._ctx,a=s.table,c=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:c!==Ds?c:null}})}function SM(e,t){return e<t?-1:e===t?0:1}function TM(e,t){return e>t?-1:e===t?0:1}function Dt(e,t,n){var r=e instanceof hu?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ni(e){return new e.Collection(e,()=>Ub("")).limit(0)}function AM(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function MM(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function NM(e,t,n,r,o,i){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return o(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):o(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[c],u)<0&&(a=c)}return s<r.length&&i==="next"?e+n.substr(e.length):s<e.length&&i==="prev"?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Jc(e,t,n,r){var o,i,s,a,c,u,l,d=n.length;if(!n.every(f=>typeof f=="string"))return Dt(e,Bb);function h(f){o=AM(f),i=MM(f),s=f==="next"?SM:TM;var m=n.map(function(g){return{lower:i(g),upper:o(g)}}).sort(function(g,w){return s(g.lower,w.lower)});a=m.map(function(g){return g.upper}),c=m.map(function(g){return g.lower}),u=f,l=f==="next"?"":r}h("next");var p=new e.Collection(e,()=>ur(a[0],c[d-1]+r));p._ondirectionchange=function(f){h(f)};var y=0;return p._addAlgorithm(function(f,m,g){var w=f.key;if(typeof w!="string")return!1;var v=i(w);if(t(v,c,y))return!0;for(var E=null,D=y;D<d;++D){var b=NM(w,v,a[D],c[D],s,u);b===null&&E===null?y=D+1:(E===null||s(E,b)>0)&&(E=b)}return m(E!==null?function(){f.continue(E+l)}:g),!1}),p}function ur(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ub(e){return{type:1,lower:e,upper:e}}var hu=class{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||o)&&!(r&&o)?ni(this):new this.Collection(this,()=>ur(t,n,!r,!o))}catch{return Dt(this,Sn)}}equals(t){return t==null?Dt(this,Sn):new this.Collection(this,()=>Ub(t))}above(t){return t==null?Dt(this,Sn):new this.Collection(this,()=>ur(t,void 0,!0))}aboveOrEqual(t){return t==null?Dt(this,Sn):new this.Collection(this,()=>ur(t,void 0,!1))}below(t){return t==null?Dt(this,Sn):new this.Collection(this,()=>ur(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Dt(this,Sn):new this.Collection(this,()=>ur(void 0,t))}startsWith(t){return typeof t!="string"?Dt(this,Bb):this.between(t,t+Zr,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Jc(this,(n,r)=>n.indexOf(r[0])===0,[t],Zr)}equalsIgnoreCase(t){return Jc(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=An.apply(ri,arguments);return t.length===0?ni(this):Jc(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=An.apply(ri,arguments);return t.length===0?ni(this):Jc(this,(n,r)=>r.some(o=>n.indexOf(o)===0),t,Zr)}anyOf(){let t=An.apply(ri,arguments),n=this._cmp;try{t.sort(n)}catch{return Dt(this,Sn)}if(t.length===0)return ni(this);let r=new this.Collection(this,()=>ur(t[0],t[t.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let o=0;return r._addAlgorithm((i,s,a)=>{let c=i.key;for(;n(c,t[o])>0;)if(++o,o===t.length)return s(a),!1;return n(c,t[o])===0?!0:(s(()=>{i.continue(t[o])}),!1)}),r}notEqual(t){return this.inAnyRange([[zh,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let t=An.apply(ri,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Dt(this,Sn)}let n=t.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[zh,o]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){let r=this._cmp,o=this._ascending,i=this._descending,s=this._min,a=this._max;if(t.length===0)return ni(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&o(E[0],E[1])<=0))return Dt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument);let c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;function l(E,D){let b=0,I=E.length;for(;b<I;++b){let _=E[b];if(r(D[0],_[1])<0&&r(D[1],_[0])>0){_[0]=s(_[0],D[0]),_[1]=a(_[1],D[1]);break}}return b===I&&E.push(D),E}let d=o;function h(E,D){return d(E[0],D[0])}let p;try{p=t.reduce(l,[]),p.sort(h)}catch{return Dt(this,Sn)}let y=0,f=u?E=>o(E,p[y][1])>0:E=>o(E,p[y][1])>=0,m=c?E=>i(E,p[y][0])>0:E=>i(E,p[y][0])>=0;function g(E){return!f(E)&&!m(E)}let w=f,v=new this.Collection(this,()=>ur(p[0][0],p[p.length-1][1],!c,!u));return v._ondirectionchange=E=>{E==="next"?(w=f,d=o):(w=m,d=i),p.sort(h)},v._addAlgorithm((E,D,b)=>{for(var I=E.key;w(I);)if(++y,y===p.length)return D(b),!1;return g(I)?!0:(this._cmp(I,p[y][1])===0||this._cmp(I,p[y][0])===0||D(()=>{d===o?E.continue(p[y][0]):E.continue(p[y][1])}),!1)}),v}startsWithAnyOf(){let t=An.apply(ri,arguments);return t.every(n=>typeof n=="string")?t.length===0?ni(this):this.inAnyRange(t.map(n=>[n,n+Zr])):Dt(this,"startsWithAnyOf() only works with strings")}};function RM(e){return Cs(hu.prototype,function(n,r,o){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o};let i=e._deps.indexedDB;if(!i)throw new $.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(s,a)=>i.cmp(a,s),this._max=(s,a)=>i.cmp(s,a)>0?s:a,this._min=(s,a)=>i.cmp(s,a)<0?s:a,this._IDBKeyRange=e._deps.IDBKeyRange})}function on(e){return me(function(t){return ys(t),e(t.target.error),!1})}function ys(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ws="storagemutated",dr="x-storagemutated-1",pr=_s(null,ws),Yh=class{_lock(){return us(!j.global),++this._reculock,this._reculock===1&&!j.global&&(j.lockOwnerFor=this),this}_unlock(){if(us(!j.global),--this._reculock===0)for(j.global||(j.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{li(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&j.lockOwnerFor!==this}create(t){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(us(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new $.DatabaseClosed(r);case"MissingAPIError":throw new $.MissingAPI(r.message,r);default:throw new $.OpenFailed(r)}if(!this.active)throw new $.TransactionInactive;return us(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=me(o=>{ys(o),this._reject(t.error)}),t.onabort=me(o=>{ys(o),this.active&&this._reject(new $.Abort(t.error)),this.active=!1,this.on("abort").fire(o)}),t.oncomplete=me(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&pr.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Oe(new $.ReadOnly("Transaction is readonly"));if(!this.active)return Oe(new $.TransactionInactive);if(this._locked())return new F((i,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(i,s)},j])});if(r)return fr(()=>{var i=new F((s,a)=>{this._lock();let c=n(s,a,this);c&&c.then&&c.then(s,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var o=new F((i,s)=>{var a=n(i,s,this);a&&a.then&&a.then(i,s)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();let r=F.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var i=n._waitingFor;return new F((s,a)=>{r.then(c=>n._waitingQueue.push(me(s.bind(null,c))),c=>n._waitingQueue.push(me(a.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $.Abort))}table(t){let n=this._memoizedTables||(this._memoizedTables={});if(xt(n,t))return n[t];let r=this.schema[t];if(!r)throw new $.NotFound("Table "+t+" not part of transaction");let o=new this.db.Table(t,r,this);return o.core=this.db.core.table(t),n[t]=o,o}};function kM(e){return Cs(Yh.prototype,function(n,r,o,i,s){this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=_s(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F((a,c)=>{this._resolve=a,this._reject=c}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var c=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):c&&this.idbtrans&&this.idbtrans.abort(),Oe(a)})})}function Zh(e,t,n,r,o,i,s){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+$b(t)}}function $b(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Hb(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Eb(n,r=>[r.name,r])}}function OM(e){return e.length===1?e[0]:e}var vs=e=>{try{return e.only([[]]),vs=()=>[[]],[[]]}catch{return vs=()=>Zr,Zr}};function Qh(e){return e==null?()=>{}:typeof e=="string"?PM(e):t=>Nn(t,e)}function PM(e){return e.split(".").length===1?n=>n[e]:n=>Nn(n,e)}function gb(e){return[].slice.call(e)}var LM=0;function hs(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function FM(e,t,n){function r(l,d){let h=gb(l.objectStoreNames);return{schema:{name:l.name,tables:h.map(p=>d.objectStore(p)).map(p=>{let{keyPath:y,autoIncrement:f}=p,m=Qe(y),g=y==null,w={},v={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:m,keyPath:y,autoIncrement:f,unique:!0,extractKey:Qh(y)},indexes:gb(p.indexNames).map(E=>p.index(E)).map(E=>{let{name:D,unique:b,multiEntry:I,keyPath:_}=E,B=Qe(_),N={name:D,compound:B,keyPath:_,unique:b,multiEntry:I,extractKey:Qh(_)};return w[hs(_)]=N,N}),getIndexByKeyPath:E=>w[hs(E)]};return w[":id"]=v.primaryKey,y!=null&&(w[hs(y)]=v.primaryKey),v})},hasGetAll:h.length>0&&"getAll"in d.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:d,upper:h,lowerOpen:p,upperOpen:y}=l;return d===void 0?h===void 0?null:t.upperBound(h,!!y):h===void 0?t.lowerBound(d,!!p):t.bound(d,h,!!p,!!y)}function i(l){let d=l.name;function h({trans:f,type:m,keys:g,values:w,range:v}){return new Promise((E,D)=>{E=me(E);let b=f.objectStore(d),I=b.keyPath==null,_=m==="put"||m==="add";if(!_&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);let{length:B}=g||w||{length:1};if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});let N,S=[],G=[],L=0,M=C=>{++L,ys(C)};if(m==="deleteRange"){if(v.type===4)return E({numFailures:L,failures:G,results:[],lastResult:void 0});v.type===3?S.push(N=b.clear()):S.push(N=b.delete(o(v)))}else{let[C,R]=_?I?[w,g]:[w,null]:[g,null];if(_)for(let P=0;P<B;++P)S.push(N=R&&R[P]!==void 0?b[m](C[P],R[P]):b[m](C[P])),N.onerror=M;else for(let P=0;P<B;++P)S.push(N=b[m](C[P])),N.onerror=M}let x=C=>{let R=C.target.result;S.forEach((P,U)=>P.error!=null&&(G[U]=P.error)),E({numFailures:L,failures:G,results:m==="delete"?g:S.map(P=>P.result),lastResult:R})};N.onerror=C=>{M(C),x(C)},N.onsuccess=x})}function p({trans:f,values:m,query:g,reverse:w,unique:v}){return new Promise((E,D)=>{E=me(E);let{index:b,range:I}=g,_=f.objectStore(d),B=b.isPrimaryKey?_:_.index(b.name),N=w?v?"prevunique":"prev":v?"nextunique":"next",S=m||!("openKeyCursor"in B)?B.openCursor(o(I),N):B.openKeyCursor(o(I),N);S.onerror=on(D),S.onsuccess=me(G=>{let L=S.result;if(!L){E(null);return}L.___id=++LM,L.done=!1;let M=L.continue.bind(L),x=L.continuePrimaryKey;x&&(x=x.bind(L));let C=L.advance.bind(L),R=()=>{throw new Error("Cursor not started")},P=()=>{throw new Error("Cursor not stopped")};L.trans=f,L.stop=L.continue=L.continuePrimaryKey=L.advance=R,L.fail=me(D),L.next=function(){let U=1;return this.start(()=>U--?this.continue():this.stop()).then(()=>this)},L.start=U=>{let Y=new Promise((ne,ye)=>{ne=me(ne),S.onerror=on(ye),L.fail=ye,L.stop=ve=>{L.stop=L.continue=L.continuePrimaryKey=L.advance=P,ne(ve)}}),X=()=>{if(S.result)try{U()}catch(ne){L.fail(ne)}else L.done=!0,L.start=()=>{throw new Error("Cursor behind last entry")},L.stop()};return S.onsuccess=me(ne=>{S.onsuccess=X,X()}),L.continue=M,L.continuePrimaryKey=x,L.advance=C,X(),Y},E(L)},D)})}function y(f){return m=>new Promise((g,w)=>{g=me(g);let{trans:v,values:E,limit:D,query:b}=m,I=D===1/0?void 0:D,{index:_,range:B}=b,N=v.objectStore(d),S=_.isPrimaryKey?N:N.index(_.name),G=o(B);if(D===0)return g({result:[]});if(f){let L=E?S.getAll(G,I):S.getAllKeys(G,I);L.onsuccess=M=>g({result:M.target.result}),L.onerror=on(w)}else{let L=0,M=E||!("openKeyCursor"in S)?S.openCursor(G):S.openKeyCursor(G),x=[];M.onsuccess=C=>{let R=M.result;if(!R)return g({result:x});if(x.push(E?R.value:R.primaryKey),++L===D)return g({result:x});R.continue()},M.onerror=on(w)}})}return{name:d,schema:l,mutate:h,getMany({trans:f,keys:m}){return new Promise((g,w)=>{g=me(g);let v=f.objectStore(d),E=m.length,D=new Array(E),b=0,I=0,_,B=S=>{let G=S.target;(D[G._pos]=G.result)!=null,++I===b&&g(D)},N=on(w);for(let S=0;S<E;++S)m[S]!=null&&(_=v.get(m[S]),_._pos=S,_.onsuccess=B,_.onerror=N,++b);b===0&&g(D)})},get({trans:f,key:m}){return new Promise((g,w)=>{g=me(g);let E=f.objectStore(d).get(m);E.onsuccess=D=>g(D.target.result),E.onerror=on(w)})},query:y(a),openCursor:p,count({query:f,trans:m}){let{index:g,range:w}=f;return new Promise((v,E)=>{let D=m.objectStore(d),b=g.isPrimaryKey?D:D.index(g.name),I=o(w),_=I?b.count(I):b.count();_.onsuccess=me(B=>v(B.target.result)),_.onerror=on(E)})}}}let{schema:s,hasGetAll:a}=r(e,n),c=s.tables.map(l=>i(l)),u={};return c.forEach(l=>u[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!u[l])throw new Error(`Table '${l}' not found`);return u[l]},MIN_KEY:-1/0,MAX_KEY:vs(t),schema:s}}function BM(e,t){return t.reduce((n,{create:r})=>T(T({},n),r(n)),e)}function VM(e,t,{IDBKeyRange:n,indexedDB:r},o){return{dbcore:BM(FM(t,n,o),e.dbcore)}}function gp({_novip:e},t){let n=t.db,r=VM(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(o=>{let i=o.name;e.core.schema.tables.some(s=>s.name===i)&&(o.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=o.core))})}function pu({_novip:e},t,n,r){n.forEach(o=>{let i=r[o];t.forEach(s=>{let a=ap(s,o);(!a||"value"in a&&a.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Rn(s,o,{get(){return this.table(o)},set(c){wb(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new e.Table(o,i))})})}function Xh({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function jM(e,t){return e._cfg.version-t._cfg.version}function UM(e,t,n,r){let o=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(r);let s=i._reject.bind(i),a=j.transless||j;fr(()=>{j.trans=i,j.transless=a,t===0?(_e(o).forEach(c=>{mp(n,c,o[c].primKey,o[c].indexes)}),gp(e,n),F.follow(()=>e.on.populate.fire(i)).catch(s)):$M(e,t,i,n).catch(s)})}function $M({_novip:e},t,n,r){let o=[],i=e._versions,s=e._dbSchema=yp(e,e.idbdb,r),a=!1;i.filter(l=>l._cfg.version>=t).forEach(l=>{o.push(()=>{let d=s,h=l._cfg.dbschema;ep(e,d,r),ep(e,h,r),s=e._dbSchema=h;let p=Gb(d,h);p.add.forEach(f=>{mp(r,f[0],f[1].primKey,f[1].indexes)}),p.change.forEach(f=>{if(f.recreate)throw new $.Upgrade("Not yet support for changing primary key");{let m=r.objectStore(f.name);f.add.forEach(g=>Jh(m,g)),f.change.forEach(g=>{m.deleteIndex(g.name),Jh(m,g)}),f.del.forEach(g=>m.deleteIndex(g))}});let y=l._cfg.contentUpgrade;if(y&&l._cfg.version>t){gp(e,r),n._memoizedTables={},a=!0;let f=Db(h);p.del.forEach(v=>{f[v]=d[v]}),Xh(e,[e.Transaction.prototype]),pu(e,[e.Transaction.prototype],_e(f),f),n.schema=f;let m=cp(y);m&&ui();let g,w=F.follow(()=>{if(g=y(n),g&&m){var v=kn.bind(null,null);g.then(v,v)}});return g&&typeof g.then=="function"?F.resolve(g):w.then(()=>g)}}),o.push(d=>{if(!a||!bM){let h=l._cfg.dbschema;GM(h,d)}Xh(e,[e.Transaction.prototype]),pu(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function u(){return o.length?F.resolve(o.shift()(n.idbtrans)).then(u):F.resolve()}return u().then(()=>{HM(s,r)})}function Gb(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let o=e[r],i=t[r];if(!o)n.add.push([r,i]);else{let s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!vu)s.recreate=!0,n.change.push(s);else{let a=o.idxByName,c=i.idxByName,u;for(u in a)c[u]||s.del.push(u);for(u in c){let l=a[u],d=c[u];l?l.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function mp(e,t,n,r){let o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Jh(o,i)),o}function HM(e,t){_e(e).forEach(n=>{t.db.objectStoreNames.contains(n)||mp(t,n,e[n].primKey,e[n].indexes)})}function GM(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function Jh(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function yp(e,t,n){let r={};return yu(t.objectStoreNames,0).forEach(i=>{let s=n.objectStore(i),a=s.keyPath,c=Zh($b(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),u=[];for(let d=0;d<s.indexNames.length;++d){let h=s.index(s.indexNames[d]);a=h.keyPath;var l=Zh(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);u.push(l)}r[i]=Hb(i,c,u)}),r}function WM({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=yp(e,t,n);e._storeNames=yu(t.objectStoreNames,0),pu(e,[e._allTables],_e(r),r)}function zM(e,t){let n=yp(e,e.idbdb,t),r=Gb(n,e._dbSchema);return!(r.add.length||r.change.some(o=>o.add.length||o.change.length))}function ep({_novip:e},t,n){let r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){let i=r[o],s=n.objectStore(i);e._hasGetAll="getAll"in s;for(let a=0;a<s.indexNames.length;++a){let c=s.indexNames[a],u=s.index(c).keyPath,l=typeof u=="string"?u:"["+yu(u).join("+")+"]";if(t[i]){let d=t[i].idxByName[l];d&&(d.name=c,delete t[i].idxByName[l],t[i].idxByName[c]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&pe.WorkerGlobalScope&&pe instanceof pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function qM(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Zh(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Qe(o),n===0)})}var tp=class{_parseStoresSpec(t,n){_e(t).forEach(r=>{if(t[r]!==null){var o=qM(t[r]),i=o.shift();if(i.multi)throw new $.Schema("Primary key cannot be multi-valued");o.forEach(s=>{if(s.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string")}),n[r]=Hb(r,i,o)}})}stores(t){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?rt(this._cfg.storesSource,t):t;let r=n._versions,o={},i={};return r.forEach(s=>{rt(o,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(o,i)}),n._dbSchema=i,Xh(n,[n._allTables,n,n.Transaction.prototype]),pu(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],_e(i),i),n._storeNames=_e(i),this}upgrade(t){return this._cfg.contentUpgrade=dp(this._cfg.contentUpgrade||ue,t),this}};function KM(e){return Cs(tp.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function wp(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new si(bu,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function vp(e){return e&&typeof e.databases=="function"}function YM({indexedDB:e,IDBKeyRange:t}){return vp(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==bu)):wp(e,t).toCollection().primaryKeys()}function ZM({indexedDB:e,IDBKeyRange:t},n){!vp(e)&&n!==bu&&wp(e,t).put({name:n}).catch(ue)}function QM({indexedDB:e,IDBKeyRange:t},n){!vp(e)&&n!==bu&&wp(e,t).delete(n).catch(ue)}function np(e){return fr(function(){return j.letThrough=!0,e()})}function XM(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function JM(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Oe(t.dbOpenError):e);sn&&(t.openCanceller._stackHolder=to()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new $.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,s=null,a=!1,c=()=>new F((u,l)=>{if(o(),!n)throw new $.MissingAPI;let d=e.name,h=t.autoSchema?n.open(d):n.open(d,Math.round(e.verno*10));if(!h)throw new $.MissingAPI;h.onerror=on(l),h.onblocked=me(e._fireOnBlocked),h.onupgradeneeded=me(p=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=ys,s.abort(),h.result.close();let f=n.deleteDatabase(d);f.onsuccess=f.onerror=me(()=>{l(new $.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=on(l);var y=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;a=y<1,e._novip.idbdb=h.result,UM(e,y/10,s,l)}},l),h.onsuccess=me(()=>{s=null;let p=e._novip.idbdb=h.result,y=yu(p.objectStoreNames);if(y.length>0)try{let f=p.transaction(OM(y),"readonly");t.autoSchema?WM(e,p,f):(ep(e,e._dbSchema,f),zM(e,f)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),gp(e,f)}catch{}fs.push(e),p.onversionchange=me(f=>{t.vcFired=!0,e.on("versionchange").fire(f)}),p.onclose=me(f=>{e.on("close").fire(f)}),a&&ZM(e._deps,d),u()},l)}).catch(u=>u&&u.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):F.reject(u));return F.race([r,(typeof navigator>"u"?F.resolve():XM()).then(c)]).then(()=>(o(),t.onReadyBeingFired=[],F.resolve(np(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let l=t.onReadyBeingFired.reduce(dp,ue);return t.onReadyBeingFired=[],F.resolve(np(()=>l(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Oe(u)}).finally(()=>{t.openComplete=!0,i()})}function rp(e){var t=s=>e.next(s),n=s=>e.throw(s),r=i(t),o=i(n);function i(s){return a=>{var c=s(a),u=c.value;return c.done?u:!u||typeof u.then!="function"?Qe(u)?Promise.all(u).then(r,o):r(u):u.then(r,o)}}return i(t)()}function e1(e,t,n){var r=arguments.length;if(r<2)throw new $.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var i=xb(o);return[e,i,n]}function Wb(e,t,n,r,o){return F.resolve().then(()=>{let i=j.transless||j,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:i};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(d){return d.name===lp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Wb(e,t,n,null,o))):Oe(d)}let c=cp(o);c&&ui();let u,l=F.follow(()=>{if(u=o.call(s,s),u)if(c){var d=kn.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=rp(u))},a);return(u&&typeof u.then=="function"?F.resolve(u).then(d=>s.active?d:Oe(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):l.then(()=>u)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Oe(d)))})}function eu(e,t,n){let r=Qe(e)?e.slice():[e];for(let o=0;o<n;++o)r.push(t);return r}function t1(e){return V(T({},e),{table(t){let n=e.table(t),{schema:r}=n,o={},i=[];function s(h,p,y){let f=hs(h),m=o[f]=o[f]||[],g=h==null?0:typeof h=="string"?1:h.length,w=p>0,v=V(T({},y),{isVirtual:w,keyTail:p,keyLength:g,extractKey:Qh(h),unique:!w&&y.unique});if(m.push(v),v.isPrimaryKey||i.push(v),g>1){let E=g===2?h[0]:h.slice(0,g-1);s(E,p+1,y)}return m.sort((E,D)=>E.keyTail-D.keyTail),v}let a=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[a];for(let h of r.indexes)s(h.keyPath,0,h);function c(h){let p=o[hs(h)];return p&&p[0]}function u(h,p){return{type:h.type===1?2:h.type,lower:eu(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:eu(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0}}function l(h){let p=h.query.index;return p.isVirtual?V(T({},h),{query:{index:p,range:u(h.query.range,p.keyTail)}}):h}return V(T({},n),{schema:V(T({},r),{primaryKey:a,indexes:i,getIndexByKeyPath:c}),count(h){return n.count(l(h))},query(h){return n.query(l(h))},openCursor(h){let{keyTail:p,isVirtual:y,keyLength:f}=h.query.index;if(!y)return n.openCursor(h);function m(g){function w(E){E!=null?g.continue(eu(E,h.reverse?e.MAX_KEY:e.MIN_KEY,p)):h.unique?g.continue(g.key.slice(0,f).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,p)):g.continue()}return Object.create(g,{continue:{value:w},continuePrimaryKey:{value(E,D){g.continuePrimaryKey(eu(E,e.MAX_KEY,p),D)}},primaryKey:{get(){return g.primaryKey}},key:{get(){let E=g.key;return f===1?E[0]:E.slice(0,f)}},value:{get(){return g.value}}})}return n.openCursor(l(h)).then(g=>g&&m(g))}})}})}var n1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:t1};function bp(e,t,n,r){return n=n||{},r=r||"",_e(e).forEach(o=>{if(!xt(t,o))n[r+o]=void 0;else{var i=e[o],s=t[o];if(typeof i=="object"&&typeof s=="object"&&i&&s){let a=Oh(i),c=Oh(s);a!==c?n[r+o]=t[o]:a==="Object"?bp(i,s,n,r+o+"."):i!==s&&(n[r+o]=t[o])}else i!==s&&(n[r+o]=t[o])}}),_e(t).forEach(o=>{xt(e,o)||(n[r+o]=t[o])}),n}function r1(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var o1={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>V(T({},e),{table(t){let n=e.table(t),{primaryKey:r}=n.schema;return V(T({},n),{mutate(i){let s=j.trans,{deleting:a,creating:c,updating:u}=s.table(t).hook;switch(i.type){case"add":if(c.fire===ue)break;return s._promise("readwrite",()=>l(i),!0);case"put":if(c.fire===ue&&u.fire===ue)break;return s._promise("readwrite",()=>l(i),!0);case"delete":if(a.fire===ue)break;return s._promise("readwrite",()=>l(i),!0);case"deleteRange":if(a.fire===ue)break;return s._promise("readwrite",()=>d(i),!0)}return n.mutate(i);function l(p){let y=j.trans,f=p.keys||r1(r,p);if(!f)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?V(T({},p),{keys:f}):T({},p),p.type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),i1(n,p,f).then(m=>{let g=f.map((w,v)=>{let E=m[v],D={onerror:null,onsuccess:null};if(p.type==="delete")a.fire.call(D,w,E,y);else if(p.type==="add"||E===void 0){let b=c.fire.call(D,w,p.values[v],y);w==null&&b!=null&&(w=b,p.keys[v]=w,r.outbound||zt(p.values[v],r.keyPath,w))}else{let b=bp(E,p.values[v]),I=u.fire.call(D,b,w,E,y);if(I){let _=p.values[v];Object.keys(I).forEach(B=>{xt(_,B)?_[B]=I[B]:zt(_,B,I[B])})}}return D});return n.mutate(p).then(({failures:w,results:v,numFailures:E,lastResult:D})=>{for(let b=0;b<f.length;++b){let I=v?v[b]:f[b],_=g[b];I==null?_.onerror&&_.onerror(w[b]):_.onsuccess&&_.onsuccess(p.type==="put"&&m[b]?p.values[b]:I)}return{failures:w,results:v,numFailures:E,lastResult:D}}).catch(w=>(g.forEach(v=>v.onerror&&v.onerror(w)),Promise.reject(w)))})}function d(p){return h(p.trans,p.range,1e4)}function h(p,y,f){return n.query({trans:p,values:!1,query:{index:r,range:y},limit:f}).then(({result:m})=>l({type:"delete",keys:m,trans:p}).then(g=>g.numFailures>0?Promise.reject(g.failures[0]):m.length<f?{failures:[],numFailures:0,lastResult:void 0}:h(p,V(T({},y),{lower:m[m.length-1],lowerOpen:!0}),f)))}}})}})};function i1(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function zb(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let o=0,i=0;o<t.keys.length&&i<e.length;++o)nt(t.keys[o],e[i])===0&&(r.push(n?Es(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch{return null}}var s1={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return V(T({},n),{getMany:r=>{if(!r.cache)return n.getMany(r);let o=zb(r.keys,r.trans._cache,r.cache==="clone");return o?F.resolve(o):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Es(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))})}})};function Ep(e){return!("from"in e)}var Tn=function(e,t){if(this)rt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new Tn;return e&&"d"in e&&rt(n,e),n}};ii(Tn.prototype,{add(e){return gu(this,e),this},addKey(e){return bs(this,e,e),this},addKeys(e){return e.forEach(t=>bs(this,t,t)),this},[Ph](){return op(this)}});function bs(e,t,n){let r=nt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Ep(e))return rt(e,{from:t,to:n,d:1});let o=e.l,i=e.r;if(nt(n,e.from)<0)return o?bs(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},mb(e);if(nt(t,e.to)>0)return i?bs(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},mb(e);nt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),nt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let s=!e.r;o&&!e.l&&gu(e,o),i&&s&&gu(e,i)}function gu(e,t){function n(r,{from:o,to:i,l:s,r:a}){bs(r,o,i),s&&n(r,s),a&&n(r,a)}Ep(t)||n(e,t)}function a1(e,t){let n=op(t),r=n.next();if(r.done)return!1;let o=r.value,i=op(e),s=i.next(o.from),a=s.value;for(;!r.done&&!s.done;){if(nt(a.from,o.to)<=0&&nt(a.to,o.from)>=0)return!0;nt(o.from,a.from)<0?o=(r=n.next(a.from)).value:a=(s=i.next(o.from)).value}return!1}function op(e){let t=Ep(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&nt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||nt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function mb(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){let i=o==="r"?"l":"r",s=T({},e),a=e[o];e.from=a.from,e.to=a.to,e[o]=a[o],s[o]=a[i],e[i]=s,s.d=yb(s)}e.d=yb(e)}function yb({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var c1={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new Tn(e.MIN_KEY,e.MAX_KEY);return V(T({},e),{table:r=>{let o=e.table(r),{schema:i}=o,{primaryKey:s}=i,{extractKey:a,outbound:c}=s,u=V(T({},o),{mutate:h=>{let p=h.trans,y=p.mutatedParts||(p.mutatedParts={}),f=b=>{let I=`idb://${t}/${r}/${b}`;return y[I]||(y[I]=new Tn)},m=f(""),g=f(":dels"),{type:w}=h,[v,E]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],D=h.trans._cache;return o.mutate(h).then(b=>{if(Qe(v)){w!=="delete"&&(v=b.results),m.addKeys(v);let I=zb(v,D);!I&&w!=="add"&&g.addKeys(v),(I||E)&&u1(f,i,I,E)}else if(v){let I={from:v.lower,to:v.upper};g.add(I),m.add(I)}else m.add(n),g.add(n),i.indexes.forEach(I=>f(I.name).add(n));return b})}}),l=({query:{index:h,range:p}})=>{var y,f;return[h,new Tn((y=p.lower)!==null&&y!==void 0?y:e.MIN_KEY,(f=p.upper)!==null&&f!==void 0?f:e.MAX_KEY)]},d={get:h=>[s,new Tn(h.key)],getMany:h=>[s,new Tn().addKeys(h.keys)],count:l,query:l,openCursor:l};return _e(d).forEach(h=>{u[h]=function(p){let{subscr:y}=j;if(y){let f=E=>{let D=`idb://${t}/${r}/${E}`;return y[D]||(y[D]=new Tn)},m=f(""),g=f(":dels"),[w,v]=d[h](p);if(f(w.name||"").add(v),!w.isPrimaryKey)if(h==="count")g.add(n);else{let E=h==="query"&&c&&p.values&&o.query(V(T({},p),{values:!1}));return o[h].apply(this,arguments).then(D=>{if(h==="query"){if(c&&p.values)return E.then(({result:I})=>(m.addKeys(I),D));let b=p.values?D.result.map(a):D.result;p.values?m.addKeys(b):g.addKeys(b)}else if(h==="openCursor"){let b=D,I=p.values;return b&&Object.create(b,{key:{get(){return g.addKey(b.primaryKey),b.key}},primaryKey:{get(){let _=b.primaryKey;return g.addKey(_),_}},value:{get(){return I&&m.addKey(b.primaryKey),b.value}}})}return D})}}return o[h].apply(this,arguments)}}),u}})}};function u1(e,t,n,r){function o(i){let s=e(i.name||"");function a(u){return u!=null?i.extractKey(u):null}let c=u=>i.multiEntry&&Qe(u)?u.forEach(l=>s.addKey(l)):s.addKey(u);(n||r).forEach((u,l)=>{let d=n&&a(n[l]),h=r&&a(r[l]);nt(d,h)!==0&&(d!=null&&c(d),h!=null&&c(h))})}t.indexes.forEach(o)}var si=class e{constructor(t,n){this._middlewares={},this.verno=0;let r=e.dependencies;this._options=n=T({addons:e.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:o}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};i.dbReadyPromise=new F(s=>{i.dbReadyResolve=s}),i.openCanceller=new F((s,a)=>{i.cancelOpen=a}),this._state=i,this.name=t,this.on=_s(this,"populate","blocked","versionchange","close",{ready:[dp,ue]}),this.on.ready.subscribe=vb(this.on.ready.subscribe,s=>(a,c)=>{e.vip(()=>{let u=this._state;if(u.openComplete)u.dbOpenError||F.resolve().then(a),c&&s(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&s(a);else{s(a);let l=this;c||s(function d(){l.on.ready.unsubscribe(a),l.on.ready.unsubscribe(d)})}})}),this.Collection=CM(this),this.Table=DM(this),this.Transaction=kM(this),this.Version=KM(this),this.WhereClause=RM(this),this.on("versionchange",s=>{s.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",s=>{!s.newVersion||s.newVersion<s.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${s.oldVersion/10}`)}),this._maxKey=vs(n.IDBKeyRange),this._createTransaction=(s,a,c,u)=>new this.Transaction(s,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=s=>{this.on("blocked").fire(s),fs.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(s))},this.use(n1),this.use(o1),this.use(c1),this.use(s1),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(s=>s(this))}version(t){if(isNaN(t)||t<.1)throw new $.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);let n=this._versions;var r=n.filter(o=>o._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(jM),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||j.letThrough||this._vip)?t():new F((n,r)=>{if(this._state.openComplete)return r(new $.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new $.DatabaseClosed);return}this.open().catch(ue)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:o}){o&&this.unuse({stack:t,name:o});let i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:r??10,name:o}),i.sort((s,a)=>s.level-a.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(o=>r?o.create!==r:n?o.name!==n:!1)),this}open(){return JM(this)}_close(){let t=this._state,n=fs.indexOf(this);if(n>=0&&fs.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new F(r=>{t.dbReadyResolve=r}),t.openCanceller=new F((r,o)=>{t.cancelOpen=o})}close(){this._close();let t=this._state;this._options.autoOpen=!1,t.dbOpenError=new $.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){let t=arguments.length>0,n=this._state;return new F((r,o)=>{let i=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=me(()=>{QM(this._deps,this.name),r()}),s.onerror=on(o),s.onblocked=this._fireOnBlocked};if(t)throw new $.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return _e(this._allTables).map(t=>this._allTables[t])}transaction(){let t=e1.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let o=j.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);let i=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");let s,a;try{if(a=n.map(u=>{var l=u instanceof this.Table?u.name:u;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===Th)s=Th;else if(t=="rw"||t==Ah)s=Ah;else throw new $.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===Th&&s===Ah)if(i)o=null;else throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&a.forEach(u=>{if(o&&o.storeNames.indexOf(u)===-1)if(i)o=null;else throw new $.SubTransaction("Table "+u+" not included in parent transaction.")}),i&&o&&!o.active&&(o=null)}}catch(u){return o?o._promise(null,(l,d)=>{d(u)}):Oe(u)}let c=Wb.bind(null,this,s,a,o,r);return o?o._promise(s,c,"lock"):j.trans?li(j.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!xt(this._allTables,t))throw new $.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}},l1=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ip=class{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)}[l1](){return this}};function qb(e,t){return _e(t).forEach(n=>{let r=e[n]||(e[n]=new Tn);gu(r,t[n])}),e}function d1(e){let t=!1,n,r=new ip(o=>{let i=cp(e);function s(m){i&&ui();let g=()=>fr(e,{subscr:m,trans:null}),w=j.trans?li(j.transless,g):g();return i&&w.then(kn,kn),w}let a=!1,c={},u={},l={get closed(){return a},unsubscribe:()=>{a=!0,pr.storagemutated.unsubscribe(y)}};o.start&&o.start(l);let d=!1,h=!1;function p(){return _e(u).some(m=>c[m]&&a1(c[m],u[m]))}let y=m=>{qb(c,m),p()&&f()},f=()=>{if(d||a)return;c={};let m={},g=s(m);h||(pr(ws,y),h=!0),d=!0,Promise.resolve(g).then(w=>{t=!0,n=w,d=!1,!a&&(p()?f():(c={},u=m,o.next&&o.next(w)))},w=>{d=!1,t=!1,o.error&&o.error(w),l.unsubscribe()})};return f(),l});return r.hasValue=()=>t,r.getValue=()=>n,r}var sp;try{sp={indexedDB:pe.indexedDB||pe.mozIndexedDB||pe.webkitIndexedDB||pe.msIndexedDB,IDBKeyRange:pe.IDBKeyRange||pe.webkitIDBKeyRange}}catch{sp={indexedDB:null,IDBKeyRange:null}}var Yr=si;ii(Yr,V(T({},wu),{delete(e){return new Yr(e,{addons:[]}).delete()},exists(e){return new Yr(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return YM(Yr.dependencies).then(e)}catch{return Oe(new $.MissingAPI)}},defineClass(){function e(t){rt(this,t)}return e},ignoreTransaction(e){return j.trans?li(j.transless,e):e()},vip:np,async:function(e){return function(){try{var t=rp(e.apply(this,arguments));return!t||typeof t.then!="function"?F.resolve(t):t}catch(n){return Oe(n)}}},spawn:function(e,t,n){try{var r=rp(e.apply(n,t||[]));return!r||typeof r.then!="function"?F.resolve(r):r}catch(o){return Oe(o)}},currentTransaction:{get:()=>j.trans||null},waitFor:function(e,t){let n=F.resolve(typeof e=="function"?Yr.ignoreTransaction(e):e).timeout(t||6e4);return j.trans?j.trans.waitFor(n):n},Promise:F,debug:{get:()=>sn,set:e=>{_b(e,e==="dexie"?()=>!0:Vb)}},derive:ai,extend:rt,props:ii,override:vb,Events:_s,on:pr,liveQuery:d1,extendObservabilitySet:qb,getByKeyPath:Nn,setByKeyPath:zt,delByKeyPath:KA,shallowClone:Db,deepClone:Es,getObjectDiff:bp,cmp:nt,asap:bb,minKey:zh,addons:[],connections:fs,errnames:lp,dependencies:sp,semVer:lb,version:lb.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))}));Yr.maxKey=vs(Yr.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pr(ws,e=>{if(!Mn){let t;vu?(t=document.createEvent("CustomEvent"),t.initCustomEvent(dr,!0,!0,e)):t=new CustomEvent(dr,{detail:e}),Mn=!0,dispatchEvent(t),Mn=!1}}),addEventListener(dr,({detail:e})=>{Mn||mu(e)}));function mu(e){let t=Mn;try{Mn=!0,pr.storagemutated.fire(e)}finally{Mn=t}}var Mn=!1;if(typeof BroadcastChannel<"u"){let e=new BroadcastChannel(dr);typeof e.unref=="function"&&e.unref(),pr(ws,t=>{Mn||e.postMessage(t)}),e.onmessage=t=>{t.data&&mu(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){pr(ws,t=>{try{Mn||(typeof localStorage<"u"&&localStorage.setItem(dr,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:dr,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===dr){let n=JSON.parse(t.newValue);n&&mu(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",f1)}function f1({data:e}){e&&e.type===dr&&mu(e.changedParts)}F.rejectionMapper=rM;_b(sn,Vb);var Eu=class extends si{constructor(){super("wasmLlamaCpp"),this.version(1).stores({ggufModel:"id"})}};var Kb=(()=>{let t=class t{constructor(r){this.http=r,this.db=new Eu}haveModel(r){return le(this,null,function*(){return(yield this.db.ggufModel.where("id").equals(r).count())>0})}getModel(r,o){return le(this,null,function*(){let i=yield this.db.ggufModel.get(r);if(!i&&o){let s=yield this.downloadModel(o);i={id:r,bytes:s,size:s.byteLength},yield this.db.ggufModel.add(i)}return i})}downloadAndStoreModel(r,o){return le(this,null,function*(){let i=yield this.downloadModel(o),s={id:r,bytes:i,size:i.byteLength};yield this.db.ggufModel.add(s)})}downloadModel(r){return le(this,null,function*(){return Uu(this.http.get(r,{responseType:"arraybuffer"}))})}destroyModel(r){return le(this,null,function*(){yield this.db.ggufModel.where({id:r}).delete()})}};t.\u0275fac=function(o){return new(o||t)(ee(Tw))},t.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function p1(e,t){if(e&1){let n=Mo();k(0,"button",46),mt("click",function(){Hn(n);let o=mn();return Gn(o.downloadLLM())}),A(1," Download LLM "),O()}if(e&2){let n=mn();We("busy",n.busy.downloadLLM)}}function g1(e,t){if(e&1){let n=Mo();k(0,"button",47),mt("click",function(){Hn(n);let o=mn();return Gn(o.predict())}),A(1," Predict Private Key "),O()}if(e&2){let n=mn();We("busy",n.busy.predict)}}function m1(e,t){if(e&1){let n=Mo();k(0,"button",23),mt("click",function(){Hn(n);let o=mn();return Gn(o.closeLlama())}),A(1," Close Llama.cpp "),O()}if(e&2){let n=mn();We("busy",n.busy.close)}}function y1(e,t){if(e&1){let n=Mo();k(0,"button",48),mt("click",function(){Hn(n);let o=mn();return Gn(o.deleteLLM())}),A(1," Delete LLM "),O()}if(e&2){let n=mn();We("busy",n.busy.deleteLLM)}}var Yb=(()=>{let t=class t{constructor(r){this.modelService=r,this.inferencing=!1,this.numSamples=2,this.numThreads=navigator.hardwareConcurrency,this.bitcoinAddress=jc(),this.modelId="h2o-danube3-500m-base-Q4_K_M-GGUF",this.modelUrl="https://huggingface.co/lobkov/h2o-danube3-500m-base-Q4_K_M-GGUF/resolve/main/h2o-danube3-500m-base-q4_k_m.gguf?download=true",this.haveLLM=!1,this.wasm=new Yc("wasmLlamaCpp"),this.llama=new Qa(this.wasm),this.busy={downloadLLM:!1,deleteLLM:!1,genAddress:!1,predict:!1,close:!1}}ngOnInit(){return le(this,null,function*(){})}ngAfterViewInit(){return le(this,null,function*(){this.haveLLM=yield this.modelService.haveModel(this.modelId),setTimeout(()=>{this.haveLLM&&this.messageLog.log({text:"LLM is stored in the browser using IndexedDB.",type:"INFO"}),this.genAddress()}),yield this.wasm.init()})}ngOnDestroy(){this.llama.destroy()}downloadLLM(){return le(this,null,function*(){this.busy.downloadLLM=!0;let r=this.messageLog.log({text:"Downloading LLM... ",type:"INFO",pending:!0});try{yield this.modelService.downloadAndStoreModel(this.modelId,this.modelUrl),this.haveLLM=!0,this.messageLog.log({text:"LLM is stored in the browser using IndexedDB.",type:"INFO"}),r.text+="Done.",r.pending=!1}catch(o){this.messageLog.log({text:`Could not download model. ${o.statusText}`,type:"ERROR"}),r.pending=!1}this.busy.downloadLLM=!1})}deleteLLM(){return le(this,null,function*(){this.busy.deleteLLM=!0,yield this.modelService.destroyModel(this.modelId),this.haveLLM=!1,this.messageLog.log({text:"Deleted LLM from the browser IndexedDB store.",type:"INFO"}),this.busy.deleteLLM=!1})}genAddress(){this.busy.genAddress=!0,this.bitcoinAddress=jc(),this.messageLog.log({text:"Generated random Bitcoin address.",type:"INFO"}),this.busy.genAddress=!1}setInputAddress(r){let o=R0(r);this.bitcoinAddress.address=r,this.bitcoinAddress.privateKey=new Uint8Array,this.bitcoinAddress.privateKeyBase58="",o?(this.bitcoinAddress.format=o,this.messageLog.log({text:"Set new Bitcoin address.",type:"INFO"})):(this.bitcoinAddress.format=void 0,this.messageLog.log({text:"Invalid address format.",type:"ERROR"}))}predict(){return le(this,null,function*(){if(this.busy.predict=!0,!this.llama.cpp){let r=navigator.hardwareConcurrency,o=this.messageLog.log({text:`Initialising Llama.cpp (using ${r} threads)... `,type:"INFO",pending:!0});yield this.llama.init(r,this.messageLog),o.text+="Done.",o.pending=!1}if(!this.model){let r=this.messageLog.log({text:"Retrieving LLM from IndexedDB... ",type:"INFO",pending:!0});if(this.model=yield this.modelService.getModel(this.modelId),!this.model)this.messageLog.log({text:"Could not retrieve LLM from IndexedDB.",type:"ERROR"});else{r.text+="Done.",r.pending=!1;let o=this.messageLog.log({text:"Loading LLM... ",type:"INFO",pending:!0});yield this.llama.loadModel(this.model),this.model.bytes=new Uint8Array,o.text+="Done.",o.pending=!1}}this.model&&(yield this.inference()),this.busy.predict=!1})}closeLlama(){return le(this,null,function*(){if(!this.llama.cpp)return;this.busy.close=!0;let r=this.messageLog.log({text:"Freeing memory reserved for Llama.cpp ... ",type:"INFO",pending:!0});yield this.llama.destroy(this.model),this.model=void 0,r.text+="Done.",r.pending=!1,this.busy.close=!1})}inference(){return le(this,null,function*(){let r=this.buildPrompt(this.bitcoinAddress);this.messageLog.log({text:`Prompt: 
${r}`,type:"WARN"});let o=yield this.llama.predict(r),i=!1;this.bitcoinAddress.privateKeyBase58===""?(this.bitcoinAddress.privateKeyBase58=o,i=k0(this.bitcoinAddress)):o===this.bitcoinAddress.privateKeyBase58&&(i=!0),i?this.messageLog.log({text:"Private key matches the address! \u{1F601}",type:"SUCCESS"}):this.messageLog.log({text:"Private key does not match the address \u{1F61E}",type:"ERROR"})})}destroyModel(){this.model&&this.modelService.destroyModel(this.model.id)}buildPrompt(r){let o="";for(let i=0;i<this.numSamples;i++){let s=jc();o+=s.address+" "+s.privateKeyBase58+`
`}return o+=r.address+" ",o}};t.\u0275fac=function(o){return new(o||t)(te(Kb))},t.\u0275cmp=Ta({type:t,selectors:[["app-root"]],viewQuery:function(o,i){if(o&1&&tw(Ch,5),o&2){let s;nw(s=rw())&&(i.messageLog=s.first)}},standalone:!0,features:[$a],decls:166,vars:7,consts:[["messageLog",""],[1,"min-h-screen","dark:bg-neutral-900"],[1,"fixed","inset-x-0","bottom-0","bg-neutral-800","sm:relative","z-10"],[1,"mx-auto","justify-between","p-3","sm:flex","sm:max-w-4xl","sm:p-4"],["href","https://wow-l.uk/",1,"flex","no-underline","items-center"],["src","https://avatars.githubusercontent.com/u/7288833?v=4",1,"inline-block","w-8","object-cover","rounded-full","mr-3","border-2","border-gray-400"],[1,"text-lg","font-bold","text-white"],["id","main-content"],[1,"mx-auto","max-w-3xl","p-4","selection:bg-black","selection:text-white","mb-24","space-y-16"],[1,"mb-8","text-4xl","font-bold","dark:text-white","sm:mt-16"],[1,"mt-10","text-lg","dark:text-neutral-200"],[1,"mb-8","text-3xl","font-bold","dark:text-white","sm:mt-16"],[1,"space-y-4"],[1,"flex","items-end"],[1,"flex","flex-col","items-start","w-3/4"],["for","address",1,"text-lg","mb-2"],["id","address","type","text","placeholder","Bitcoin address to find the private key for",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","py-2","pl-2","pr-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-purple-500","w-full",3,"ngModelChange","ngModel"],[1,"flex","flex-col","items-end","w-1/4"],["for","few-shot",1,"text-lg","mb-2"],["id","few-shot","min","0","max","50","type","number",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","py-2","pl-2","pr-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-purple-500","w-16",3,"ngModelChange","ngModel"],[1,"flex","justify-between"],["progress","","title","Download LLM","class","positive",3,"busy","click",4,"ngIf"],["progress","","title","Predict Private Key","class","positive",3,"busy","click",4,"ngIf"],["progress","","title","Generate Address",1,"neutral",3,"click","busy"],[1,"flex","justify-end","min-h-[36px]"],["progress","","title","Generate Address","class","neutral",3,"busy","click",4,"ngIf"],["progress","","title","Delete LLM","class","negative",3,"busy","click",4,"ngIf"],["href","https://huggingface.co/h2oai/h2o-danube3-500m-base"],["href","https://huggingface.co/lobkov/h2o-danube3-500m-base-Q4_K_M-GGUF"],[1,"font-bold"],["href","https://emscripten.org/"],["href","https://github.com/ggerganov/llama.cpp"],[1,"rounded","bg-neutral-200/50","p-1"],["href","https://angular.dev/"],["href","https://tailwindcss.com/"],[1,"list-disc","text-lg","ml-8","mt-4"],["href","https://dexie.org/"],["href","https://en.wikipedia.org/wiki/Retrieval-augmented_generation"],["href","https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods"],["href","https://en.wikipedia.org/wiki/Hierarchical_Navigable_Small_World_graphs"],["href","https://en.wikipedia.org/wiki/Avalanche_effect","target","_blank"],[1,"mt-10","text-lg","dark:text-neutral-200","font-bold"],["href","https://arxiv.org/abs/2206.07682"],["href","https://en.wikipedia.org/wiki/Catastrophic_interference","target","_blank"],[1,"mt-10","bg-neutral-800","p-8","pb-20","sm:pb-8"],[1,"mx-auto","flex","flex-col","sm:max-w-4xl","sm:flex-row","sm:justify-between"],["progress","","title","Download LLM",1,"positive",3,"click","busy"],["progress","","title","Predict Private Key",1,"positive",3,"click","busy"],["progress","","title","Delete LLM",1,"negative",3,"click","busy"]],template:function(o,i){if(o&1){let s=Mo();k(0,"div",1)(1,"header",2)(2,"div",3)(3,"a",4),Pr(4,"img",5),k(5,"span",6),A(6,"WOW Look..."),O()()()(),k(7,"main",7)(8,"article",8)(9,"h1",9),A(10,"Using LLMs to Predict Bitcoin Private Keys "),O(),k(11,"p",10),A(12," Causal Large Language Models predict the next token in a sequence of previous tokens. We give an LLM a bitcoin public address and expect it to predict the secret private key that generated that address. "),O(),k(13,"section")(14,"h2",11),A(15,"Try it"),O(),k(16,"div",12)(17,"div",13)(18,"div",14)(19,"label",15),A(20," Bitcoin Address "),O(),k(21,"input",16),mt("ngModelChange",function(c){return Hn(s),Gn(i.setInputAddress(c))}),O()(),k(22,"div",17)(23,"label",18),A(24," Few-Shot Samples "),O(),k(25,"input",19),Od("ngModelChange",function(c){return Hn(s),ow(i.numSamples,c)||(i.numSamples=c),Gn(c)}),O()()(),k(26,"div",20),Or(27,p1,2,1,"button",21)(28,g1,2,1,"button",22),k(29,"button",23),mt("click",function(){return Hn(s),Gn(i.genAddress())}),A(30," Generate Address "),O()(),k(31,"div"),Pr(32,"message-log",null,0),O(),k(34,"div",24),Or(35,m1,2,1,"button",25)(36,y1,2,1,"button",26),O()()(),k(37,"section")(38,"h2",11),A(39,"How it works"),O(),k(40,"p",10),A(41," The LLM that is used is the "),k(42,"a",27),A(43,"Danube3 500 million parameter base model by H20"),O(),A(44,". It has been converted to GGUF format and quantized to 4 bits to reduce it's size to "),k(45,"a",28),A(46,"318mb"),O(),A(47,". "),k(48,"span",29),A(49,"It runs entirely in the browser, on the device"),O(),A(50,". "),O(),k(51,"p",10)(52,"a",30),A(53,"Emscripten"),O(),A(54," was used to build "),k(55,"a",31),A(56,"llama.cpp"),O(),A(57," as a static WebAssembly library (with SIMD and multi-thread support). This handles all the math operations in the layers of the model and is configured to use flash attention. "),O(),k(58,"p",10),A(59," The inference code is written in c++ and compiled to WebAssembly and javascript with the llama.cpp library using Emscripten. "),k(60,"kbd",32),A(61,"Embind"),O(),A(62," is used to bind C++ classes to javascript classes, which reduces developer code. The "),k(63,"kbd",32),A(64,"proxy.h"),O(),A(65," API is used with "),k(66,"kbd",32),A(67,"ASYNCIFY"),O(),A(68," and "),k(69,"kbd",32),A(70,"PROXY_TO_PTHREAD"),O(),A(71," flags to run the code asynchonously in one or more web workers. This stops the main javascript event loop being blocked by the heavy compute occuring when inferencing the model, which allows the UI to remain responsive. "),O(),k(72,"p",10),A(73," The web app is constucted using "),k(74,"a",33),A(75,"Angular"),O(),A(76," and "),k(77,"a",34),A(78,"Tailwind CSS"),O(),A(79,". "),O(),k(80,"p",10),A(81," A random Bitcoin address is generated (or provided by the user). The address can use any of these formats: "),O(),k(82,"ul",35)(83,"li"),A(84,'Public Key Hash (begins "1")'),O(),k(85,"li"),A(86,'Script Hash (begins "3")'),O(),k(87,"li"),A(88,'Witness Public Key Hash (begins "bc1q")'),O(),k(89,"li"),A(90,'Taproot (begins "bc1p")'),O()(),k(91,"p",10),A(92," The GGUF model file is downloaded from Hugging Face and kept in the browser IndexedDB store (using "),k(93,"a",36),A(94,"Dexie.js"),O(),A(95,"). "),O(),k(96,"p",10),A(97," The model file is passed to the WebAssembly module which loads it into RAM using llama.cpp. "),O(),k(98,"p",10),A(99,' A prompt for the LLM is generated with "few-shot" examples. Each example is on one line and contains the Bitcoin address and the corresponding base58 encoded private key. The final line contains only the target Bitcoin address. The expectation is that the LLM will predict the private key tokens that are absent for the target but present for the examples. '),O(),k(100,"p",10),A(101," This is similar in concept to "),k(102,"a",37),A(103," Retrieval Augmented Generation (RAG)"),O(),A(104," which expands the context of the prompt by providing external knowledge which was not present in the training data. The extra context in a RAG system is typically retrieved from a database (often using "),k(105,"a",38),A(106,"ANN"),O(),A(107," such as "),k(108,"a",39),A(109,"HNSW"),O(),A(110,"). For this system we generate random keys and addresses instead of finding similar ones (reasons why below). "),O(),k(111,"p",10),A(112," The prompt is given to the model, which predicts the most likely token that would appear next in the sequence. This is repeated until 44 characters have been generated, which is the length of a 256 bit private key that has been base58 encoded. "),O(),k(113,"p",10),A(114," The generated candidate private key is then used to derive a Bitcoin address, which is compared to the target address to see if the LLM predicted correctly. "),O()(),k(115,"section")(116,"h2",11),A(117,"Don't expect to find Private Keys"),O(),k(118,"p",10),A(119," LLMs are effective because they are trained on data that is inherently predictable. Even though there are a seemingly infinite ways to combine words into sentences, the languages we use have proven successful because we have restricted which words are used together and we've built grammatical patterns so that it is easier for us to remember how to use the words effectively. LLMs are effective at identifying these underlying patterns. "),O(),k(120,"p",10),A(121," Bitcoin addresses however, have been specifically designed to avoid predictable patterns. They are created using cryptographic algorithms that apply an "),k(122,"a",40),A(123," avalanche effect"),O(),A(124," where one small change in the private key causes a dramatic change in the address. They are inherently unpredictable by design. "),O(),k(125,"p",41),A(126," An LLM will not predict private keys because there are no patterns in the tokens of the Bitcoin addresses or keys. "),O(),k(127,"p",10),A(128," Even if an LLM was trained with hundreds of trillions of tokens of Bitcoin addresses and private key data, the neural network would not converge because it would be unable to find temporal patterns between the tokens. "),O()(),k(129,"section")(130,"h2",11),A(131,"Why make it then?"),O(),k(132,"p",10),A(133," To demonstrate that LLMs can predict text that looks plausible, even with data that is not predictable, but it should not be mistaken as being correct or valuable. "),O(),k(134,"p",10),A(135," To demonstrate that (not so large) LLMs can run on device, in the browser. "),O(),k(136,"p",10),A(137," There are other domains where temporal patterns do exist within the data where this technique may be applied effectively. Possibly enhanced with RAG or fine-tuning. "),O()(),k(138,"section")(139,"h2",11),A(140,"Possible Improvements"),O(),k(141,"p",10),A(142," Increase the number of few-shot samples in the prompt. "),O(),k(143,"p",10),A(144," Trim the LLM vocabulary to only include tokens that are a single character. The token "),k(145,"kbd",32),A(146,"We"),O(),A(147," is treated differently to the tokens "),k(148,"kbd",32),A(149,"W"),O(),A(150," and "),k(151,"kbd",32),A(152,"e"),O(),A(153,". "),O(),k(154,"p",10),A(155," Using a wider and deeper LLM such as LLama 3 8B/70B or Falcon 180B may result in better predictions. Scaling up models has shown unexpected "),k(156,"a",42),A(157,"emergent abilities"),O(),A(158,". "),O(),k(159,"p",10),A(160," Fine-tune the LLM using a dataset of bitcoin addresses and private keys (although the loss will probably not reduce and can be prone to "),k(161,"a",43),A(162," catastrophic forgetting"),O(),A(163,") "),O()()()(),k(164,"section",44),Pr(165,"div",45),O()()}o&2&&(gt(21),We("ngModel",i.bitcoinAddress.address),gt(4),kd("ngModel",i.numSamples),gt(2),We("ngIf",!i.haveLLM),gt(),We("ngIf",i.haveLLM),gt(),We("busy",i.busy.genAddress),gt(6),We("ngIf",i.llama.cpp),gt(),We("ngIf",i.haveLLM))},dependencies:[nb,zc,xh,Q0,_h,Ih,Dh,rb,ki,qa,Ch]});let e=t;return e})();Lw(Yb,Fw).catch(e=>console.error(e));
