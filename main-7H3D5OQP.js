var Bp=Object.defineProperty,pE=Object.defineProperties;var gE=Object.getOwnPropertyDescriptors;var Lp=Object.getOwnPropertySymbols;var mE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable;var Vp=e=>{throw TypeError(e)};var Fp=(e,t,n)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||={})mE.call(t,n)&&Fp(e,n,t[n]);if(Lp)for(var n of Lp(t))yE.call(t,n)&&Fp(e,n,t[n]);return e},V=(e,t)=>pE(e,gE(t));var jp=(e,t)=>{for(var n in t)Bp(e,n,{get:t[n],enumerable:!0})};var Ou=(e,t,n)=>t.has(e)||Vp("Cannot "+n);var mi=(e,t,n)=>(Ou(e,t,"read from private field"),n?n.call(e):t.get(e)),Pu=(e,t,n)=>t.has(e)?Vp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Lu=(e,t,n,r)=>(Ou(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Fu=(e,t,n)=>(Ou(e,t,"access private method"),n);var ae=(e,t,n)=>new Promise((r,o)=>{var i=c=>{try{a(n.next(c))}catch(u){o(u)}},s=c=>{try{a(n.throw(c))}catch(u){o(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((n=n.apply(e,t)).next())});function Up(e,t){return Object.is(e,t)}var Te=null,Fs=!1,Bs=1,ln=Symbol("SIGNAL");function te(e){let t=Te;return Te=e,t}function $p(){return Te}var wi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ju(e){if(Fs)throw new Error("");if(Te===null)return;Te.consumerOnSignalRead(e);let t=Te.nextProducerIndex++;if($s(Te),t<Te.producerNode.length&&Te.producerNode[t]!==e&&yi(Te)){let n=Te.producerNode[t];Us(n,Te.producerIndexOfThis[t])}Te.producerNode[t]!==e&&(Te.producerNode[t]=e,Te.producerIndexOfThis[t]=yi(Te)?zp(e,Te,t):0),Te.producerLastReadVersion[t]=e.version}function wE(){Bs++}function Hp(e){if(!(yi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Bs)){if(!e.producerMustRecompute(e)&&!$u(e)){e.dirty=!1,e.lastCleanEpoch=Bs;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Bs}}function Gp(e){if(e.liveConsumerNode===void 0)return;let t=Fs;Fs=!0;try{for(let n of e.liveConsumerNode)n.dirty||vE(n)}finally{Fs=t}}function Wp(){return Te?.consumerAllowSignalWrites!==!1}function vE(e){e.dirty=!0,Gp(e),e.consumerMarkedDirty?.(e)}function js(e){return e&&(e.nextProducerIndex=0),te(e)}function Uu(e,t){if(te(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(yi(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Us(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function $u(e){$s(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Hp(n),r!==n.version))return!0}return!1}function Hu(e){if($s(e),yi(e))for(let t=0;t<e.producerNode.length;t++)Us(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function zp(e,t,n){if(qp(e),e.liveConsumerNode.length===0&&Kp(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=zp(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Us(e,t){if(qp(e),e.liveConsumerNode.length===1&&Kp(e))for(let r=0;r<e.producerNode.length;r++)Us(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];$s(o),o.producerIndexOfThis[r]=t}}function yi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function $s(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function qp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Kp(e){return e.producerNode!==void 0}function Yp(e){let t=Object.create(bE);t.computation=e;let n=()=>{if(Hp(t),ju(t),t.value===Vs)throw t.error;return t.value};return n[ln]=t,n}var Bu=Symbol("UNSET"),Vu=Symbol("COMPUTING"),Vs=Symbol("ERRORED"),bE=V(T({},wi),{value:Bu,dirty:!0,error:null,equal:Up,producerMustRecompute(e){return e.value===Bu||e.value===Vu},producerRecomputeValue(e){if(e.value===Vu)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Vu;let n=js(e),r;try{r=e.computation()}catch(o){r=Vs,e.error=o}finally{Uu(e,n)}if(t!==Bu&&t!==Vs&&r!==Vs&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function EE(){throw new Error}var Zp=EE;function Qp(){Zp()}function Xp(e){Zp=e}var DE=null;function Jp(e){let t=Object.create(tg);t.value=e;let n=()=>(ju(t),t.value);return n[ln]=t,n}function Gu(e,t){Wp()||Qp(),e.equal(e.value,t)||(e.value=t,xE(e))}function eg(e,t){Wp()||Qp(),Gu(e,t(e.value))}var tg=V(T({},wi),{equal:Up,value:void 0});function xE(e){e.version++,wE(),Gp(e),DE?.()}function Z(e){return typeof e=="function"}function co(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hs=co(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vi(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Xe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(i){t=i instanceof Hs?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{ng(i)}catch(s){t=t??[],s instanceof Hs?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Hs(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ng(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&vi(n,t)}remove(t){let{_finalizers:n}=this;n&&vi(n,t),t instanceof e&&t._removeParent(this)}};Xe.EMPTY=(()=>{let e=new Xe;return e.closed=!0,e})();var Wu=Xe.EMPTY;function Gs(e){return e instanceof Xe||e&&"closed"in e&&Z(e.remove)&&Z(e.add)&&Z(e.unsubscribe)}function ng(e){Z(e)?e():e.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var uo={setTimeout(e,t,...n){let{delegate:r}=uo;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=uo;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ws(e){uo.setTimeout(()=>{let{onUnhandledError:t}=Bt;if(t)t(e);else throw e})}function zu(){}var rg=qu("C",void 0,void 0);function og(e){return qu("E",void 0,e)}function ig(e){return qu("N",e,void 0)}function qu(e,t,n){return{kind:e,value:t,error:n}}var Er=null;function lo(e){if(Bt.useDeprecatedSynchronousErrorHandling){let t=!Er;if(t&&(Er={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Er;if(Er=null,n)throw r}}else e()}function sg(e){Bt.useDeprecatedSynchronousErrorHandling&&Er&&(Er.errorThrown=!0,Er.error=e)}var Dr=class extends Xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Gs(t)&&t.add(this)):this.destination=CE}static create(t,n,r){return new Pn(t,n,r)}next(t){this.isStopped?Yu(ig(t),this):this._next(t)}error(t){this.isStopped?Yu(og(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Yu(rg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IE=Function.prototype.bind;function Ku(e,t){return IE.call(e,t)}var Zu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zs(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zs(r)}else zs(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zs(n)}}},Pn=class extends Dr{constructor(t,n,r){super();let o;if(Z(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Bt.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Ku(t.next,i),error:t.error&&Ku(t.error,i),complete:t.complete&&Ku(t.complete,i)}):o=t}this.destination=new Zu(o)}};function zs(e){Bt.useDeprecatedSynchronousErrorHandling?sg(e):Ws(e)}function _E(e){throw e}function Yu(e,t){let{onStoppedNotification:n}=Bt;n&&uo.setTimeout(()=>n(e,t))}var CE={closed:!0,next:zu,error:_E,complete:zu};var fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ag(e){return e}function cg(e){return e.length===0?ag:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var be=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=TE(n)?n:new Pn(n,r,o);return lo(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ug(r),new r((o,i)=>{let s=new Pn({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fo](){return this}pipe(...n){return cg(n)(this)}toPromise(n){return n=ug(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function ug(e){var t;return(t=e??Bt.Promise)!==null&&t!==void 0?t:Promise}function SE(e){return e&&Z(e.next)&&Z(e.error)&&Z(e.complete)}function TE(e){return e&&e instanceof Dr||SE(e)&&Gs(e)}function AE(e){return Z(e?.lift)}function at(e){return t=>{if(AE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ct(e,t,n,r,o){return new Qu(e,t,n,r,o)}var Qu=class extends Dr{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var lg=co(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Zt=(()=>{class e extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new qs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new lg}next(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Wu:(this.currentObservers=null,i.push(n),new Xe(()=>{this.currentObservers=null,vi(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new be;return n.source=this,n}}return e.create=(t,n)=>new qs(t,n),e})(),qs=class extends Zt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Wu}};var bi=class extends Zt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};function dg(e){return e&&Z(e.schedule)}function fg(e){return e[e.length-1]}function hg(e){return Z(fg(e))?e.pop():void 0}function pg(e){return dg(fg(e))?e.pop():void 0}function mg(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function gg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(e){return this instanceof xr?(this.v=e,this):new xr(e)}function yg(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(p){return function(y){return Promise.resolve(y).then(p,d)}}function a(p,y){r[p]&&(o[p]=function(f){return new Promise(function(m,g){i.push([p,f,m,g])>1||c(p,f)})},y&&(o[p]=y(o[p])))}function c(p,y){try{u(r[p](y))}catch(f){h(i[0][3],f)}}function u(p){p.value instanceof xr?Promise.resolve(p.value.v).then(l,d):h(i[0][2],p)}function l(p){c("next",p)}function d(p){c("throw",p)}function h(p,y){p(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function wg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof gg=="function"?gg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var Ks=e=>e&&typeof e.length=="number"&&typeof e!="function";function Ys(e){return Z(e?.then)}function Zs(e){return Z(e[fo])}function Qs(e){return Symbol.asyncIterator&&Z(e?.[Symbol.asyncIterator])}function Xs(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ME(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Js=ME();function ea(e){return Z(e?.[Js])}function ta(e){return yg(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield xr(n.read());if(o)return yield xr(void 0);yield yield xr(r)}}finally{n.releaseLock()}})}function na(e){return Z(e?.getReader)}function ut(e){if(e instanceof be)return e;if(e!=null){if(Zs(e))return NE(e);if(Ks(e))return kE(e);if(Ys(e))return RE(e);if(Qs(e))return vg(e);if(ea(e))return OE(e);if(na(e))return PE(e)}throw Xs(e)}function NE(e){return new be(t=>{let n=e[fo]();if(Z(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kE(e){return new be(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function RE(e){return new be(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ws)})}function OE(e){return new be(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function vg(e){return new be(t=>{LE(e,t).catch(n=>t.error(n))})}function PE(e){return vg(ta(e))}function LE(e,t){var n,r,o,i;return mg(this,void 0,void 0,function*(){try{for(n=wg(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function Tt(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function ra(e,t=0){return at((n,r)=>{n.subscribe(ct(r,o=>Tt(r,e,()=>r.next(o),t),()=>Tt(r,e,()=>r.complete(),t),o=>Tt(r,e,()=>r.error(o),t)))})}function oa(e,t=0){return at((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function bg(e,t){return ut(e).pipe(oa(t),ra(t))}function Eg(e,t){return ut(e).pipe(oa(t),ra(t))}function Dg(e,t){return new be(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function xg(e,t){return new be(n=>{let r;return Tt(n,t,()=>{r=e[Js](),Tt(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>Z(r?.return)&&r.return()})}function ia(e,t){if(!e)throw new Error("Iterable cannot be null");return new be(n=>{Tt(n,t,()=>{let r=e[Symbol.asyncIterator]();Tt(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ig(e,t){return ia(ta(e),t)}function _g(e,t){if(e!=null){if(Zs(e))return bg(e,t);if(Ks(e))return Dg(e,t);if(Ys(e))return Eg(e,t);if(Qs(e))return ia(e,t);if(ea(e))return xg(e,t);if(na(e))return Ig(e,t)}throw Xs(e)}function Ir(e,t){return t?_g(e,t):ut(e)}function sa(...e){let t=pg(e);return Ir(e,t)}var Cg=co(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Xu(e,t){let n=typeof t=="object";return new Promise((r,o)=>{let i=new Pn({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(t.defaultValue):o(new Cg)}});e.subscribe(i)})}function lt(e,t){return at((n,r)=>{let o=0;n.subscribe(ct(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:FE}=Array;function BE(e,t){return FE(t)?e(...t):e(t)}function Sg(e){return lt(t=>BE(e,t))}var{isArray:VE}=Array,{getPrototypeOf:jE,prototype:UE,keys:$E}=Object;function Tg(e){if(e.length===1){let t=e[0];if(VE(t))return{args:t,keys:null};if(HE(t)){let n=$E(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function HE(e){return e&&typeof e=="object"&&jE(e)===UE}function Ag(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function Mg(e,t,n,r,o,i,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&t.complete()},p=f=>u<r?y(f):c.push(f),y=f=>{i&&t.next(f),u++;let m=!1;ut(n(f,l++)).subscribe(ct(t,g=>{o?.(g),i?p(g):t.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let g=c.shift();s?Tt(t,s,()=>y(g)):y(g)}h()}catch(g){t.error(g)}}))};return e.subscribe(ct(t,p,()=>{d=!0,h()})),()=>{a?.()}}function aa(e,t,n=1/0){return Z(t)?aa((r,o)=>lt((i,s)=>t(r,i,o,s))(ut(e(r,o))),n):(typeof t=="number"&&(n=t),at((r,o)=>Mg(r,o,e,n)))}function Ju(...e){let t=hg(e),{args:n,keys:r}=Tg(e),o=new be(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;ut(n[l]).subscribe(ct(i,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||i.next(r?Ag(r,a):a),i.complete())}))}});return t?o.pipe(Sg(t)):o}function el(e,t){return at((n,r)=>{let o=0;n.subscribe(ct(r,i=>e.call(t,i,o++)&&r.next(i)))})}function tl(e,t){return Z(t)?aa(e,t,1):aa(e,1)}function nl(e){return at((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function rl(e,t){return at((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(ct(r,c=>{o?.unsubscribe();let u=0,l=i++;ut(e(c,l)).subscribe(o=ct(r,d=>r.next(t?t(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}var GE="https://g.co/ng/security#xss",X=class extends Error{constructor(t,n){super(Fa(t,n)),this.code=t}};function Fa(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function ki(e){return{toString:e}.toString()}var ca="__parameters__";function WE(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function gm(e,t,n){return ki(()=>{let r=WE(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(ca)?c[ca]:Object.defineProperty(c,ca,{value:[]})[ca];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function de(e){for(let t in e)if(e[t]===de)return t;throw Error("Could not find renamed property on target object.")}function zE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function mt(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(mt).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Ng(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var qE=de({__forward_ref__:de});function Hn(e){return e.__forward_ref__=Hn,e.toString=function(){return mt(this())},e}function Je(e){return mm(e)?e():e}function mm(e){return typeof e=="function"&&e.hasOwnProperty(qE)&&e.__forward_ref__===Hn}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fr(e){return{providers:e.providers||[],imports:e.imports||[]}}function ld(e){return kg(e,ym)||kg(e,wm)}function kg(e,t){return e.hasOwnProperty(t)?e[t]:null}function KE(e){let t=e&&(e[ym]||e[wm]);return t||null}function Rg(e){return e&&(e.hasOwnProperty(Og)||e.hasOwnProperty(YE))?e[Og]:null}var ym=de({\u0275prov:de}),Og=de({\u0275inj:de}),wm=de({ngInjectableDef:de}),YE=de({ngInjectorDef:de}),W=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vm(e){return e&&!!e.\u0275providers}var ZE=de({\u0275cmp:de}),QE=de({\u0275dir:de}),XE=de({\u0275pipe:de});var ma=de({\u0275fac:de}),Di=de({__NG_ELEMENT_ID__:de}),Pg=de({__NG_ENV_ID__:de});function dd(e){return typeof e=="string"?e:e==null?"":String(e)}function JE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():dd(e)}function eD(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new X(-200,e)}function fd(e,t){throw new X(-201,!1)}var Q=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Q||{}),wl;function bm(){return wl}function At(e){let t=wl;return wl=e,t}function Em(e,t,n){let r=ld(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Q.Optional)return null;if(t!==void 0)return t;fd(e,"Injector")}var tD={},xi=tD,vl="__NG_DI_FLAG__",ya="ngTempTokenPath",nD="ngTokenPath",rD=/\n/gm,oD="\u0275",Lg="__source",mo;function iD(){return mo}function Ln(e){let t=mo;return mo=e,t}function sD(e,t=Q.Default){if(mo===void 0)throw new X(-203,!1);return mo===null?Em(e,void 0,t):mo.get(e,t&Q.Optional?null:void 0,t)}function q(e,t=Q.Default){return(bm()||sD)(Je(e),t)}function K(e,t=Q.Default){return q(e,Ba(t))}function Ba(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bl(e){let t=[];for(let n=0;n<e.length;n++){let r=Je(e[n]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let o,i=Q.Default;for(let s=0;s<r.length;s++){let a=r[s],c=aD(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(q(o,i))}else t.push(q(r))}return t}function Dm(e,t){return e[vl]=t,e.prototype[vl]=t,e}function aD(e){return e[vl]}function cD(e,t,n,r){let o=e[ya];throw t[Lg]&&o.unshift(t[Lg]),e.message=uD(`
`+e.message,o,n,r),e[nD]=o,e[ya]=null,e}function uD(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==oD?e.slice(2):e;let o=mt(t);if(Array.isArray(t))o=t.map(mt).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):mt(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(rD,`
  `)}`}var xm=Dm(gm("Optional"),8);var lD=Dm(gm("SkipSelf"),4);function wo(e,t){let n=e.hasOwnProperty(ma);return n?e[ma]:null}function dD(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function fD(e){return e.flat(Number.POSITIVE_INFINITY)}function hd(e,t){e.forEach(n=>Array.isArray(n)?hd(n,t):t(n))}function Im(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function wa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function hD(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function pD(e,t,n){let r=Ri(e,t);return r>=0?e[r|1]=n:(r=~r,hD(e,r,t,n)),r}function ol(e,t){let n=Ri(e,t);if(n>=0)return e[n|1]}function Ri(e,t){return gD(e,t,1)}function gD(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var vo={},Mt=[],Ii=new W(""),_m=new W("",-1),Cm=new W(""),va=class{get(t,n=xi){if(n===xi){let r=new Error(`NullInjectorError: No provider for ${mt(t)}!`);throw r.name="NullInjectorError",r}return n}},Sm=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Sm||{}),Jt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Jt||{}),Vn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Vn||{});function mD(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function El(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];wD(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function yD(e){return e===3||e===4||e===6}function wD(e){return e.charCodeAt(0)===64}function _i(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Fg(e,n,o,null,t[++r]):Fg(e,n,o,null,null))}}return e}function Fg(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var Tm="ng-template";function vD(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&mD(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(pd(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function pd(e){return e.type===4&&e.value!==Tm}function bD(e,t,n){let r=e.type===4&&!n?Tm:e.value;return t===r}function ED(e,t,n){let r=4,o=e.attrs,i=o!==null?ID(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Vt(r)&&!Vt(c))return!1;if(s&&Vt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!bD(e,c,n)||c===""&&t.length===1){if(Vt(r))return!1;s=!0}}else if(r&8){if(o===null||!vD(e,o,c,n)){if(Vt(r))return!1;s=!0}}else{let u=t[++a],l=DD(c,o,pd(e),n);if(l===-1){if(Vt(r))return!1;s=!0;continue}if(u!==""){let d;if(l>i?d="":d=o[l+1].toLowerCase(),r&2&&u!==d){if(Vt(r))return!1;s=!0}}}}return Vt(r)||s}function Vt(e){return(e&1)===0}function DD(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return _D(t,e)}function xD(e,t,n=!1){for(let r=0;r<t.length;r++)if(ED(e,t[r],n))return!0;return!1}function ID(e){for(let t=0;t<e.length;t++){let n=e[t];if(yD(n))return t}return e.length}function _D(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Bg(e,t){return e?":not("+t.trim()+")":t}function CD(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Vt(s)&&(t+=Bg(i,o),o=""),r=s,i=i||!Vt(r);n++}return o!==""&&(t+=Bg(i,o)),t}function SD(e){return e.map(CD).join(",")}function TD(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!Vt(o))break;o=i}r++}return{attrs:t,classes:n}}function Va(e){return ki(()=>{let t=Nm(e),n=V(T({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Sm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Jt.Emulated,styles:e.styles||Mt,_:null,schemas:e.schemas||null,tView:null,id:""});km(n);let r=e.dependencies;return n.directiveDefs=jg(r,!1),n.pipeDefs=jg(r,!0),n.id=kD(n),n})}function AD(e){return bo(e)||Am(e)}function MD(e){return e!==null}function Br(e){return ki(()=>({type:e.type,bootstrap:e.bootstrap||Mt,declarations:e.declarations||Mt,imports:e.imports||Mt,exports:e.exports||Mt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Vg(e,t){if(e==null)return vo;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=Vn.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==Vn.None?[r,a]:r,t[i]=s):n[i]=r}return n}function Ge(e){return ki(()=>{let t=Nm(e);return km(t),t})}function bo(e){return e[ZE]||null}function Am(e){return e[QE]||null}function Mm(e){return e[XE]||null}function ND(e){let t=bo(e)||Am(e)||Mm(e);return t!==null?t.standalone:!1}function Nm(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||vo,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Mt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vg(e.inputs,t),outputs:Vg(e.outputs),debugInfo:null}}function km(e){e.features?.forEach(t=>t(e))}function jg(e,t){if(!e)return null;let n=t?Mm:AD;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(MD)}function kD(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function gd(e){return{\u0275providers:e}}function RD(...e){return{\u0275providers:Rm(!0,e),\u0275fromNgModule:!0}}function Rm(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return hd(t,s=>{let a=s;Dl(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Om(o,i),n}function Om(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];md(o,i=>{t(i,r)})}}function Dl(e,t,n,r){if(e=Je(e),!e)return!1;let o=null,i=Rg(e),s=!i&&bo(e);if(!i&&!s){let c=e.ngModule;if(i=Rg(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Dl(u,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{hd(i.imports,l=>{Dl(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Om(u,t)}if(!a){let u=wo(o)||(()=>new o);t({provide:o,useFactory:u,deps:Mt},o),t({provide:Cm,useValue:o,multi:!0},o),t({provide:Ii,useValue:()=>q(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=e;md(c,l=>{t(l,u)})}}else return!1;return o!==e&&e.providers!==void 0}function md(e,t){for(let n of e)vm(n)&&(n=n.\u0275providers),Array.isArray(n)?md(n,t):t(n)}var OD=de({provide:String,useValue:de});function Pm(e){return e!==null&&typeof e=="object"&&OD in e}function PD(e){return!!(e&&e.useExisting)}function LD(e){return!!(e&&e.useFactory)}function Eo(e){return typeof e=="function"}function FD(e){return!!e.useClass}var ja=new W(""),da={},BD={},il;function yd(){return il===void 0&&(il=new va),il}var en=class{},Ci=class extends en{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Il(t,s=>this.processProvider(s)),this.records.set(_m,ho(void 0,this)),o.has("environment")&&this.records.set(en,ho(void 0,this));let i=this.records.get(ja);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Cm,Mt,Q.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Ln(this),r=At(void 0),o;try{return t()}finally{Ln(n),At(r)}}get(t,n=xi,r=Q.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Pg))return t[Pg](this);r=Ba(r);let o,i=Ln(this),s=At(void 0);try{if(!(r&Q.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=HD(t)&&ld(t);u&&this.injectableDefInScope(u)?c=ho(xl(t),da):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&Q.Self?yd():this.parent;return n=r&Q.Optional&&n===xi?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ya]=a[ya]||[]).unshift(mt(t)),i)throw a;return cD(a,t,"R3InjectorError",this.source)}else throw a}finally{At(s),Ln(i)}}resolveInjectorInitializers(){let t=te(null),n=Ln(this),r=At(void 0),o;try{let i=this.get(Ii,Mt,Q.Self);for(let s of i)s()}finally{Ln(n),At(r),te(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(mt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(t){t=Je(t);let n=Eo(t)?t:Je(t&&t.provide),r=jD(t);if(!Eo(t)&&t.multi===!0){let o=this.records.get(n);o||(o=ho(void 0,da,!0),o.factory=()=>bl(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=te(null);try{return n.value===da&&(n.value=BD,n.value=n.factory()),typeof n.value=="object"&&n.value&&$D(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Je(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xl(e){let t=ld(e),n=t!==null?t.factory:wo(e);if(n!==null)return n;if(e instanceof W)throw new X(204,!1);if(e instanceof Function)return VD(e);throw new X(204,!1)}function VD(e){if(e.length>0)throw new X(204,!1);let n=KE(e);return n!==null?()=>n.factory(e):()=>new e}function jD(e){if(Pm(e))return ho(void 0,e.useValue);{let t=Lm(e);return ho(t,da)}}function Lm(e,t,n){let r;if(Eo(e)){let o=Je(e);return wo(o)||xl(o)}else if(Pm(e))r=()=>Je(e.useValue);else if(LD(e))r=()=>e.useFactory(...bl(e.deps||[]));else if(PD(e))r=()=>q(Je(e.useExisting));else{let o=Je(e&&(e.useClass||e.provide));if(UD(e))r=()=>new o(...bl(e.deps));else return wo(o)||xl(o)}return r}function ho(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function UD(e){return!!e.deps}function $D(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function HD(e){return typeof e=="function"||typeof e=="object"&&e instanceof W}function Il(e,t){for(let n of e)Array.isArray(n)?Il(n,t):n&&vm(n)?Il(n.\u0275providers,t):t(n)}function Fm(e,t){e instanceof Ci&&e.assertNotDestroyed();let n,r=Ln(e),o=At(void 0);try{return t()}finally{Ln(r),At(o)}}function GD(){return bm()!==void 0||iD()!=null}function WD(e){return typeof e=="function"}var pn=0,z=1,H=2,He=3,jt=4,$t=5,ba=6,Ea=7,Ut=8,Do=9,dn=10,Ae=11,Si=12,Ug=13,To=14,tn=15,Sr=16,po=17,fn=18,Ua=19,Bm=20,Fn=21,sl=22,Nt=23,jn=25,Vm=1;var Tr=7,Da=8,xo=9,yt=10,xa=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(xa||{});function Bn(e){return Array.isArray(e)&&typeof e[Vm]=="object"}function gn(e){return Array.isArray(e)&&e[Vm]===!0}function jm(e){return(e.flags&4)!==0}function $a(e){return e.componentOffset>-1}function wd(e){return(e.flags&1)===1}function Un(e){return!!e.template}function _l(e){return(e[H]&512)!==0}var Cl=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Um(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Vr(){return $m}function $m(e){return e.type.prototype.ngOnChanges&&(e.setInput=qD),zD}Vr.ngInherit=!0;function zD(){let e=Gm(this),t=e?.current;if(t){let n=e.previous;if(n===vo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function qD(e,t,n,r,o){let i=this.declaredInputs[r],s=Gm(e)||KD(e,{previous:vo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[i];a[i]=new Cl(u&&u.currentValue,n,c===vo),Um(e,t,o,n)}var Hm="__ngSimpleChanges__";function Gm(e){return e[Hm]||null}function KD(e,t){return e[Hm]=t}var $g=null;var Qt=function(e,t,n){$g?.(e,t,n)},YD="svg",ZD="math";function nn(e){for(;Array.isArray(e);)e=e[pn];return e}function Wm(e,t){return nn(t[e])}function kt(e,t){return nn(t[e.index])}function zm(e,t){return e.data[t]}function Gn(e,t){let n=t[e];return Bn(n)?n:n[pn]}function QD(e){return(e[H]&4)===4}function vd(e){return(e[H]&128)===128}function XD(e){return gn(e[He])}function Ia(e,t){return t==null?null:e[t]}function qm(e){e[po]=0}function Km(e){e[H]&1024||(e[H]|=1024,vd(e)&&Ha(e))}function JD(e,t){for(;e>0;)t=t[To],e--;return t}function Ti(e){return!!(e[H]&9216||e[Nt]?.dirty)}function Sl(e){e[dn].changeDetectionScheduler?.notify(7),e[H]&64&&(e[H]|=1024),Ti(e)&&Ha(e)}function Ha(e){e[dn].changeDetectionScheduler?.notify(0);let t=Ar(e);for(;t!==null&&!(t[H]&8192||(t[H]|=8192,!vd(t)));)t=Ar(t)}function Ym(e,t){if((e[H]&256)===256)throw new X(911,!1);e[Fn]===null&&(e[Fn]=[]),e[Fn].push(t)}function ex(e,t){if(e[Fn]===null)return;let n=e[Fn].indexOf(t);n!==-1&&e[Fn].splice(n,1)}function Ar(e){let t=e[He];return gn(t)?t[He]:t}var Y={lFrame:oy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Zm=!1;function tx(){return Y.lFrame.elementDepthCount}function nx(){Y.lFrame.elementDepthCount++}function rx(){Y.lFrame.elementDepthCount--}function Qm(){return Y.bindingsEnabled}function ox(){return Y.skipHydrationRootTNode!==null}function ix(e){return Y.skipHydrationRootTNode===e}function sx(){Y.skipHydrationRootTNode=null}function ce(){return Y.lFrame.lView}function et(){return Y.lFrame.tView}function Wn(e){return Y.lFrame.contextLView=e,e[Ut]}function zn(e){return Y.lFrame.contextLView=null,e}function ft(){let e=Xm();for(;e!==null&&e.type===64;)e=e.parent;return e}function Xm(){return Y.lFrame.currentTNode}function ax(){let e=Y.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Oi(e,t){let n=Y.lFrame;n.currentTNode=e,n.isParent=t}function Jm(){return Y.lFrame.isParent}function cx(){Y.lFrame.isParent=!1}function ey(){return Zm}function Hg(e){Zm=e}function ux(e){return Y.lFrame.bindingIndex=e}function Ga(){return Y.lFrame.bindingIndex++}function lx(e){let t=Y.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function dx(){return Y.lFrame.inI18n}function fx(e,t){let n=Y.lFrame;n.bindingIndex=n.bindingRootIndex=e,Tl(t)}function hx(){return Y.lFrame.currentDirectiveIndex}function Tl(e){Y.lFrame.currentDirectiveIndex=e}function px(e){let t=Y.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function ty(){return Y.lFrame.currentQueryIndex}function bd(e){Y.lFrame.currentQueryIndex=e}function gx(e){let t=e[z];return t.type===2?t.declTNode:t.type===1?e[$t]:null}function ny(e,t,n){if(n&Q.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&Q.Host);)if(o=gx(i),o===null||(i=i[To],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=Y.lFrame=ry();return r.currentTNode=t,r.lView=e,!0}function Ed(e){let t=ry(),n=e[z];Y.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ry(){let e=Y.lFrame,t=e===null?null:e.child;return t===null?oy(e):t}function oy(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function iy(){let e=Y.lFrame;return Y.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var sy=iy;function Dd(){let e=iy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mx(e){return(Y.lFrame.contextLView=JD(e,Y.lFrame.contextLView))[Ut]}function Ao(){return Y.lFrame.selectedIndex}function Mr(e){Y.lFrame.selectedIndex=e}function xd(){let e=Y.lFrame;return zm(e.tView,e.selectedIndex)}function yx(){return Y.lFrame.currentNamespace}var ay=!0;function Id(){return ay}function _d(e){ay=e}function wx(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=$m(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function Cd(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function fa(e,t,n){cy(e,t,3,n)}function ha(e,t,n,r){(e[H]&3)===n&&cy(e,t,n,r)}function al(e,t){let n=e[H];(n&3)===t&&(n&=16383,n+=1,e[H]=n)}function cy(e,t,n,r){let o=r!==void 0?e[po]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[po]+=65536),(a<i||i==-1)&&(vx(e,n,t,c),e[po]=(e[po]&4294901760)+c+2),c++}function Gg(e,t){Qt(4,e,t);let n=te(null);try{t.call(e)}finally{te(n),Qt(5,e,t)}}function vx(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[H]>>14<e[po]>>16&&(e[H]&3)===t&&(e[H]+=16384,Gg(a,i)):Gg(a,i)}var yo=-1,Nr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function bx(e){return e instanceof Nr}function Ex(e){return(e.flags&8)!==0}function Dx(e){return(e.flags&16)!==0}var cl={},Al=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ba(r);let o=this.injector.get(t,cl,r);return o!==cl||n===cl?o:this.parentInjector.get(t,n,r)}};function uy(e){return e!==yo}function _a(e){return e&32767}function xx(e){return e>>16}function Ca(e,t){let n=xx(e),r=t;for(;n>0;)r=r[To],n--;return r}var Ml=!0;function Wg(e){let t=Ml;return Ml=e,t}var Ix=256,ly=Ix-1,dy=5,_x=0,Xt={};function Cx(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Di)&&(r=n[Di]),r==null&&(r=n[Di]=_x++);let o=r&ly,i=1<<o;t.data[e+(o>>dy)]|=i}function Sa(e,t){let n=fy(e,t);if(n!==-1)return n;let r=t[z];r.firstCreatePass&&(e.injectorIndex=t.length,ul(r.data,e),ul(t,null),ul(r.blueprint,null));let o=Sd(e,t),i=e.injectorIndex;if(uy(o)){let s=_a(o),a=Ca(o,t),c=a[z].data;for(let u=0;u<8;u++)t[i+u]=a[s+u]|c[s+u]}return t[i+8]=o,i}function ul(e,t){e.push(0,0,0,0,0,0,0,0,t)}function fy(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Sd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=yy(o),r===null)return yo;if(n++,o=o[To],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return yo}function Nl(e,t,n){Cx(e,t,n)}function hy(e,t,n){if(n&Q.Optional||e!==void 0)return e;fd(t,"NodeInjector")}function py(e,t,n,r){if(n&Q.Optional&&r===void 0&&(r=null),!(n&(Q.Self|Q.Host))){let o=e[Do],i=At(void 0);try{return o?o.get(t,r,n&Q.Optional):Em(t,r,n&Q.Optional)}finally{At(i)}}return hy(r,t,n)}function gy(e,t,n,r=Q.Default,o){if(e!==null){if(t[H]&2048&&!(r&Q.Self)){let s=Mx(e,t,n,r,Xt);if(s!==Xt)return s}let i=my(e,t,n,r,Xt);if(i!==Xt)return i}return py(t,n,r,o)}function my(e,t,n,r,o){let i=Tx(n);if(typeof i=="function"){if(!ny(t,e,r))return r&Q.Host?hy(o,n,r):py(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&Q.Optional))fd(n);else return s}finally{sy()}}else if(typeof i=="number"){let s=null,a=fy(e,t),c=yo,u=r&Q.Host?t[tn][$t]:null;for((a===-1||r&Q.SkipSelf)&&(c=a===-1?Sd(e,t):t[a+8],c===yo||!qg(r,!1)?a=-1:(s=t[z],a=_a(c),t=Ca(c,t)));a!==-1;){let l=t[z];if(zg(i,a,l.data)){let d=Sx(a,t,n,s,r,u);if(d!==Xt)return d}c=t[a+8],c!==yo&&qg(r,t[z].data[a+8]===u)&&zg(i,a,t)?(s=l,a=_a(c),t=Ca(c,t)):a=-1}}return o}function Sx(e,t,n,r,o,i){let s=t[z],a=s.data[e+8],c=r==null?$a(a)&&Ml:r!=s&&(a.type&3)!==0,u=o&Q.Host&&i===a,l=pa(a,s,n,c,u);return l!==null?kr(t,s,l,a):Xt}function pa(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,u=e.directiveEnd,l=i>>20,d=r?a:a+l,h=o?a+l:u;for(let p=d;p<h;p++){let y=s[p];if(p<c&&n===y||p>=c&&y.type===n)return p}if(o){let p=s[c];if(p&&Un(p)&&p.type===n)return c}return null}function kr(e,t,n,r){let o=e[n],i=t.data;if(bx(o)){let s=o;s.resolving&&eD(JE(i[n]));let a=Wg(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?At(s.injectImpl):null,l=ny(e,r,Q.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&wx(n,i[n],t)}finally{u!==null&&At(u),Wg(a),s.resolving=!1,sy()}}return o}function Tx(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Di)?e[Di]:void 0;return typeof t=="number"?t>=0?t&ly:Ax:t}function zg(e,t,n){let r=1<<e;return!!(n[t+(e>>dy)]&r)}function qg(e,t){return!(e&Q.Self)&&!(e&Q.Host&&t)}var Cr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return gy(this._tNode,this._lView,t,Ba(r),n)}};function Ax(){return new Cr(ft(),ce())}function Pi(e){return ki(()=>{let t=e.prototype.constructor,n=t[ma]||kl(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[ma]||kl(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function kl(e){return mm(e)?()=>{let t=kl(Je(e));return t&&t()}:wo(e)}function Mx(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[H]&2048&&!(s[H]&512);){let a=my(i,s,n,r|Q.Self,Xt);if(a!==Xt)return a;let c=i.parent;if(!c){let u=s[Bm];if(u){let l=u.get(n,Xt,r);if(l!==Xt)return l}c=yy(s),s=s[To]}i=c}return o}function yy(e){let t=e[z],n=t.type;return n===2?t.declTNode:n===1?e[$t]:null}function Kg(e,t=null,n=null,r){let o=Nx(e,t,n,r);return o.resolveInjectorInitializers(),o}function Nx(e,t=null,n=null,r,o=new Set){let i=[n||Mt,RD(e)];return r=r||(typeof e=="object"?void 0:mt(e)),new Ci(i,t||yd(),r||null,o)}var _r=class _r{static create(t,n){if(Array.isArray(t))return Kg({name:""},n,t,"");{let r=t.name??"";return Kg({name:r},t.parent,t.providers,r)}}};_r.THROW_IF_NOT_FOUND=xi,_r.NULL=new va,_r.\u0275prov=re({token:_r,providedIn:"any",factory:()=>q(_m)}),_r.__NG_ELEMENT_ID__=-1;var Io=_r;var kx=new W("");kx.__NG_ELEMENT_ID__=e=>{let t=ft();if(t===null)throw new X(204,!1);if(t.type&2)return t.value;if(e&Q.Optional)return null;throw new X(204,!1)};var Rx="ngOriginalError";function ll(e){return e[Rx]}var wy=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Ox,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),Rl=class extends wy{constructor(t){super(),this._lView=t}onDestroy(t){return Ym(this._lView,t),()=>ex(this._lView,t)}};function Ox(){return new Rl(ce())}var Mo=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275prov=re({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();var Ol=class extends Zt{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,GD()&&(this.destroyRef=K(wy,{optional:!0})??void 0,this.pendingTasks=K(Mo,{optional:!0})??void 0)}emit(t){let n=te(null);try{super.next(t)}finally{te(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof Xe&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},dt=Ol;function Ta(...e){}function vy(e){let t,n;function r(){e=Ta;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Yg(e){return queueMicrotask(()=>e()),()=>{e=Ta}}var Ce=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dt(!1),this.onMicrotaskEmpty=new dt(!1),this.onStable=new dt(!1),this.onError=new dt(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,Fx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new X(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,Px,Ta,Ta);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Px={};function Td(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lx(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{vy(()=>{e.callbackScheduled=!1,Pl(e),e.isCheckStableRunning=!0,Td(e),e.isCheckStableRunning=!1})}),Pl(e))}function Fx(e){let t=()=>{Lx(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(Bx(a))return n.invokeTask(o,i,s,a);try{return Zg(e),n.invokeTask(o,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Qg(e)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return Zg(e),n.invoke(o,i,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Vx(a)&&t(),Qg(e)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(e._hasPendingMicrotasks=i.microTask,Pl(e),Td(e)):i.change=="macroTask"&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}function Pl(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Zg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Qg(e){e._nesting--,Td(e)}var Ll=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dt,this.onMicrotaskEmpty=new dt,this.onStable=new dt,this.onError=new dt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function Bx(e){return by(e,"__ignore_ng_zone__")}function Vx(e){return by(e,"__scheduler_tick__")}function by(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var $n=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ll(t);for(;n&&ll(n);)n=ll(n);return n||null}},jx=new W("",{providedIn:"root",factory:()=>{let e=K(Ce),t=K($n);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function Ux(){return No(ft(),ce())}function No(e,t){return new ht(kt(e,t))}var ht=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=Ux;let e=t;return e})();function $x(e){return e instanceof ht?e.nativeElement:e}function Hx(){return this._results[Symbol.iterator]()}var Fl=class e{get changes(){return this._changes??=new dt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Hx)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=fD(t);(this._changesDetected=!dD(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Ey(e){return(e.flags&128)===128}var Dy=new Map,Gx=0;function Wx(){return Gx++}function zx(e){Dy.set(e[Ua],e)}function qx(e){Dy.delete(e[Ua])}var Xg="__ngContext__";function Rr(e,t){Bn(t)?(e[Xg]=t[Ua],zx(t)):e[Xg]=t}function xy(e){return _y(e[Si])}function Iy(e){return _y(e[jt])}function _y(e){for(;e!==null&&!gn(e);)e=e[jt];return e}var Bl;function Cy(e){Bl=e}function Kx(){if(Bl!==void 0)return Bl;if(typeof document<"u")return document;throw new X(210,!1)}var Ad=new W("",{providedIn:"root",factory:()=>Yx}),Yx="ng",Md=new W(""),qn=new W("",{providedIn:"platform",factory:()=>"unknown"});var Nd=new W("",{providedIn:"root",factory:()=>Kx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Zx="h",Qx="b";var Xx=()=>null;function kd(e,t,n=!1){return Xx(e,t,n)}var Sy=!1,Jx=new W("",{providedIn:"root",factory:()=>Sy});var Vl=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${GE})`}};function Rd(e){return e instanceof Vl?e.changingThisBreaksApplicationSecurity:e}var hn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(hn||{}),eI;function Od(e,t){return eI(e,t)}function go(e,t,n,r,o){if(r!=null){let i,s=!1;gn(r)?i=r:Bn(r)&&(s=!0,r=r[pn]);let a=nn(r);e===0&&n!==null?o==null?ky(t,n,a):Aa(t,n,a,o||null,!0):e===1&&n!==null?Aa(t,n,a,o||null,!0):e===2?gI(t,a,s):e===3&&t.destroyNode(a),i!=null&&yI(t,e,i,n,o)}}function tI(e,t){return e.createText(t)}function nI(e,t,n){e.setValue(t,n)}function Ty(e,t,n){return e.createElement(t,n)}function rI(e,t){Ay(e,t),t[pn]=null,t[$t]=null}function oI(e,t,n,r,o,i){r[pn]=o,r[$t]=t,Wa(e,r,n,1,o,i)}function Ay(e,t){t[dn].changeDetectionScheduler?.notify(8),Wa(e,t,t[Ae],2,null,null)}function iI(e){let t=e[Si];if(!t)return dl(e[z],e);for(;t;){let n=null;if(Bn(t))n=t[Si];else{let r=t[yt];r&&(n=r)}if(!n){for(;t&&!t[jt]&&t!==e;)Bn(t)&&dl(t[z],t),t=t[He];t===null&&(t=e),Bn(t)&&dl(t[z],t),n=t&&t[jt]}t=n}}function sI(e,t,n,r){let o=yt+r,i=n.length;r>0&&(n[o-1][jt]=t),r<i-yt?(t[jt]=n[o],Im(n,yt+r,t)):(n.push(t),t[jt]=null),t[He]=n;let s=t[Sr];s!==null&&n!==s&&My(s,t);let a=t[fn];a!==null&&a.insertView(e),Sl(t),t[H]|=128}function My(e,t){let n=e[xo],r=t[He];if(Bn(r))e[H]|=xa.HasTransplantedViews;else{let o=r[He][tn];t[tn]!==o&&(e[H]|=xa.HasTransplantedViews)}n===null?e[xo]=[t]:n.push(t)}function Pd(e,t){let n=e[xo],r=n.indexOf(t);n.splice(r,1)}function jl(e,t){if(e.length<=yt)return;let n=yt+t,r=e[n];if(r){let o=r[Sr];o!==null&&o!==e&&Pd(o,r),t>0&&(e[n-1][jt]=r[jt]);let i=wa(e,yt+t);rI(r[z],r);let s=i[fn];s!==null&&s.detachView(i[z]),r[He]=null,r[jt]=null,r[H]&=-129}return r}function Ny(e,t){if(!(t[H]&256)){let n=t[Ae];n.destroyNode&&Wa(e,t,n,3,null,null),iI(t)}}function dl(e,t){if(t[H]&256)return;let n=te(null);try{t[H]&=-129,t[H]|=256,t[Nt]&&Hu(t[Nt]),cI(e,t),aI(e,t),t[z].type===1&&t[Ae].destroy();let r=t[Sr];if(r!==null&&gn(t[He])){r!==t[He]&&Pd(r,t);let o=t[fn];o!==null&&o.detachView(e)}qx(t)}finally{te(n)}}function aI(e,t){let n=e.cleanup,r=t[Ea];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(t[Ea]=null);let o=t[Fn];if(o!==null){t[Fn]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function cI(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Nr)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];Qt(4,a,c);try{c.call(a)}finally{Qt(5,a,c)}}else{Qt(4,o,i);try{i.call(o)}finally{Qt(5,o,i)}}}}}function uI(e,t,n){return lI(e,t.parent,n)}function lI(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[pn];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=e.data[r.directiveStart+o];if(i===Jt.None||i===Jt.Emulated)return null}return kt(r,n)}}function Aa(e,t,n,r,o){e.insertBefore(t,n,r,o)}function ky(e,t,n){e.appendChild(t,n)}function Jg(e,t,n,r,o){r!==null?Aa(e,t,n,r,o):ky(e,t,n)}function Ry(e,t){return e.parentNode(t)}function dI(e,t){return e.nextSibling(t)}function fI(e,t,n){return pI(e,t,n)}function hI(e,t,n){return e.type&40?kt(e,n):null}var pI=hI,em;function Ld(e,t,n,r){let o=uI(e,r,t),i=t[Ae],s=r.parent||t[$t],a=fI(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Jg(i,o,n[c],a,!1);else Jg(i,o,n,a,!1);em!==void 0&&em(i,r,t,n,o)}function Ei(e,t){if(t!==null){let n=t.type;if(n&3)return kt(t,e);if(n&4)return Ul(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ei(e,r);{let o=e[t.index];return gn(o)?Ul(-1,o):nn(o)}}else{if(n&128)return Ei(e,t.next);if(n&32)return Od(t,e)()||nn(e[t.index]);{let r=Oy(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Ar(e[tn]);return Ei(o,r)}else return Ei(e,t.next)}}}return null}function Oy(e,t){if(t!==null){let r=e[tn][$t],o=t.projection;return r.projection[o]}return null}function Ul(e,t){let n=yt+e+1;if(n<t.length){let r=t[n],o=r[z].firstChild;if(o!==null)return Ei(r,o)}return t[Tr]}function gI(e,t,n){e.removeChild(null,t,n)}function Fd(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Rr(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Fd(e,t,n.child,r,o,i,!1),go(t,e,o,a,i);else if(c&32){let u=Od(n,r),l;for(;l=u();)go(t,e,o,l,i);go(t,e,o,a,i)}else c&16?mI(e,t,r,n,o,i):go(t,e,o,a,i);n=s?n.projectionNext:n.next}}function Wa(e,t,n,r,o,i){Fd(n,r,e.firstChild,t,o,i,!1)}function mI(e,t,n,r,o,i){let s=n[tn],c=s[$t].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];go(t,e,o,l,i)}else{let u=c,l=s[He];Ey(r)&&(u.flags|=128),Fd(e,t,u,l,o,i,!0)}}function yI(e,t,n,r,o){let i=n[Tr],s=nn(n);i!==s&&go(t,e,r,i,o);for(let a=yt;a<n.length;a++){let c=n[a];Wa(c[z],c,e,t,r,i)}}function wI(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:hn.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=hn.Important),e.setStyle(n,r,o,i))}}function vI(e,t,n){e.setAttribute(t,"style",n)}function Py(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Ly(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&El(e,t,r),o!==null&&Py(e,t,o),i!==null&&vI(e,t,i)}var ko={};function wt(e=1){Fy(et(),ce(),Ao()+e,!1)}function Fy(e,t,n,r){if(!r)if((t[H]&3)===3){let i=e.preOrderCheckHooks;i!==null&&fa(t,i,n)}else{let i=e.preOrderHooks;i!==null&&ha(t,i,0,n)}Mr(n)}function ne(e,t=Q.Default){let n=ce();if(n===null)return q(e,t);let r=ft();return gy(r,n,Je(e),t)}function By(e,t,n,r,o,i){let s=te(null);try{let a=null;o&Vn.SignalBased&&(a=t[r][ln]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Vn.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):Um(t,a,r,i)}finally{te(s)}}function bI(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Mr(~o);else{let i=o,s=n[++r],a=n[++r];fx(s,i);let c=t[i];a(2,c)}}}finally{Mr(-1)}}function za(e,t,n,r,o,i,s,a,c,u,l){let d=t.blueprint.slice();return d[pn]=o,d[H]=r|4|128|8|64,(u!==null||e&&e[H]&2048)&&(d[H]|=2048),qm(d),d[He]=d[To]=e,d[Ut]=n,d[dn]=s||e&&e[dn],d[Ae]=a||e&&e[Ae],d[Do]=c||e&&e[Do]||null,d[$t]=i,d[Ua]=Wx(),d[ba]=l,d[Bm]=u,d[tn]=t.type==2?e[tn]:d,d}function qa(e,t,n,r,o){let i=e.data[t];if(i===null)i=EI(e,t,n,r,o),dx()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=ax();i.injectorIndex=s===null?-1:s.injectorIndex}return Oi(i,!0),i}function EI(e,t,n,r,o){let i=Xm(),s=Jm(),a=s?i:i&&i.parent,c=e.data[t]=SI(e,a,n,t,r,o);return e.firstChild===null&&(e.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Vy(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function jy(e,t,n,r,o){let i=Ao(),s=r&2;try{Mr(-1),s&&t.length>jn&&Fy(e,t,jn,!1),Qt(s?2:0,o),n(r,o)}finally{Mr(i),Qt(s?3:1,o)}}function Uy(e,t,n){if(jm(t)){let r=te(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{te(r)}}}function $y(e,t,n){Qm()&&(RI(e,t,n,kt(n,t)),(n.flags&64)===64&&Ky(e,t,n))}function Hy(e,t,n=kt){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function Gy(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Bd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Bd(e,t,n,r,o,i,s,a,c,u,l){let d=jn+r,h=d+o,p=DI(d,h),y=typeof u=="function"?u():u;return p[z]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:l}}function DI(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ko);return n}function xI(e,t,n,r){let i=r.get(Jx,Sy)||n===Jt.ShadowDom,s=e.selectRootElement(t,i);return II(s),s}function II(e){_I(e)}var _I=()=>null;function CI(e,t,n,r){let o=Qy(t);o.push(n),e.firstCreatePass&&Xy(e).push(r,o.length-1)}function SI(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return ox()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tm(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,c=Vn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=i;if(o!==null){if(!o.hasOwnProperty(i))continue;u=o[i]}e===0?nm(r,n,u,a,c):nm(r,n,u,a)}return r}function nm(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function TI(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],c=null,u=null;for(let l=r;l<o;l++){let d=i[l],h=n?n.get(d):null,p=h?h.inputs:null,y=h?h.outputs:null;c=tm(0,d.inputs,l,c,p),u=tm(1,d.outputs,l,u,y);let f=c!==null&&s!==null&&!pd(t)?GI(c,l,s):null;a.push(f)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function AI(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Wy(e,t,n,r,o,i,s,a){let c=kt(t,n),u=t.inputs,l;!a&&u!=null&&(l=u[r])?(Vd(e,n,l,r,o),$a(t)&&MI(n,t.index)):t.type&3?(r=AI(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(c,r,o)):t.type&12}function MI(e,t){let n=Gn(t,e);n[H]&16||(n[H]|=64)}function zy(e,t,n,r){if(Qm()){let o=r===null?null:{"":-1},i=PI(e,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&qy(e,t,n,s,o,a),o&&LI(n,r,o)}n.mergedAttrs=_i(n.mergedAttrs,n.attrs)}function qy(e,t,n,r,o,i){for(let u=0;u<r.length;u++)Nl(Sa(n,t),e,r[u].type);BI(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Vy(e,t,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=_i(n.mergedAttrs,l.hostAttrs),VI(e,n,t,c,l),FI(c,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}TI(e,n,i)}function NI(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;kI(s)!=a&&s.push(a),s.push(n,r,i)}}function kI(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function RI(e,t,n,r){let o=n.directiveStart,i=n.directiveEnd;$a(n)&&jI(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||Sa(n,t),Rr(r,t);let s=n.initialInputs;for(let a=o;a<i;a++){let c=e.data[a],u=kr(t,e,a,n);if(Rr(u,t),s!==null&&HI(t,a-o,u,c,n,s),Un(c)){let l=Gn(n.index,t);l[Ut]=kr(t,e,a,n)}}}function Ky(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=hx();try{Mr(i);for(let a=r;a<o;a++){let c=e.data[a],u=t[a];Tl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&OI(c,u)}}finally{Mr(-1),Tl(s)}}function OI(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function PI(e,t){let n=e.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(xD(t,s.selectors,!1))if(r||(r=[]),Un(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;$l(e,t,c)}else r.unshift(s),$l(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function $l(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function LI(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new X(-301,!1);r.push(t[o],i)}}}function FI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Un(t)&&(n[""]=e)}}function BI(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function VI(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=wo(o.type,!0)),s=new Nr(i,Un(o),ne);e.blueprint[r]=s,n[r]=s,NI(e,t,r,Vy(e,n,o.hostVars,ko),o)}function jI(e,t,n){let r=kt(t,e),o=Gy(n),i=e[dn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Ka(e,za(e,o,null,s,r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=a}function UI(e,t,n,r,o,i){let s=kt(e,t);$I(t[Ae],s,i,e.value,n,r,o)}function $I(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?dd(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function HI(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];By(r,n,c,u,l,d)}}function GI(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function Yy(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Zy(e,t){let n=e.contentQueries;if(n!==null){let r=te(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];bd(i),a.contentQueries(2,t[s],s)}}}finally{te(r)}}}function Ka(e,t){return e[Si]?e[Ug][jt]=t:e[Si]=t,e[Ug]=t,t}function Hl(e,t,n){bd(0);let r=te(null);try{t(e,n)}finally{te(r)}}function Qy(e){return e[Ea]??=[]}function Xy(e){return e.cleanup??=[]}function Jy(e,t){let n=e[Do],r=n?n.get($n,null):null;r&&r.handleError(t)}function Vd(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=n[i++],u=t[s],l=e.data[s];By(l,u,r,a,c,o)}}function WI(e,t,n){let r=Wm(t,e);nI(e[Ae],r,n)}function zI(e,t){let n=Gn(t,e),r=n[z];qI(r,n);let o=n[pn];o!==null&&n[ba]===null&&(n[ba]=kd(o,n[Do])),jd(r,n,n[Ut])}function qI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function jd(e,t,n){Ed(t);try{let r=e.viewQuery;r!==null&&Hl(1,r,n);let o=e.template;o!==null&&jy(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[fn]?.finishViewCreation(e),e.staticContentQueries&&Zy(e,t),e.staticViewQueries&&Hl(2,e.viewQuery,n);let i=e.components;i!==null&&KI(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[H]&=-5,Dd()}}function KI(e,t){for(let n=0;n<t.length;n++)zI(e,t[n])}function YI(e,t,n,r){let o=te(null);try{let i=t.tView,a=e[H]&4096?4096:16,c=za(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[Sr]=u;let l=e[fn];return l!==null&&(c[fn]=l.createEmbeddedView(i)),jd(i,c,n),c}finally{te(o)}}function rm(e,t){return!t||t.firstChild===null||Ey(e)}function ZI(e,t,n,r=!0){let o=t[z];if(sI(o,t,e,n),r){let s=Ul(n,e),a=t[Ae],c=Ry(a,e[Tr]);c!==null&&oI(o,e[$t],a,t,c,s)}let i=t[ba];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Ma(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(nn(i)),gn(i)&&QI(i,r);let s=n.type;if(s&8)Ma(e,t,n.child,r);else if(s&32){let a=Od(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Oy(t,n);if(Array.isArray(a))r.push(...a);else{let c=Ar(t[tn]);Ma(c[z],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function QI(e,t){for(let n=yt;n<e.length;n++){let r=e[n],o=r[z].firstChild;o!==null&&Ma(r[z],r,o,t)}e[Tr]!==e[pn]&&t.push(e[Tr])}var ew=[];function XI(e){return e[Nt]??JI(e)}function JI(e){let t=ew.pop()??Object.create(t_);return t.lView=e,t}function e_(e){e.lView[Nt]!==e&&(e.lView=null,ew.push(e))}var t_=V(T({},wi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ha(e.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function n_(e){let t=e[Nt]??Object.create(r_);return t.lView=e,t}var r_=V(T({},wi),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ar(e.lView);for(;t&&!tw(t[z]);)t=Ar(t);t&&Km(t)},consumerOnSignalRead(){this.lView[Nt]=this}});function tw(e){return e.type!==2}var o_=100;function nw(e,t=!0,n=0){let r=e[dn],o=r.rendererFactory,i=!1;i||o.begin?.();try{i_(e,n)}catch(s){throw t&&Jy(e,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function i_(e,t){let n=ey();try{Hg(!0),Gl(e,t);let r=0;for(;Ti(e);){if(r===o_)throw new X(103,!1);r++,Gl(e,1)}}finally{Hg(n)}}function s_(e,t,n,r){let o=t[H];if((o&256)===256)return;let i=!1,s=!1;!i&&t[dn].inlineEffectRunner?.flush(),Ed(t);let a=!0,c=null,u=null;i||(tw(e)?(u=XI(t),c=js(u)):$p()===null?(a=!1,u=n_(t),c=js(u)):t[Nt]&&(Hu(t[Nt]),t[Nt]=null));try{qm(t),ux(e.bindingStartIndex),n!==null&&jy(e,t,n,2,r);let l=(o&3)===3;if(!i)if(l){let p=e.preOrderCheckHooks;p!==null&&fa(t,p,null)}else{let p=e.preOrderHooks;p!==null&&ha(t,p,0,null),al(t,0)}if(s||a_(t),rw(t,0),e.contentQueries!==null&&Zy(e,t),!i)if(l){let p=e.contentCheckHooks;p!==null&&fa(t,p)}else{let p=e.contentHooks;p!==null&&ha(t,p,1),al(t,1)}bI(e,t);let d=e.components;d!==null&&iw(t,d,0);let h=e.viewQuery;if(h!==null&&Hl(2,h,r),!i)if(l){let p=e.viewCheckHooks;p!==null&&fa(t,p)}else{let p=e.viewHooks;p!==null&&ha(t,p,2),al(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[sl]){for(let p of t[sl])p();t[sl]=null}i||(t[H]&=-73)}catch(l){throw i||Ha(t),l}finally{u!==null&&(Uu(u,c),a&&e_(u)),Dd()}}function rw(e,t){for(let n=xy(e);n!==null;n=Iy(n))for(let r=yt;r<n.length;r++){let o=n[r];ow(o,t)}}function a_(e){for(let t=xy(e);t!==null;t=Iy(t)){if(!(t[H]&xa.HasTransplantedViews))continue;let n=t[xo];for(let r=0;r<n.length;r++){let o=n[r];Km(o)}}}function c_(e,t,n){let r=Gn(t,e);ow(r,n)}function ow(e,t){vd(e)&&Gl(e,t)}function Gl(e,t){let r=e[z],o=e[H],i=e[Nt],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&$u(i)),s||=!1,i&&(i.dirty=!1),e[H]&=-9217,s)s_(r,e,r.template,e[Ut]);else if(o&8192){rw(e,1);let a=r.components;a!==null&&iw(e,a,1)}}function iw(e,t,n){for(let r=0;r<t.length;r++)c_(e,t[r],n)}function Ud(e,t){let n=ey()?64:1088;for(e[dn].changeDetectionScheduler?.notify(t);e;){e[H]|=n;let r=Ar(e);if(_l(e)&&!r)return e;e=r}return null}var Or=class{get rootNodes(){let t=this._lView,n=t[z];return Ma(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(t){this._lView[Ut]=t}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[He];if(gn(t)){let n=t[Da],r=n?n.indexOf(this):-1;r>-1&&(jl(t,r),wa(n,r))}this._attachedToViewContainer=!1}Ny(this._lView[z],this._lView)}onDestroy(t){Ym(this._lView,t)}markForCheck(){Ud(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[H]&=-129}reattach(){Sl(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,nw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=_l(this._lView),n=this._lView[Sr];n!==null&&!t&&Pd(n,this._lView),Ay(this._lView[z],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=t;let n=_l(this._lView),r=this._lView[Sr];r!==null&&!n&&My(r,this._lView),Sl(this._lView)}},Pr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=d_;let e=t;return e})(),u_=Pr,l_=class extends u_{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=YI(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Or(o)}};function d_(){return $d(ft(),ce())}function $d(e,t){return e.type&4?new l_(t,e,No(e,t)):null}var jO=new RegExp(`^(\\d+)*(${Qx}|${Zx})*(.*)`);var f_=()=>null;function om(e,t){return f_(e,t)}var Ai=class{},sw=new W("",{providedIn:"root",factory:()=>!1});var aw=new W(""),Wl=class{},Na=class{};function h_(e){let t=Error(`No component factory found for ${mt(e)}.`);return t[p_]=e,t}var p_="ngComponent";var zl=class{resolveComponentFactory(t){throw h_(t)}},Qd=class Qd{};Qd.NULL=new zl;var Mi=Qd,_o=class{},Kn=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>g_();let e=t;return e})();function g_(){let e=ce(),t=ft(),n=Gn(t.index,e);return(Bn(n)?n:e)[Ae]}var m_=(()=>{let t=class t{};t.\u0275prov=re({token:t,providedIn:"root",factory:()=>null});let e=t;return e})();var im=new Set;function Li(e){im.has(e)||(im.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var cw=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=re({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function ql(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=Ng(o,a);else if(i==2){let c=a,u=t[++s];r=Ng(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var Kl=class extends Mi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=bo(t);return new ka(n,this.ngModule)}};function sm(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let o=e[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Vn.None;t?n.push({propName:s,templateName:r,isSignal:(a&Vn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function y_(e){let t=e.toLowerCase();return t==="svg"?YD:t==="math"?ZD:null}var ka=class extends Na{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=sm(t.inputs,!0);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return sm(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=SD(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=te(null);try{o=o||this.ngModule;let s=o instanceof en?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Al(t,s):t,c=a.get(_o,null);if(c===null)throw new X(407,!1);let u=a.get(m_,null),l=a.get(cw,null),d=a.get(Ai,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",f=r?xI(p,r,this.componentDef.encapsulation,a):Ty(p,y,y_(y)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;f!==null&&(g=kd(f,a,!0));let w=Bd(0,null,null,1,0,null,null,null,null,null,null),b=za(null,w,null,m,null,null,h,p,a,null,g);Ed(b);let v,D;try{let E=this.componentDef,I,_=null;E.findHostDirectiveDefs?(I=[],_=new Map,E.findHostDirectiveDefs(E,I,_),I.push(E)):I=[E];let B=w_(b,f),N=v_(B,f,E,I,b,h,p);D=zm(w,jn),f&&D_(p,E,f,r),n!==void 0&&x_(D,this.ngContentSelectors,n),v=E_(N,E,I,_,b,[I_]),jd(w,b,null)}finally{Dd()}return new Yl(this.componentType,v,No(D,b),b,D)}finally{te(i)}}},Yl=class extends Wl{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Or(o,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;Vd(i[z],i,o,t,n),this.previousInputValues.set(t,n);let s=Gn(this._tNode.index,i);Ud(s,1)}}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function w_(e,t){let n=e[z],r=jn;return e[r]=t,qa(n,r,2,"#host",null)}function v_(e,t,n,r,o,i,s){let a=o[z];b_(r,e,t,s);let c=null;t!==null&&(c=kd(t,o[Do]));let u=i.rendererFactory.createRenderer(t,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=za(o,Gy(n),null,l,o[e.index],e,i,u,null,null,c);return a.firstCreatePass&&$l(a,e,r.length-1),Ka(o,d),o[e.index]=d}function b_(e,t,n,r){for(let o of e)t.mergedAttrs=_i(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(ql(t,t.mergedAttrs,!0),n!==null&&Ly(r,n,t))}function E_(e,t,n,r,o,i){let s=ft(),a=o[z],c=kt(s,o);qy(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=kr(o,a,d,s);Rr(h,o)}Ky(a,o,s),c&&Rr(c,o);let u=kr(o,a,s.directiveStart+s.componentOffset,s);if(e[Ut]=o[Ut]=u,i!==null)for(let l of i)l(u,t);return Uy(a,s,o),u}function D_(e,t,n,r){if(r)El(e,n,["ng-version","18.1.4"]);else{let{attrs:o,classes:i}=TD(t.selectors[0]);o&&El(e,n,o),i&&i.length>0&&Py(e,n,i.join(" "))}}function x_(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function I_(){let e=ft();Cd(ce()[z],e)}var Ro=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=__;let e=t;return e})();function __(){let e=ft();return lw(e,ce())}var C_=Ro,uw=class extends C_{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Sd(this._hostTNode,this._hostLView);if(uy(t)){let n=Ca(t,this._hostLView),r=_a(t),o=n[z].data[r+8];return new Cr(o,n)}else return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=am(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=om(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,rm(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!WD(t),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,o=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}let c=s?t:new ka(bo(t)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let f=(s?u:this.parentInjector).get(en,null);f&&(i=f)}let l=bo(c.componentType??{}),d=om(this._lContainer,l?.id??null),h=d?.firstChild??null,p=c.create(u,o,h,i);return this.insertImpl(p.hostView,a,rm(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(XD(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[He],u=new uw(c,c[$t],c[He]);u.detach(u.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return ZI(s,o,i,r),t.attachToViewContainerRef(),Im(fl(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=am(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=jl(this._lContainer,n);r&&(wa(fl(this._lContainer),n),Ny(r[z],r))}detach(t){let n=this._adjustIndex(t,-1),r=jl(this._lContainer,n);return r&&wa(fl(this._lContainer),n)!=null?new Or(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function am(e){return e[Da]}function fl(e){return e[Da]||(e[Da]=[])}function lw(e,t){let n,r=t[e.index];return gn(r)?n=r:(n=Yy(r,t,null,e),t[e.index]=n,Ka(t,n)),T_(n,t,e,r),new uw(n,e,t)}function S_(e,t){let n=e[Ae],r=n.createComment(""),o=kt(t,e),i=Ry(n,o);return Aa(n,i,r,dI(n,o),!1),r}var T_=N_,A_=()=>!1;function M_(e,t,n){return A_(e,t,n)}function N_(e,t,n,r){if(e[Tr])return;let o;n.type&8?o=nn(r):o=S_(t,n),e[Tr]=o}var Zl=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ql=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Hd(t,n).matches!==null&&this.queries[n].setDirty()}},Xl=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=V_(t):this.predicate=t}},Jl=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},ed=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,k_(n,i)),this.matchTNodeWithReadOption(t,n,pa(n,t,i,!1,!1))}else r===Pr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,pa(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===ht||o===Ro||o===Pr&&n.type&4)this.addMatch(n.index,-2);else{let i=pa(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function k_(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function R_(e,t){return e.type&11?No(e,t):e.type&4?$d(e,t):null}function O_(e,t,n,r){return n===-1?R_(t,e):n===-2?P_(e,t,r):kr(e,e[z],n,t)}function P_(e,t,n){if(n===ht)return No(t,e);if(n===Pr)return $d(t,e);if(n===Ro)return lw(t,e)}function dw(e,t,n,r){let o=t[fn].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(O_(t,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function td(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=dw(e,t,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=t[-c];for(let d=yt;d<l.length;d++){let h=l[d];h[Sr]===h[He]&&td(h[z],h,u,r)}if(l[xo]!==null){let d=l[xo];for(let h=0;h<d.length;h++){let p=d[h];td(p[z],p,u,r)}}}}}return r}function L_(e,t){return e[fn].queries[t].queryList}function F_(e,t,n){let r=new Fl((n&4)===4);return CI(e,t,r,r.destroy),(t[fn]??=new Ql).queries.push(new Zl(r))-1}function B_(e,t,n){let r=et();return r.firstCreatePass&&(j_(r,new Xl(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),F_(r,ce(),t)}function V_(e){return e.split(",").map(t=>t.trim())}function j_(e,t,n){e.queries===null&&(e.queries=new Jl),e.queries.track(new ed(t,n))}function Hd(e,t){return e.queries.getByIndex(t)}function U_(e,t){let n=e[z],r=Hd(n,t);return r.crossesNgTemplate?td(n,e,t,[]):dw(n,e,r,t)}function $_(e){return typeof e=="function"&&e[ln]!==void 0}function Ya(e,t){Li("NgSignals");let n=Jp(e),r=n[ln];return t?.equal&&(r.equal=t.equal),n.set=o=>Gu(r,o),n.update=o=>eg(r,o),n.asReadonly=H_.bind(n),n}function H_(){let e=this[ln];if(e.readonlyFn===void 0){let t=()=>this();t[ln]=e,e.readonlyFn=t}return e.readonlyFn}function fw(e){return $_(e)&&typeof e.set=="function"}function G_(e){return Object.getPrototypeOf(e.prototype).constructor}function mn(e){let t=G_(e.type),n=!0,r=[e];for(;t;){let o;if(Un(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new X(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=ua(e.inputs),s.inputTransforms=ua(e.inputTransforms),s.declaredInputs=ua(e.declaredInputs),s.outputs=ua(e.outputs);let a=o.hostBindings;a&&Y_(e,a);let c=o.viewQuery,u=o.contentQueries;if(c&&q_(e,c),u&&K_(e,u),W_(e,o),zE(e.outputs,o.outputs),Un(o)&&o.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===mn&&(n=!1)}}t=Object.getPrototypeOf(t)}z_(r)}function W_(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function z_(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=_i(o.hostAttrs,n=_i(n,o.hostAttrs))}}function ua(e){return e===vo?{}:e===Mt?[]:e}function q_(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function K_(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function Y_(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}var Co=class{};var Ra=class extends Co{constructor(t){super(),this.componentFactoryResolver=new Kl(this),this.instance=null;let n=new Ci([...t.providers,{provide:Co,useValue:this},{provide:Mi,useValue:this.componentFactoryResolver}],t.parent||yd(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Z_(e,t,n=null){return new Ra({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function hw(e){return X_(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Q_(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function X_(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Fi(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function J_(e){return(e.flags&32)===32}function eC(e,t,n,r,o,i,s,a,c){let u=t.consts,l=qa(t,e,4,s||null,a||null);zy(t,n,l,Ia(u,c)),Cd(t,l);let d=l.tView=Bd(2,l,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}function tC(e,t,n,r,o,i,s,a,c,u){let l=n+jn,d=t.firstCreatePass?eC(l,t,e,r,o,i,s,a,c):t.data[l];Oi(d,!1);let h=nC(t,e,d,n);Id()&&Ld(t,e,h,d),Rr(h,e);let p=Yy(h,e,h,d);return e[l]=p,Ka(e,p),M_(p,d,e),wd(d)&&$y(t,e,d),c!=null&&Hy(e,d,u),d}function jr(e,t,n,r,o,i,s,a){let c=ce(),u=et(),l=Ia(u.consts,i);return tC(c,u,e,t,n,r,o,l,s,a),jr}var nC=rC;function rC(e,t,n,r){return _d(!0),t[Ae].createComment("")}function Za(e,t,n,r){let o=ce(),i=Ga();if(Fi(o,i,t)){let s=et(),a=xd();UI(a,o,e,t,n,r)}return Za}function oC(e,t,n,r){return Fi(e,Ga(),n)?t+dd(n)+r:ko}function la(e,t){return e<<17|t<<2}function Lr(e){return e>>17&32767}function iC(e){return(e&2)==2}function sC(e,t){return e&131071|t<<17}function nd(e){return e|2}function So(e){return(e&131068)>>2}function hl(e,t){return e&-131069|t<<2}function aC(e){return(e&1)===1}function rd(e){return e|1}function cC(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Lr(s),c=So(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Ri(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=Lr(e[a+1]);e[r+1]=la(h,a),h!==0&&(e[h+1]=hl(e[h+1],r)),e[a+1]=sC(e[a+1],r)}else e[r+1]=la(a,0),a!==0&&(e[a+1]=hl(e[a+1],r)),a=r;else e[r+1]=la(c,0),a===0?a=r:e[c+1]=hl(e[c+1],r),c=r;u&&(e[r+1]=nd(e[r+1])),cm(e,l,r,!0),cm(e,l,r,!1),uC(t,l,e,r,i),s=la(a,c),i?t.classBindings=s:t.styleBindings=s}function uC(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Ri(i,t)>=0&&(n[r+1]=rd(n[r+1]))}function cm(e,t,n,r){let o=e[n+1],i=t===null,s=r?Lr(o):So(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],u=e[s+1];lC(c,t)&&(a=!0,e[s+1]=r?rd(u):nd(u)),s=r?Lr(u):So(u)}a&&(e[n+1]=r?nd(o):rd(o))}function lC(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Ri(e,t)>=0:!1}function We(e,t,n){let r=ce(),o=Ga();if(Fi(r,o,t)){let i=et(),s=xd();Wy(i,s,r,e,t,r[Ae],n,!1)}return We}function um(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";Vd(e,n,i[s],s,r)}function Gd(e,t){return dC(e,t,null,!0),Gd}function dC(e,t,n,r){let o=ce(),i=et(),s=lx(2);if(i.firstUpdatePass&&hC(i,e,s,r),t!==ko&&Fi(o,s,t)){let a=i.data[Ao()];wC(i,a,o,o[Ae],e,o[s+1]=vC(t,n),r,s)}}function fC(e,t){return t>=e.expandoStartIndex}function hC(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[Ao()],s=fC(e,n);bC(i,r)&&t===null&&!s&&(t=!1),t=pC(o,i,t,r),cC(o,i,t,n,s,r)}}function pC(e,t,n,r){let o=px(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=pl(null,e,t,n,r),n=Ni(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=pl(o,e,t,n,r),i===null){let c=gC(e,t,r);c!==void 0&&Array.isArray(c)&&(c=pl(null,e,t,c[1],r),c=Ni(c,t.attrs,r),mC(e,t,r,c))}else i=yC(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function gC(e,t,n){let r=n?t.classBindings:t.styleBindings;if(So(r)!==0)return e[Lr(r)]}function mC(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[Lr(o)]=r}function yC(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Ni(r,s,n)}return Ni(r,t.attrs,n)}function pl(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Ni(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ni(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),pD(e,s,n?!0:t[++i]))}return e===void 0?null:e}function wC(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=aC(u)?lm(c,t,n,o,So(u),s):void 0;if(!Oa(l)){Oa(i)||iC(u)&&(i=lm(c,null,n,o,a,s));let d=Wm(Ao(),n);wI(r,s,d,o,i)}}function lm(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===ko&&(h=d?Mt:void 0);let p=d?ol(h,r):l===r?h:void 0;if(u&&!Oa(p)&&(p=ol(c,r)),Oa(p)&&(a=p,s))return a;let y=e[o+1];o=s?Lr(y):So(y)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=ol(c,r))}return a}function Oa(e){return e!==void 0}function vC(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=mt(Rd(e)))),e}function bC(e,t){return(e.flags&(t?8:16))!==0}function EC(e,t,n,r,o,i){let s=t.consts,a=Ia(s,o),c=qa(t,e,2,r,a);return zy(t,n,c,Ia(s,i)),c.attrs!==null&&ql(c,c.attrs,!1),c.mergedAttrs!==null&&ql(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function R(e,t,n,r){let o=ce(),i=et(),s=jn+e,a=o[Ae],c=i.firstCreatePass?EC(s,i,o,t,n,r):i.data[s],u=DC(i,o,c,a,t,e);o[s]=u;let l=wd(c);return Oi(c,!0),Ly(a,u,c),!J_(c)&&Id()&&Ld(i,o,u,c),tx()===0&&Rr(u,o),nx(),l&&($y(i,o,c),Uy(i,c,o)),r!==null&&Hy(o,c),R}function O(){let e=ft();Jm()?cx():(e=e.parent,Oi(e,!1));let t=e;ix(t)&&sx(),rx();let n=et();return n.firstCreatePass&&(Cd(n,e),jm(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&Ex(t)&&um(n,t,ce(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Dx(t)&&um(n,t,ce(),t.stylesWithoutHost,!1),O}function Ur(e,t,n,r){return R(e,t,n,r),O(),Ur}var DC=(e,t,n,r,o,i)=>(_d(!0),Ty(r,o,yx()));function Oo(){return ce()}var Pa="en-US";var xC=Pa;function IC(e){typeof e=="string"&&(xC=e.toLowerCase().replace(/_/g,"-"))}var _C=(e,t,n)=>{};function vt(e,t,n,r){let o=ce(),i=et(),s=ft();return pw(i,o,o[Ae],s,e,t,r),vt}function CC(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[Ea],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function pw(e,t,n,r,o,i,s){let a=wd(r),u=e.firstCreatePass&&Xy(e),l=t[Ut],d=Qy(t),h=!0;if(r.type&3||s){let f=kt(r,t),m=s?s(f):f,g=d.length,w=s?v=>s(nn(v[r.index])):r.index,b=null;if(!s&&a&&(b=CC(e,t,o,r.index)),b!==null){let v=b.__ngLastListenerFn__||b;v.__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,h=!1}else{i=fm(r,t,l,i),_C(f,o,i);let v=n.listen(m,o,i);d.push(i,v),u&&u.push(o,w,g,g+1)}}else i=fm(r,t,l,i);let p=r.outputs,y;if(h&&p!==null&&(y=p[o])){let f=y.length;if(f)for(let m=0;m<f;m+=2){let g=y[m],w=y[m+1],D=t[g][w].subscribe(i),E=d.length;d.push(i,D),u&&u.push(o,r.index,E,-(E+1))}}}function dm(e,t,n,r){let o=te(null);try{return Qt(6,t,n),n(r)!==!1}catch(i){return Jy(e,i),!1}finally{Qt(7,t,n),te(o)}}function fm(e,t,n,r){return function o(i){if(i===Function)return r;let s=e.componentOffset>-1?Gn(e.index,t):t;Ud(s,5);let a=dm(t,n,r,i),c=o.__ngNextListenerFn__;for(;c;)a=dm(t,n,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function yn(e=1){return mx(e)}function gw(e,t,n){B_(e,t,n)}function mw(e){let t=ce(),n=et(),r=ty();bd(r+1);let o=Hd(n,r);if(e.dirty&&QD(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=U_(t,r);e.reset(i,$x),e.notifyOnChanges()}return!0}return!1}function yw(){return L_(ce(),ty())}function A(e,t=""){let n=ce(),r=et(),o=e+jn,i=r.firstCreatePass?qa(r,o,1,t,null):r.data[o],s=SC(r,n,i,t,e);n[o]=s,Id()&&Ld(r,n,s,i),Oi(i,!1)}var SC=(e,t,n,r,o)=>(_d(!0),tI(t[Ae],r));function Wd(e,t,n){let r=ce(),o=oC(r,e,t,n);return o!==ko&&WI(r,Ao(),o),Wd}function zd(e,t,n){fw(t)&&(t=t());let r=ce(),o=Ga();if(Fi(r,o,t)){let i=et(),s=xd();Wy(i,s,r,e,t,r[Ae],n,!1)}return zd}function ww(e,t){let n=fw(e);return n&&e.set(t),n}function qd(e,t){let n=ce(),r=et(),o=ft();return pw(r,n,n[Ae],o,e,t),qd}function TC(e,t,n){let r=et();if(r.firstCreatePass){let o=Un(e);od(n,r.data,r.blueprint,o,!0),od(t,r.data,r.blueprint,o,!1)}}function od(e,t,n,r,o){if(e=Je(e),Array.isArray(e))for(let i=0;i<e.length;i++)od(e[i],t,n,r,o);else{let i=et(),s=ce(),a=ft(),c=Eo(e)?e:Je(e.provide),u=Lm(e),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Eo(e)||!e.multi){let p=new Nr(u,o,ne),y=ml(c,t,o?l:l+h,d);y===-1?(Nl(Sa(a,s),i,c),gl(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[y]=p,s[y]=p)}else{let p=ml(c,t,l+h,d),y=ml(c,t,l,l+h),f=p>=0&&n[p],m=y>=0&&n[y];if(o&&!m||!o&&!f){Nl(Sa(a,s),i,c);let g=NC(o?MC:AC,n.length,o,r,u);!o&&m&&(n[y].providerFactory=g),gl(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=vw(n[o?y:p],u,!o&&r);gl(i,e,p>-1?p:y,g)}!o&&r&&m&&n[y].componentProviders++}}}function gl(e,t,n,r){let o=Eo(t),i=FD(t);if(o||i){let c=(i?Je(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function vw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ml(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function AC(e,t,n,r){return id(this.multi,[])}function MC(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=kr(n,n[z],this.providerFactory.index,r);i=a.slice(0,s),id(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],id(o,i);return i}function id(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function NC(e,t,n,r,o){let i=new Nr(e,n,ne);return i.multi=[],i.index=t,i.componentProviders=0,vw(i,o,r&&!n),i}function Po(e,t=[]){return n=>{n.providersResolver=(r,o)=>TC(r,o?o(e):e,t)}}var kC=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=Rm(!1,r.type),i=o.length>0?Z_([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=re({token:t,providedIn:"environment",factory:()=>new t(q(en))});let e=t;return e})();function Qa(e){Li("NgStandalone"),e.getStandaloneInjector=t=>t.get(kC).getOrCreateStandaloneInjector(e)}var bw=new W("");function Bi(e){return!!e&&typeof e.then=="function"}function Ew(e){return!!e&&typeof e.subscribe=="function"}var RC=new W(""),Dw=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=K(RC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(Bi(s))r.push(s);else if(Ew(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),xw=new W("");function OC(){Xp(()=>{throw new X(600,!1)})}function PC(e){return e.isBoundToModule}var LC=10;function FC(e,t,n){try{let r=n();return Bi(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Vi=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(jx),this.afterRenderEffectManager=K(cw),this.zonelessEnabled=K(sw),this.externalTestViews=new Set,this.beforeRender=new Zt,this.afterTick=new Zt,this.componentTypes=[],this.components=[],this.isStable=K(Mo).hasPendingTasks.pipe(lt(r=>!r)),this._injector=K(en)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof Na;if(!this._injector.get(Dw).done){let p=!i&&ND(r),y=!1;throw new X(405,y)}let a;i?a=r:a=this._injector.get(Mi).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=PC(a)?void 0:this._injector.get(Co),u=o||a.selector,l=a.create(Io.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(bw,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),yl(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new X(101,!1);let o=te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,te(o),this.afterTick.next()}}detectChangesInAttachedViews(r){let o=null;this._injector.destroyed||(o=this._injector.get(_o,null,{optional:!0}));let i=0,s=this.afterRenderEffectManager;for(;i<LC;){let a=i===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)BC(c,u,a,this.zonelessEnabled)}else o?.begin?.(),o?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Ti(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Ti(c))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;yl(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(xw,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>yl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new X(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function yl(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function BC(e,t,n,r){if(!n&&!Ti(e))return;nw(e,t,n&&!r?0:1)}var VC=(()=>{let t=class t{constructor(){this.zone=K(Ce),this.changeDetectionScheduler=K(Ai),this.applicationRef=K(Vi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function jC({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new Ce(UC()),[{provide:Ce,useFactory:e},{provide:Ii,multi:!0,useFactory:()=>{let n=K(VC,{optional:!0});return()=>n.initialize()}},{provide:Ii,multi:!0,useFactory:()=>{let n=K($C);return()=>{n.initialize()}}},t===!0?{provide:aw,useValue:!0}:[]]}function UC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var $C=(()=>{let t=class t{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=K(Ce),this.pendingTasks=K(Mo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var HC=(()=>{let t=class t{constructor(){this.appRef=K(Vi),this.taskService=K(Mo),this.ngZone=K(Ce),this.zonelessEnabled=K(sw),this.disableScheduling=K(aw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Xe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ll||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Yg:vy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ce.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(o),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Yg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function GC(){return typeof $localize<"u"&&$localize.locale||Pa}var Kd=new W("",{providedIn:"root",factory:()=>K(Kd,Q.Optional|Q.SkipSelf)||GC()});var Iw=new W("");var ga=null;function WC(e=[],t){return Io.create({name:t,providers:[{provide:ja,useValue:"platform"},{provide:Iw,useValue:new Set([()=>ga=null])},...e]})}function zC(e=[]){if(ga)return ga;let t=WC(e);return ga=t,OC(),qC(t),t}function qC(e){e.get(Md,null)?.forEach(n=>n())}var Lo=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=KC;let e=t;return e})();function KC(e){return YC(ft(),ce(),(e&16)===16)}function YC(e,t,n){if($a(e)&&!n){let r=Gn(e.index,t);return new Or(r,r)}else if(e.type&175){let r=t[tn];return new Or(r,t)}return null}var sd=class{constructor(){}supports(t){return hw(t)}create(t){return new ad(t)}},ZC=(e,t)=>t,ad=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ZC}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<hm(r,o,i)?n:r,a=hm(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let u=a-o,l=c-o;if(u!=l){for(let h=0;h<u;h++){let p=h<i.length?i[h]:i[h]=0,y=p+h;l<=y&&y<u&&(i[h]=p+1)}let d=s.previousIndex;i[d]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!hw(t))throw new X(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,Q_(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new cd(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new La),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new La),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},cd=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ud=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},La=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new ud,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hm(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function pm(){return new Yd([new sd])}var Yd=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,o){if(o!=null){let i=o.factories.slice();r=r.concat(i)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||pm()),deps:[[t,new lD,new xm]]}}find(r){let o=this.factories.find(i=>i.supports(r));if(o!=null)return o;throw new X(901,!1)}};t.\u0275prov=re({token:t,providedIn:"root",factory:pm});let e=t;return e})();function _w(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=zC(r),i=[jC({}),{provide:Ai,useExisting:HC},...n||[]],a=new Ra({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ce);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get($n,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:p=>{u.handleError(p)}})});let d=()=>a.destroy(),h=o.get(Iw);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),FC(u,c,()=>{let p=a.get(Dw);return p.runInitializers(),p.donePromise.then(()=>{let y=a.get(Kd,Pa);IC(y||Pa);let f=a.get(Vi);return t!==void 0&&f.bootstrap(t),f})})})}catch(t){return Promise.reject(t)}}var Cw=new W("");function Zd(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Xa(e,t){Li("NgSignals");let n=Yp(e);return t?.equal&&(n[ln].equal=t.equal),n}function Yn(e){let t=te(null);try{return e()}finally{te(t)}}var Nw=null;function Bo(){return Nw}function kw(e){Nw??=e}var Ja=class{};var Ht=new W("");function ec(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var Xd=/\s+/,Sw=[],Rw=(()=>{let t=class t{constructor(r,o){this._ngEl=r,this._renderer=o,this.initialClasses=Sw,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Xd):Sw}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Xd):r}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let o of r)this._updateState(o,!0);else if(r!=null)for(let o of Object.keys(r))this._updateState(o,!!r[o]);this._applyStateDiff()}_updateState(r,o){let i=this.stateMap.get(r);i!==void 0?(i.enabled!==o&&(i.changed=!0,i.enabled=o),i.touched=!0):this.stateMap.set(r,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let o=r[0],i=r[1];i.changed?(this._toggleClass(o,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),i.touched=!1}}_toggleClass(r,o){r=r.trim(),r.length>0&&r.split(Xd).forEach(i=>{o?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}};t.\u0275fac=function(o){return new(o||t)(ne(ht),ne(Kn))},t.\u0275dir=Ge({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var Jd=class{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ow=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,o,i){this._viewContainer=r,this._template=o,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let o=this._viewContainer;r.forEachOperation((i,s,a)=>{if(i.previousIndex==null)o.createEmbeddedView(this._template,new Jd(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)o.remove(s===null?void 0:s);else if(s!==null){let c=o.get(s);o.move(c,a),Tw(c,i)}});for(let i=0,s=o.length;i<s;i++){let c=o.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(i=>{let s=o.get(i.currentIndex);Tw(s,i)})}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(ne(Ro),ne(Pr),ne(Yd))},t.\u0275dir=Ge({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function Tw(e,t){e.context.$implicit=t.item}var tc=(()=>{let t=class t{constructor(r,o){this._viewContainer=r,this._context=new ef,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Aw("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Aw("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};t.\u0275fac=function(o){return new(o||t)(ne(Ro),ne(Pr))},t.\u0275dir=Ge({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),ef=class{constructor(){this.$implicit=null,this.ngIf=null}};function Aw(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${mt(t)}'.`)}var ji=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Br({type:t}),t.\u0275inj=Fr({});let e=t;return e})(),Pw="browser",XC="server";function nc(e){return e===XC}var Fo=class{};var $i=class{},oc=class{},wn=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var rf=class{encodeKey(t){return Lw(t)}encodeValue(t){return Lw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function JC(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var eS=/%(\d[a-f0-9])/gi,tS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lw(e){return encodeURIComponent(e).replace(eS,(t,n)=>tS[n]??t)}function rc(e){return`${e}`}var Xn=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new rf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=JC(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],o=Array.isArray(r)?r.map(rc):[rc(r)];this.map.set(n,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(rc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],o=r.indexOf(rc(t.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var of=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function nS(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Fw(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Bw(e){return typeof Blob<"u"&&e instanceof Blob}function Vw(e){return typeof FormData<"u"&&e instanceof FormData}function rS(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Ui=class e{constructor(t,n,r,o){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let i;if(nS(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new wn,this.context??=new of,!this.params)this.params=new Xn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Fw(this.body)||Bw(this.body)||Vw(this.body)||rS(this.body)?this.body:this.body instanceof Xn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Vw(this.body)?null:Bw(this.body)?this.body.type||null:Fw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Xn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,u=t.headers||this.headers,l=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),l)),new e(n,r,s,{params:l,headers:u,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},Jn=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Jn||{}),Hi=class{constructor(t,n=200,r="OK"){this.headers=t.headers||new wn,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ic=class e extends Hi{constructor(t={}){super(t),this.type=Jn.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Gi=class e extends Hi{constructor(t={}){super(t),this.type=Jn.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Qn=class extends Hi{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Hw=200,oS=204;function nf(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var cf=(()=>{let t=class t{constructor(r){this.handler=r}request(r,o,i={}){let s;if(r instanceof Ui)s=r;else{let u;i.headers instanceof wn?u=i.headers:u=new wn(i.headers);let l;i.params&&(i.params instanceof Xn?l=i.params:l=new Xn({fromObject:i.params})),s=new Ui(r,o,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=sa(s).pipe(tl(u=>this.handler.handle(u)));if(r instanceof Ui||i.observe==="events")return a;let c=a.pipe(el(u=>u instanceof Gi));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(lt(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(lt(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(lt(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(lt(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,o={}){return this.request("DELETE",r,o)}get(r,o={}){return this.request("GET",r,o)}head(r,o={}){return this.request("HEAD",r,o)}jsonp(r,o){return this.request("JSONP",r,{params:new Xn().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,o={}){return this.request("OPTIONS",r,o)}patch(r,o,i={}){return this.request("PATCH",r,nf(i,o))}post(r,o,i={}){return this.request("POST",r,nf(i,o))}put(r,o,i={}){return this.request("PUT",r,nf(i,o))}};t.\u0275fac=function(o){return new(o||t)(q($i))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),iS=/^\)\]\}',?\n/,sS="X-Request-URL";function jw(e){if(e.url)return e.url;let t=sS.toLocaleLowerCase();return e.headers.get(t)}var aS=(()=>{let t=class t{constructor(){this.fetchImpl=K(sf,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=K(Ce)}handle(r){return new be(o=>{let i=new AbortController;return this.doRequest(r,i.signal,o).then(af,s=>o.error(new Qn({error:s}))),()=>i.abort()})}doRequest(r,o,i){return ae(this,null,function*(){let s=this.createRequestInit(r),a;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,T({signal:o},s)));cS(y),i.next({type:Jn.Sent}),a=yield y}catch(y){i.error(new Qn({error:y,status:y.status??0,statusText:y.statusText,url:r.urlWithParams,headers:y.headers}));return}let c=new wn(a.headers),u=a.statusText,l=jw(a)??r.urlWithParams,d=a.status,h=null;if(r.reportProgress&&i.next(new ic({headers:c,status:d,statusText:u,url:l})),a.body){let y=a.headers.get("content-length"),f=[],m=a.body.getReader(),g=0,w,b,v=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ae(this,null,function*(){for(;;){let{done:E,value:I}=yield m.read();if(E)break;if(f.push(I),g+=I.length,r.reportProgress){b=r.responseType==="text"?(b??"")+(w??=new TextDecoder).decode(I,{stream:!0}):void 0;let _=()=>i.next({type:Jn.DownloadProgress,total:y?+y:void 0,loaded:g,partialText:b});v?v.run(_):_()}}}));let D=this.concatChunks(f,g);try{let E=a.headers.get("Content-Type")??"";h=this.parseBody(r,D,E)}catch(E){i.error(new Qn({error:E,headers:new wn(a.headers),status:a.status,statusText:a.statusText,url:jw(a)??r.urlWithParams}));return}}d===0&&(d=h?Hw:0),d>=200&&d<300?(i.next(new Gi({body:h,headers:c,status:d,statusText:u,url:l})),i.complete()):i.error(new Qn({error:h,headers:c,status:d,statusText:u,url:l}))})}parseBody(r,o,i){switch(r.responseType){case"json":let s=new TextDecoder().decode(o).replace(iS,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(o);case"blob":return new Blob([o],{type:i});case"arraybuffer":return o.buffer}}createRequestInit(r){let o={},i=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>o[s]=a.join(",")),r.headers.has("Accept")||(o.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(o["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:o,credentials:i}}concatChunks(r,o){let i=new Uint8Array(o),s=0;for(let a of r)i.set(a,s),s+=a.length;return i}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),sf=class{};function af(){}function cS(e){e.then(af,af)}function uS(e,t){return t(e)}function lS(e,t,n){return(r,o)=>Fm(n,()=>t(r,i=>e(i,o)))}var Gw=new W(""),dS=new W(""),fS=new W("",{providedIn:"root",factory:()=>!0});var Uw=(()=>{let t=class t extends $i{constructor(r,o){super(),this.backend=r,this.injector=o,this.chain=null,this.pendingTasks=K(Mo),this.contributeToStability=K(fS)}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Gw),...this.injector.get(dS,[])]));this.chain=o.reduceRight((i,s)=>lS(i,s,this.injector),uS)}if(this.contributeToStability){let o=this.pendingTasks.add();return this.chain(r,i=>this.backend.handle(i)).pipe(nl(()=>this.pendingTasks.remove(o)))}else return this.chain(r,o=>this.backend.handle(o))}};t.\u0275fac=function(o){return new(o||t)(q(oc),q(en))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})();var hS=/^\)\]\}',?\n/;function pS(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var $w=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new X(-2800,!1);let o=this.xhrFactory;return(o.\u0275loadImpl?Ir(o.\u0275loadImpl()):sa(null)).pipe(rl(()=>new be(s=>{let a=o.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,g)=>a.setRequestHeader(m,g.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let m=a.statusText||"OK",g=new wn(a.getAllResponseHeaders()),w=pS(a)||r.url;return u=new ic({headers:g,status:a.status,statusText:m,url:w}),u},d=()=>{let{headers:m,status:g,statusText:w,url:b}=l(),v=null;g!==oS&&(v=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=v?Hw:0);let D=g>=200&&g<300;if(r.responseType==="json"&&typeof v=="string"){let E=v;v=v.replace(hS,"");try{v=v!==""?JSON.parse(v):null}catch(I){v=E,D&&(D=!1,v={error:I,text:v})}}D?(s.next(new Gi({body:v,headers:m,status:g,statusText:w,url:b||void 0})),s.complete()):s.error(new Qn({error:v,headers:m,status:g,statusText:w,url:b||void 0}))},h=m=>{let{url:g}=l(),w=new Qn({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});s.error(w)},p=!1,y=m=>{p||(s.next(l()),p=!0);let g={type:Jn.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),r.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),s.next(g)},f=m=>{let g={type:Jn.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),s.next(g)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",y),c!==null&&a.upload&&a.upload.addEventListener("progress",f)),a.send(c),s.next({type:Jn.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",y),c!==null&&a.upload&&a.upload.removeEventListener("progress",f)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(o){return new(o||t)(q(Fo))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),Ww=new W(""),gS="XSRF-TOKEN",mS=new W("",{providedIn:"root",factory:()=>gS}),yS="X-XSRF-TOKEN",wS=new W("",{providedIn:"root",factory:()=>yS}),sc=class{},vS=(()=>{let t=class t{constructor(r,o,i){this.doc=r,this.platform=o,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ec(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(o){return new(o||t)(q(Ht),q(qn),q(mS))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})();function bS(e,t){let n=e.url.toLowerCase();if(!K(Ww)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=K(sc).getToken(),o=K(wS);return r!=null&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,r)})),t(e)}function zw(...e){let t=[cf,$w,Uw,{provide:$i,useExisting:Uw},{provide:oc,useFactory:()=>K(aS,{optional:!0})??K($w)},{provide:Gw,useValue:bS,multi:!0},{provide:Ww,useValue:!0},{provide:sc,useClass:vS}];for(let n of e)t.push(...n.\u0275providers);return gd(t)}var df=class extends Ja{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ff=class e extends df{static makeCurrent(){kw(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=xS();return n==null?null:IS(n)}resetBaseElement(){Wi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ec(document.cookie,t)}},Wi=null;function xS(){return Wi=Wi||document.querySelector("base"),Wi?Wi.getAttribute("href"):null}function IS(e){return new URL(e,document.baseURI).pathname}var _S=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),ac=new W(""),Zw=(()=>{let t=class t{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new X(5101,!1);return this._eventNameToPlugin.set(r,o),o}};t.\u0275fac=function(o){return new(o||t)(q(ac),q(Ce))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),zi=class{constructor(t){this._doc=t}},uf="ng-app-id",Qw=(()=>{let t=class t{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nc(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${uf}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(uf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(uf,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(o){return new(o||t)(q(Ht),q(Ad),q(Nd,8),q(qn))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),lf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pf=/%COMP%/g,Xw="%COMP%",CS=`_nghost-${Xw}`,SS=`_ngcontent-${Xw}`,TS=!0,AS=new W("",{providedIn:"root",factory:()=>TS});function MS(e){return SS.replace(pf,e)}function NS(e){return CS.replace(pf,e)}function Jw(e,t){return t.map(n=>n.replace(pf,e))}var qw=(()=>{let t=class t{constructor(r,o,i,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=nc(c),this.defaultRenderer=new qi(r,a,u,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Jt.ShadowDom&&(o=V(T({},o),{encapsulation:Jt.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof cc?i.applyToHost(r):i instanceof Ki&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(o.encapsulation){case Jt.Emulated:s=new cc(u,l,o,this.appId,d,a,c,h);break;case Jt.ShadowDom:return new hf(u,l,r,o,a,c,this.nonce,h);default:s=new Ki(u,l,o,d,a,c,h);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(o){return new(o||t)(q(Zw),q(Qw),q(Ad),q(AS),q(Ht),q(qn),q(Ce),q(Nd))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),qi=class{constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(lf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Kw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Kw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new X(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=lf[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=lf[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(hn.DashCase|hn.Important)?t.style.setProperty(n,r,o&hn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&hn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Bo().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Kw(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var hf=class extends qi{constructor(t,n,r,o,i,s,a,c){super(t,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Jw(o.id,o.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ki=class extends qi{constructor(t,n,r,o,i,s,a,c){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?Jw(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cc=class extends Ki{constructor(t,n,r,o,i,s,a,c){let u=o+"-"+r.id;super(t,n,r,i,s,a,c,u),this.contentAttr=MS(u),this.hostAttr=NS(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},kS=(()=>{let t=class t extends zi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};t.\u0275fac=function(o){return new(o||t)(q(Ht))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),RS=(()=>{let t=class t extends zi{constructor(r){super(r),this.delegate=K(Cw,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,o,i){return this.delegate.addEventListener(r,o,i)}removeEventListener(r,o,i){return this.delegate.removeEventListener(r,o,i)}};t.\u0275fac=function(o){return new(o||t)(q(Ht))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),Yw=["alt","control","meta","shift"],OS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},LS=(()=>{let t=class t extends zi{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,o,i){let s=t.parseEventName(o),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),Yw.forEach(l=>{let d=o.indexOf(l);d>-1&&(o.splice(d,1),a+=l+".")}),a+=s,o.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(r,o){let i=OS[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yw.forEach(a=>{if(a!==i){let c=PS[a];c(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{t.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(o){return new(o||t)(q(Ht))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})();function ev(e,t){return _w(T({rootComponent:e},FS(t)))}function FS(e){return{appProviders:[...$S,...e?.providers??[]],platformProviders:US}}function BS(){ff.makeCurrent()}function VS(){return new $n}function jS(){return Cy(document),document}var US=[{provide:qn,useValue:Pw},{provide:Md,useValue:BS,multi:!0},{provide:Ht,useFactory:jS,deps:[]}];var $S=[{provide:ja,useValue:"root"},{provide:$n,useFactory:VS,deps:[]},{provide:ac,useClass:kS,multi:!0,deps:[Ht,Ce,qn]},{provide:ac,useClass:LS,multi:!0,deps:[Ht]},{provide:ac,useClass:RS,multi:!0},qw,Qw,Zw,{provide:_o,useExisting:qw},{provide:Fo,useClass:_S,deps:[]},[]];var tv={providers:[zw()]};var uc=class{constructor(t){this.#e=t}#e;#t=void 0;init(t=1,n){return ae(this,null,function*(){let r=this.#e.module;this.cpp=new r.EmLlamaCpp,yield this.cpp.init(t),this.#t=o=>{let i=o.data;if(!(!i||!i.em_cmd)){if(i.em_cmd==="msg")n.log(i.data);else if(i.em_cmd==="msgAppend"){let s=n.messages[n.messages.length-1];i.data.text&&(s.text+=i.data.text.replace(/\n/g,"")),i.data.pending!==void 0&&(s.pending=i.data.pending)}}},this.#e.worker.addEventListener("message",this.#t)})}destroy(t){return ae(this,null,function*(){yield this.cpp.destroy(),t&&this.#e.module.FS.unlink(t.id),this.#t&&(this.#e.worker.removeEventListener("message",this.#t),this.#t=void 0),this.cpp=void 0})}loadModel(t){return ae(this,null,function*(){this.#e.module.FS.writeFile(t.id,new Uint8Array(t.bytes)),yield this.cpp.load_model(t.id)})}predict(t){return ae(this,null,function*(){return yield this.cpp.predict(t)})}};function nv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function HS(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Vo(e,...t){if(!HS(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function rv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nv(e.outputLen),nv(e.blockLen)}function jo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ov(e,t){Vo(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var lc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var dc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Gt=(e,t)=>e<<32-t|e>>>t,Yi=(e,t)=>e<<t|e>>>32-t>>>0,h2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function GS(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Zi(e){return typeof e=="string"&&(e=GS(e)),Vo(e),e}function fc(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];Vo(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}var Uo=class{clone(){return this._cloneInto()}},p2={}.toString;function hc(e){let t=r=>e().update(Zi(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function $o(e=32){if(lc&&typeof lc.getRandomValues=="function")return lc.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function WS(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}var iv=(e,t,n)=>e&t^~e&n,sv=(e,t,n)=>e&t^e&n^t&n,Ho=class extends Uo{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=dc(this.buffer)}update(t){jo(this);let{view:n,buffer:r,blockLen:o}=this;t=Zi(t);let i=t.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=dc(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jo(this),ov(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let d=s;d<o;d++)n[d]=0;WS(r,o-8,BigInt(this.length*8),i),this.process(r,0);let a=dc(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}};var zS=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tr=new Uint32Array(64),gf=class extends Ho{constructor(){super(64,32,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)tr[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){let h=tr[d-15],p=tr[d-2],y=Gt(h,7)^Gt(h,18)^h>>>3,f=Gt(p,17)^Gt(p,19)^p>>>10;tr[d]=f+tr[d-7]+y+tr[d-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){let h=Gt(a,6)^Gt(a,11)^Gt(a,25),p=l+h+iv(a,c,u)+zS[d]+tr[d]|0,f=(Gt(r,2)^Gt(r,13)^Gt(r,22))+sv(r,o,i)|0;l=u,u=c,c=a,a=s+p|0,s=i,i=o,o=r,r=p+f|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,o,i,s,a,c,u,l)}roundClean(){tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var xe=hc(()=>new gf);var pc=class extends Uo{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,rv(t);let r=Zi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return jo(this),this.iHash.update(t),this}digestInto(t){jo(this),Vo(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Qi=(e,t,n)=>new pc(e,t).update(n).digest();Qi.create=(e,t)=>new pc(e,t);var Ef={};jp(Ef,{aInRange:()=>or,abool:()=>$r,abytes:()=>Go,bitGet:()=>JS,bitLen:()=>XS,bitMask:()=>Ji,bitSet:()=>eT,bytesToHex:()=>Hr,bytesToNumberBE:()=>bn,bytesToNumberLE:()=>mc,concatBytes:()=>Wo,createHmacDrbg:()=>bf,ensureBytes:()=>bt,equalBytes:()=>ZS,hexToBytes:()=>Gr,hexToNumber:()=>vf,inRange:()=>Xi,isBytes:()=>nr,memoized:()=>wc,notImplemented:()=>nT,numberToBytesBE:()=>rr,numberToBytesLE:()=>yc,numberToHexUnpadded:()=>uv,numberToVarBytesBE:()=>YS,utf8ToBytes:()=>QS,validateObject:()=>ir});var wf=BigInt(0),gc=BigInt(1),qS=BigInt(2);function nr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Go(e){if(!nr(e))throw new Error("Uint8Array expected")}function $r(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}var KS=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hr(e){Go(e);let t="";for(let n=0;n<e.length;n++)t+=KS[e[n]];return t}function uv(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function vf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var vn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function av(e){if(e>=vn._0&&e<=vn._9)return e-vn._0;if(e>=vn._A&&e<=vn._F)return e-(vn._A-10);if(e>=vn._a&&e<=vn._f)return e-(vn._a-10)}function Gr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){let s=av(e.charCodeAt(i)),a=av(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function bn(e){return vf(Hr(e))}function mc(e){return Go(e),vf(Hr(Uint8Array.from(e).reverse()))}function rr(e,t){return Gr(e.toString(16).padStart(t*2,"0"))}function yc(e,t){return rr(e,t).reverse()}function YS(e){return Gr(uv(e))}function bt(e,t,n){let r;if(typeof t=="string")try{r=Gr(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(nr(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Wo(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];Go(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}function ZS(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function QS(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}var mf=e=>typeof e=="bigint"&&wf<=e;function Xi(e,t,n){return mf(e)&&mf(t)&&mf(n)&&t<=e&&e<n}function or(e,t,n,r){if(!Xi(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function XS(e){let t;for(t=0;e>wf;e>>=gc,t+=1);return t}function JS(e,t){return e>>BigInt(t)&gc}function eT(e,t,n){return e|(n?gc:wf)<<BigInt(t)}var Ji=e=>(qS<<BigInt(e-1))-gc,yf=e=>new Uint8Array(e),cv=e=>Uint8Array.from(e);function bf(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=yf(e),o=yf(e),i=0,s=()=>{r.fill(1),o.fill(0),i=0},a=(...d)=>n(o,r,...d),c=(d=yf())=>{o=a(cv([0]),d),r=a(),d.length!==0&&(o=a(cv([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<t;){r=a();let p=r.slice();h.push(p),d+=r.length}return Wo(...h)};return(d,h)=>{s(),c(d);let p;for(;!(p=h(u()));)c();return s(),p}}var tT={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||nr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ir(e,t,n={}){let r=(o,i,s)=>{let a=tT[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var nT=()=>{throw new Error("not implemented")};function wc(e){let t=new WeakMap;return(n,...r)=>{let o=t.get(n);if(o!==void 0)return o;let i=e(n,...r);return t.set(n,i),i}}var Me=BigInt(0),Ee=BigInt(1),Wr=BigInt(2),rT=BigInt(3),Df=BigInt(4),lv=BigInt(5),dv=BigInt(8),oT=BigInt(9),iT=BigInt(16);function ze(e,t){let n=e%t;return n>=Me?n:t+n}function sT(e,t,n){if(n<=Me||t<Me)throw new Error("Expected power/modulo > 0");if(n===Ee)return Me;let r=Ee;for(;t>Me;)t&Ee&&(r=r*e%n),e=e*e%n,t>>=Ee;return r}function Et(e,t,n){let r=e;for(;t-- >Me;)r*=r,r%=n;return r}function vc(e,t){if(e===Me||t<=Me)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ze(e,t),r=t,o=Me,i=Ee,s=Ee,a=Me;for(;n!==Me;){let u=r/n,l=r%n,d=o-s*u,h=i-a*u;r=n,n=l,o=s,i=a,s=d,a=h}if(r!==Ee)throw new Error("invert: does not exist");return ze(o,t)}function aT(e){let t=(e-Ee)/Wr,n,r,o;for(n=e-Ee,r=0;n%Wr===Me;n/=Wr,r++);for(o=Wr;o<e&&sT(o,t,e)!==e-Ee;o++);if(r===1){let s=(e+Ee)/Df;return function(c,u){let l=c.pow(u,s);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}let i=(n+Ee)/Wr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,o),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let f=a.sqr(h);p<u&&!a.eql(f,a.ONE);p++)f=a.sqr(f);let y=a.pow(l,Ee<<BigInt(u-p-1));l=a.sqr(y),d=a.mul(d,y),h=a.mul(h,l),u=p}return d}}function cT(e){if(e%Df===rT){let t=(e+Ee)/Df;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%dv===lv){let t=(e-lv)/dv;return function(r,o){let i=r.mul(o,Wr),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,Wr),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return e%iT,aT(e)}var uT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xf(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=uT.reduce((r,o)=>(r[o]="function",r),t);return ir(e,n)}function lT(e,t,n){if(n<Me)throw new Error("Expected power > 0");if(n===Me)return e.ONE;if(n===Ee)return t;let r=e.ONE,o=t;for(;n>Me;)n&Ee&&(r=e.mul(r,o)),o=e.sqr(o),n>>=Ee;return r}function dT(e,t){let n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function If(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function fv(e,t,n=!1,r={}){if(e<=Me)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=If(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=cT(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Ji(o),ZERO:Me,ONE:Ee,create:c=>ze(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Me<=c&&c<e},is0:c=>c===Me,isOdd:c=>(c&Ee)===Ee,neg:c=>ze(-c,e),eql:(c,u)=>c===u,sqr:c=>ze(c*c,e),add:(c,u)=>ze(c+u,e),sub:(c,u)=>ze(c-u,e),mul:(c,u)=>ze(c*u,e),pow:(c,u)=>lT(a,c,u),div:(c,u)=>ze(c*vc(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>vc(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>dT(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?yc(c,i):rr(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?mc(c):bn(c)}});return Object.freeze(a)}function hv(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function _f(e){let t=hv(e);return t+Math.ceil(t/2)}function pv(e,t,n=!1){let r=e.length,o=hv(t),i=_f(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let s=n?bn(e):mc(e),a=ze(s,t-Ee)+Ee;return n?yc(a,o):rr(a,o)}var hT=BigInt(0),Cf=BigInt(1),Sf=new WeakMap,gv=new WeakMap;function mv(e,t){let n=(i,s)=>{let a=s.negate();return i?a:s},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},o=i=>{r(i);let s=Math.ceil(t/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>hT;)s&Cf&&(a=a.add(c)),c=c.double(),s>>=Cf;return a},precomputeWindow(i,s){let{windows:a,windowSize:c}=o(s),u=[],l=i,d=l;for(let h=0;h<a;h++){d=l,u.push(d);for(let p=1;p<c;p++)d=d.add(l),u.push(d);l=d.double()}return u},wNAF(i,s,a){let{windows:c,windowSize:u}=o(i),l=e.ZERO,d=e.BASE,h=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let f=0;f<c;f++){let m=f*u,g=Number(a&h);a>>=y,g>u&&(g-=p,a+=Cf);let w=m,b=m+Math.abs(g)-1,v=f%2!==0,D=g<0;g===0?d=d.add(n(v,s[w])):l=l.add(n(D,s[b]))}return{p:l,f:d}},wNAFCached(i,s,a){let c=gv.get(i)||1,u=Sf.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&Sf.set(i,a(u))),this.wNAF(c,u,s)},setWindowSize(i,s){r(s),gv.set(i,s),Sf.delete(i)}}}function Tf(e){return xf(e.Fp),ir(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(V(T(T({},If(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}function yv(e){e.lowS!==void 0&&$r("lowS",e.lowS),e.prehash!==void 0&&$r("prehash",e.prehash)}function pT(e){let t=Tf(e);ir(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(T({},t))}var{bytesToNumberBE:gT,hexToBytes:mT}=Ef,zr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=zr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:gT(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=zr,n=typeof e=="string"?mT(e):e;Go(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=zr._parseInt(n.subarray(2)),{d:s,l:a}=zr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{let l=u.toString(16);return l.length&1?`0${l}`:l},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},sr=BigInt(0),Le=BigInt(1),O2=BigInt(2),wv=BigInt(3),P2=BigInt(4);function yT(e){let t=pT(e),{Fp:n}=t,r=t.toBytes||((y,f,m)=>{let g=f.toAffine();return Wo(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),o=t.fromBytes||(y=>{let f=y.subarray(1),m=n.fromBytes(f.subarray(0,n.BYTES)),g=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:m,y:g}});function i(y){let{a:f,b:m}=t,g=n.sqr(y),w=n.mul(g,y);return n.add(n.add(w,n.mul(y,f)),m)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return Xi(y,Le,t.n)}function a(y){let{allowedPrivateKeyLengths:f,nByteLength:m,wrapPrivateKey:g,n:w}=t;if(f&&typeof y!="bigint"){if(nr(y)&&(y=Hr(y)),typeof y!="string"||!f.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let b;try{b=typeof y=="bigint"?y:bn(bt("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return g&&(b=ze(b,w)),or("private key",b,Le,w),b}function c(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}let u=wc((y,f)=>{let{px:m,py:g,pz:w}=y;if(n.eql(w,n.ONE))return{x:m,y:g};let b=y.is0();f==null&&(f=b?n.ONE:n.inv(w));let v=n.mul(m,f),D=n.mul(g,f),E=n.mul(w,f);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:v,y:D}}),l=wc(y=>{if(y.is0()){if(t.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}let{x:f,y:m}=y.toAffine();if(!n.isValid(f)||!n.isValid(m))throw new Error("bad point: x or y not FE");let g=n.sqr(m),w=i(f);if(!n.eql(g,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(f,m,g){if(this.px=f,this.py=m,this.pz=g,f==null||!n.isValid(f))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:m,y:g}=f||{};if(!f||!n.isValid(m)||!n.isValid(g))throw new Error("invalid affine point");if(f instanceof d)throw new Error("projective point not allowed");let w=b=>n.eql(b,n.ZERO);return w(m)&&w(g)?d.ZERO:new d(m,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let m=n.invertBatch(f.map(g=>g.pz));return f.map((g,w)=>g.toAffine(m[w])).map(d.fromAffine)}static fromHex(f){let m=d.fromAffine(o(bt("pointHex",f)));return m.assertValidity(),m}static fromPrivateKey(f){return d.BASE.multiply(a(f))}_setWindowSize(f){p.setWindowSize(this,f)}assertValidity(){l(this)}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);let{px:m,py:g,pz:w}=this,{px:b,py:v,pz:D}=f,E=n.eql(n.mul(m,D),n.mul(b,w)),I=n.eql(n.mul(g,D),n.mul(v,w));return E&&I}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b:m}=t,g=n.mul(m,wv),{px:w,py:b,pz:v}=this,D=n.ZERO,E=n.ZERO,I=n.ZERO,_=n.mul(w,w),B=n.mul(b,b),N=n.mul(v,v),S=n.mul(w,b);return S=n.add(S,S),I=n.mul(w,v),I=n.add(I,I),D=n.mul(f,I),E=n.mul(g,N),E=n.add(D,E),D=n.sub(B,E),E=n.add(B,E),E=n.mul(D,E),D=n.mul(S,D),I=n.mul(g,I),N=n.mul(f,N),S=n.sub(_,N),S=n.mul(f,S),S=n.add(S,I),I=n.add(_,_),_=n.add(I,_),_=n.add(_,N),_=n.mul(_,S),E=n.add(E,_),N=n.mul(b,v),N=n.add(N,N),_=n.mul(N,S),D=n.sub(D,_),I=n.mul(N,B),I=n.add(I,I),I=n.add(I,I),new d(D,E,I)}add(f){c(f);let{px:m,py:g,pz:w}=this,{px:b,py:v,pz:D}=f,E=n.ZERO,I=n.ZERO,_=n.ZERO,B=t.a,N=n.mul(t.b,wv),S=n.mul(m,b),G=n.mul(g,v),L=n.mul(w,D),M=n.add(m,g),x=n.add(b,v);M=n.mul(M,x),x=n.add(S,G),M=n.sub(M,x),x=n.add(m,w);let C=n.add(b,D);return x=n.mul(x,C),C=n.add(S,L),x=n.sub(x,C),C=n.add(g,w),E=n.add(v,D),C=n.mul(C,E),E=n.add(G,L),C=n.sub(C,E),_=n.mul(B,x),E=n.mul(N,L),_=n.add(E,_),E=n.sub(G,_),_=n.add(G,_),I=n.mul(E,_),G=n.add(S,S),G=n.add(G,S),L=n.mul(B,L),x=n.mul(N,x),G=n.add(G,L),L=n.sub(S,L),L=n.mul(B,L),x=n.add(x,L),S=n.mul(G,x),I=n.add(I,S),S=n.mul(C,x),E=n.mul(M,E),E=n.sub(E,S),S=n.mul(M,G),_=n.mul(C,_),_=n.add(_,S),new d(E,I,_)}subtract(f){return this.add(f.negate())}is0(){return this.equals(d.ZERO)}wNAF(f){return p.wNAFCached(this,f,d.normalizeZ)}multiplyUnsafe(f){or("scalar",f,sr,t.n);let m=d.ZERO;if(f===sr)return m;if(f===Le)return this;let{endo:g}=t;if(!g)return p.unsafeLadder(this,f);let{k1neg:w,k1:b,k2neg:v,k2:D}=g.splitScalar(f),E=m,I=m,_=this;for(;b>sr||D>sr;)b&Le&&(E=E.add(_)),D&Le&&(I=I.add(_)),_=_.double(),b>>=Le,D>>=Le;return w&&(E=E.negate()),v&&(I=I.negate()),I=new d(n.mul(I.px,g.beta),I.py,I.pz),E.add(I)}multiply(f){let{endo:m,n:g}=t;or("scalar",f,Le,g);let w,b;if(m){let{k1neg:v,k1:D,k2neg:E,k2:I}=m.splitScalar(f),{p:_,f:B}=this.wNAF(D),{p:N,f:S}=this.wNAF(I);_=p.constTimeNegate(v,_),N=p.constTimeNegate(E,N),N=new d(n.mul(N.px,m.beta),N.py,N.pz),w=_.add(N),b=B.add(S)}else{let{p:v,f:D}=this.wNAF(f);w=v,b=D}return d.normalizeZ([w,b])[0]}multiplyAndAddUnsafe(f,m,g){let w=d.BASE,b=(D,E)=>E===sr||E===Le||!D.equals(w)?D.multiplyUnsafe(E):D.multiply(E),v=b(this,m).add(b(f,g));return v.is0()?void 0:v}toAffine(f){return u(this,f)}isTorsionFree(){let{h:f,isTorsionFree:m}=t;if(f===Le)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:m}=t;return f===Le?this:m?m(d,this):this.multiplyUnsafe(t.h)}toRawBytes(f=!0){return $r("isCompressed",f),this.assertValidity(),r(d,this,f)}toHex(f=!0){return $r("isCompressed",f),Hr(this.toRawBytes(f))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);let h=t.nBitLength,p=mv(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:s}}function wT(e){let t=Tf(e);return ir(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(T({lowS:!0},t))}function vv(e){let t=wT(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(M){return ze(M,r)}function a(M){return vc(M,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=yT(V(T({},t),{toBytes(M,x,C){let k=x.toAffine(),P=n.toBytes(k.x),U=Wo;return $r("isCompressed",C),C?U(Uint8Array.from([x.hasEvenY()?2:3]),P):U(Uint8Array.from([4]),P,n.toBytes(k.y))},fromBytes(M){let x=M.length,C=M[0],k=M.subarray(1);if(x===o&&(C===2||C===3)){let P=bn(k);if(!Xi(P,Le,n.ORDER))throw new Error("Point is not on curve");let U=l(P),J;try{J=n.sqrt(U)}catch(ye){let ve=ye instanceof Error?": "+ye.message:"";throw new Error("Point is not on curve"+ve)}let ee=(J&Le)===Le;return(C&1)===1!==ee&&(J=n.neg(J)),{x:P,y:J}}else if(x===i&&C===4){let P=n.fromBytes(k.subarray(0,n.BYTES)),U=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:P,y:U}}else throw new Error(`Point of length ${x} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}})),h=M=>Hr(rr(M,t.nByteLength));function p(M){let x=r>>Le;return M>x}function y(M){return p(M)?s(-M):M}let f=(M,x,C)=>bn(M.slice(x,C));class m{constructor(x,C,k){this.r=x,this.s=C,this.recovery=k,this.assertValidity()}static fromCompact(x){let C=t.nByteLength;return x=bt("compactSignature",x,C*2),new m(f(x,0,C),f(x,C,2*C))}static fromDER(x){let{r:C,s:k}=zr.toSig(bt("DER",x));return new m(C,k)}assertValidity(){or("r",this.r,Le,r),or("s",this.s,Le,r)}addRecoveryBit(x){return new m(this.r,this.s,x)}recoverPublicKey(x){let{r:C,s:k,recovery:P}=this,U=E(bt("msgHash",x));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");let J=P===2||P===3?C+t.n:C;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let ee=P&1?"03":"02",oe=c.fromHex(ee+h(J)),ye=a(J),ve=s(-U*ye),ot=s(k*ye),it=c.BASE.multiplyAndAddUnsafe(oe,ve,ot);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Gr(this.toDERHex())}toDERHex(){return zr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Gr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let g={isValidPrivateKey(M){try{return u(M),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let M=_f(t.n);return pv(t.randomBytes(M),t.n)},precompute(M=8,x=c.BASE){return x._setWindowSize(M),x.multiply(BigInt(3)),x}};function w(M,x=!0){return c.fromPrivateKey(M).toRawBytes(x)}function b(M){let x=nr(M),C=typeof M=="string",k=(x||C)&&M.length;return x?k===o||k===i:C?k===2*o||k===2*i:M instanceof c}function v(M,x,C=!0){if(b(M))throw new Error("first arg must be private key");if(!b(x))throw new Error("second arg must be public key");return c.fromHex(x).multiply(u(M)).toRawBytes(C)}let D=t.bits2int||function(M){let x=bn(M),C=M.length*8-t.nBitLength;return C>0?x>>BigInt(C):x},E=t.bits2int_modN||function(M){return s(D(M))},I=Ji(t.nBitLength);function _(M){return or(`num < 2^${t.nBitLength}`,M,sr,I),rr(M,t.nByteLength)}function B(M,x,C=N){if(["recovered","canonical"].some(Lt=>Lt in C))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:P}=t,{lowS:U,prehash:J,extraEntropy:ee}=C;U==null&&(U=!0),M=bt("msgHash",M),yv(C),J&&(M=bt("prehashed msgHash",k(M)));let oe=E(M),ye=u(x),ve=[_(ye),_(oe)];if(ee!=null&&ee!==!1){let Lt=ee===!0?P(n.BYTES):ee;ve.push(bt("extraEntropy",Lt))}let ot=Wo(...ve),it=oe;function St(Lt){let st=D(Lt);if(!d(st))return;let un=a(st),gt=c.BASE.multiply(st).toAffine(),Ue=s(gt.x);if(Ue===sr)return;let Ft=s(un*s(it+Ue*ye));if(Ft===sr)return;let br=(gt.x===Ue?0:2)|Number(gt.y&Le),gi=Ft;return U&&p(Ft)&&(gi=y(Ft),br^=1),new m(Ue,gi,br)}return{seed:ot,k2sig:St}}let N={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};function G(M,x,C=N){let{seed:k,k2sig:P}=B(M,x,C),U=t;return bf(U.hash.outputLen,U.nByteLength,U.hmac)(k,P)}c.BASE._setWindowSize(8);function L(M,x,C,k=S){let P=M;if(x=bt("msgHash",x),C=bt("publicKey",C),"strict"in k)throw new Error("options.strict was renamed to lowS");yv(k);let{lowS:U,prehash:J}=k,ee,oe;try{if(typeof P=="string"||nr(P))try{ee=m.fromDER(P)}catch(gt){if(!(gt instanceof zr.Err))throw gt;ee=m.fromCompact(P)}else if(typeof P=="object"&&typeof P.r=="bigint"&&typeof P.s=="bigint"){let{r:gt,s:Ue}=P;ee=new m(gt,Ue)}else throw new Error("PARSE");oe=c.fromHex(C)}catch(gt){if(gt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&ee.hasHighS())return!1;J&&(x=t.hash(x));let{r:ye,s:ve}=ee,ot=E(x),it=a(ve),St=s(ot*it),Lt=s(ye*it),st=c.BASE.multiplyAndAddUnsafe(oe,St,Lt)?.toAffine();return st?s(st.x)===ye:!1}return{CURVE:t,getPublicKey:w,getSharedSecret:v,sign:G,verify:L,ProjectivePoint:c,Signature:m,utils:g}}function vT(e){return{hash:e,hmac:(t,...n)=>Qi(e,t,fc(...n)),randomBytes:$o}}function bv(e,t){let n=r=>vv(T(T({},e),vT(r)));return Object.freeze(V(T({},n(t)),{create:n}))}var xv=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ev=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bT=BigInt(1),Af=BigInt(2),Dv=(e,t)=>(e+t/Af)/t;function ET(e){let t=xv,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=Et(l,n,t)*l%t,h=Et(d,n,t)*l%t,p=Et(h,Af,t)*u%t,y=Et(p,o,t)*p%t,f=Et(y,i,t)*y%t,m=Et(f,a,t)*f%t,g=Et(m,c,t)*m%t,w=Et(g,a,t)*f%t,b=Et(w,n,t)*l%t,v=Et(b,s,t)*y%t,D=Et(v,r,t)*u%t,E=Et(D,Af,t);if(!Mf.eql(Mf.sqr(E),e))throw new Error("Cannot find square root");return E}var Mf=fv(xv,void 0,void 0,{sqrt:ET}),Nf=bv({a:BigInt(0),b:BigInt(7),Fp:Mf,n:Ev,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Ev,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-bT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=Dv(i*e,t),c=Dv(-r*e,t),u=ze(e-a*n-c*o,t),l=ze(-a*r-c*i,t),d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},xe),z2=BigInt(0);var q2=Nf.ProjectivePoint;function zo(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function bc(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Dc(...e){let t=i=>i,n=(i,s)=>a=>i(s(a)),r=e.map(i=>i.encode).reduceRight(n,t),o=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:o}}function Of(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Pf(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function DT(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Iv(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0,o=[],i=Array.from(e);for(i.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=r;c<i.length;c++){let u=i[c],l=t*s+u;if(!Number.isSafeInteger(l)||t*s/t!==s||l-u!==t*s)throw new Error("convertRadix: carry overflow");s=l%n;let d=Math.floor(l/n);if(i[c]=d,!Number.isSafeInteger(d)||d*n+s!==l)throw new Error("convertRadix: carry overflow");if(a)d?a=!1:r=c;else continue}if(o.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}var Tv=(e,t)=>t?Tv(t,e%t):e,Ec=(e,t)=>e+(t-Tv(e,t));function kf(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ec(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ec(t,n)}`);let o=0,i=0,s=2**n-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function xT(e){return{encode:t=>{if(!bc(t))throw new Error("radix.encode input should be Uint8Array");return Iv(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Iv(t,e,2**8))}}}function Av(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ec(8,e)>32||Ec(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!bc(n))throw new Error("radix2.encode input should be Uint8Array");return kf(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(kf(n,e,8,t))}}}function _v(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function IT(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!bc(n))throw new Error("checksum.encode: input should be Uint8Array");let r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!bc(n))throw new Error("checksum.decode: input should be Uint8Array");let r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let s=0;s<e;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return r}}}var _T=e=>Dc(xT(58),Of(e),Pf("")),xc=_T("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Mv=e=>Dc(IT(4,t=>e(e(t))),xc);var Rf=Dc(Of("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Pf("")),Cv=[996825010,642813549,513874426,1027748829,705979059];function es(e){let t=e>>25,n=(e&33554431)<<5;for(let r=0;r<Cv.length;r++)(t>>r&1)===1&&(n^=Cv[r]);return n}function Sv(e,t,n=1){let r=e.length,o=1;for(let i=0;i<r;i++){let s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=es(o)^s>>5}o=es(o);for(let i=0;i<r;i++)o=es(o)^e.charCodeAt(i)&31;for(let i of t)o=es(o)^i;for(let i=0;i<6;i++)o=es(o);return o^=n,Rf.encode(kf([o%2**30],30,5,!1))}function Nv(e){let t=e==="bech32"?1:734539939,n=Av(5),r=n.decode,o=n.encode,i=_v(r);function s(l,d,h=90){if(typeof l!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof l}`);if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof d}`);if(l.length===0)throw new TypeError(`Invalid prefix length ${l.length}`);let p=l.length+7+d.length;if(h!==!1&&p>h)throw new TypeError(`Length ${p} exceeds limit ${h}`);let y=l.toLowerCase(),f=Sv(y,d,t);return`${y}1${Rf.encode(d)}${f}`}function a(l,d=90){if(typeof l!="string")throw new Error(`bech32.decode input should be string, not ${typeof l}`);if(l.length<8||d!==!1&&l.length>d)throw new TypeError(`Wrong string length: ${l.length} (${l}). Expected (8..${d})`);let h=l.toLowerCase();if(l!==h&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");let p=h.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');let y=h.slice(0,p),f=h.slice(p+1);if(f.length<6)throw new Error("Data must be at least 6 characters long");let m=Rf.decode(f).slice(0,-6),g=Sv(y,m,t);if(!f.endsWith(g))throw new Error(`Invalid checksum in ${l}: expected "${g}"`);return{prefix:y,words:m}}let c=_v(a);function u(l){let{prefix:d,words:h}=a(l,!1);return{prefix:d,words:h,bytes:r(h)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:i,toWords:o}}var Ic=Nv("bech32"),Lf=Nv("bech32m"),kv={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},ue=Dc(Av(4),Of("0123456789abcdef"),Pf(""),DT(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var fe=new Uint8Array,jf=new Uint8Array([0]);function qo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Rt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function CT(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];if(!Rt(o))throw new Error("Uint8Array expected");t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}var Uf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Ko(e){return Object.prototype.toString.call(e)==="[object Object]"}function rn(e){return Number.isSafeInteger(e)}var Rv={equalBytes:qo,isBytes:Rt,isCoder:Dt,checkBounds:Pv,concatBytes:CT,createView:Uf,isPlainObject:Ko},Ov=e=>{if(e!==null&&typeof e!="string"&&!Dt(e)&&!Rt(e)&&!rn(e))throw new Error(`lengthCoder: expected null | number | Uint8Array | CoderType, got ${e} (${typeof e})`);return{encodeStream(t,n){if(e===null)return;if(Dt(e))return e.encodeStream(t,n);let r;if(typeof e=="number"?r=e:typeof e=="string"&&(r=En.resolve(t.stack,e)),typeof r=="bigint"&&(r=Number(r)),r===void 0||r!==n)throw t.err(`Wrong length: ${r} len=${e} exp=${n} (${typeof n})`)},decodeStream(t){let n;if(Dt(e)?n=Number(e.decodeStream(t)):typeof e=="number"?n=e:typeof e=="string"&&(n=En.resolve(t.stack,e)),typeof n=="bigint"&&(n=Number(n)),typeof n!="number")throw t.err(`Wrong length: ${n}`);return n}}},Fe={BITS:32,FULL_MASK:-1>>>0,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(Fe.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map(t=>(t>>>0).toString(2).padStart(32,"0")),checkLen:(e,t)=>{if(Fe.len(t)!==e.length)throw new Error(`wrong length=${e.length}. Expected: ${Fe.len(t)}`)},chunkLen:(e,t,n)=>{if(t<0)throw new Error(`wrong pos=${t}`);if(t+n>e)throw new Error(`wrong range=${t}/${n} of ${e}`)},set:(e,t,n,r=!0)=>!r&&e[t]&n?!1:(e[t]|=n,!0),pos:(e,t)=>({chunk:Math.floor((e+t)/32),mask:1<<32-(e+t)%32-1}),indices:(e,t,n=!1)=>{Fe.checkLen(e,t);let{FULL_MASK:r,BITS:o}=Fe,i=o-t%o,s=i?r>>>i<<i:r,a=[];for(let c=0;c<e.length;c++){let u=e[c];if(n&&(u=~u),c===e.length-1&&(u&=s),u!==0)for(let l=0;l<o;l++){let d=1<<o-l-1;u&d&&a.push(c*o+l)}}return a},range:e=>{let t=[],n;for(let r of e)n===void 0||r!==n.pos+n.length?t.push(n={pos:r,length:1}):n.length+=1;return t},rangeDebug:(e,t,n=!1)=>`[${Fe.range(Fe.indices(e,t,n)).map(r=>`(${r.pos}/${r.length})`).join(", ")}]`,setRange:(e,t,n,r,o=!0)=>{Fe.chunkLen(t,n,r);let{FULL_MASK:i,BITS:s}=Fe,a=n%s?Math.floor(n/s):void 0,c=n+r,u=c%s?Math.floor(c/s):void 0;if(a!==void 0&&a===u)return Fe.set(e,a,i>>>s-r<<s-r-n,o);if(a!==void 0&&!Fe.set(e,a,i>>>n%s,o))return!1;let l=a!==void 0?a+1:n/s,d=u!==void 0?u:c/s;for(let h=l;h<d;h++)if(!Fe.set(e,h,i,o))return!1;return!(u!==void 0&&a!==u&&!Fe.set(e,u,i<<s-c%s,o))}},En={pushObj:(e,t,n)=>{let r={obj:t};e.push(r),n((o,i)=>{r.field=o,i(),r.field=void 0}),e.pop()},path:e=>{let t=[];for(let n of e)n.field!==void 0&&t.push(n.field);return t.join("/")},err(e,t,n){let r=new Error(`${e}(${En.path(t)}): ${typeof n=="string"?n:n.message}`);return n instanceof Error&&n.stack&&(r.stack=n.stack),r},resolve:(e,t)=>{let n=t.split("/"),r=e.map(s=>s.obj),o=0;for(;o<n.length&&n[o]==="..";o++)r.pop();let i=r.pop();for(;o<n.length;o++){if(!i||i[n[o]]===void 0)return;i=i[n[o]]}return i}},Ff=class e{constructor(t,n={},r=[],o=void 0,i=0){this.data=t,this.opts=n,this.stack=r,this.parent=o,this.parentOffset=i,this.pos=0,this.bitBuf=0,this.bitPos=0,this.view=Uf(t)}_enablePointers(){if(this.parent)return this.parent._enablePointers();this.bs||(this.bs=Fe.create(this.data.length),Fe.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(t,n){return this.parent?this.parent.markBytesBS(this.parentOffset+t,n):!n||!this.bs?!0:Fe.setRange(this.bs,this.data.length,t,n,!1)}markBytes(t){let n=this.pos;this.pos+=t;let r=this.markBytesBS(n,t);if(!this.opts.allowMultipleReads&&!r)throw this.err(`multiple read pos=${this.pos} len=${t}`);return r}pushObj(t,n){return En.pushObj(this.stack,t,n)}readView(t,n){if(!Number.isFinite(t))throw this.err(`readView: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readView: Unexpected end of buffer");let r=n(this.view,this.pos);return this.markBytes(t),r}absBytes(t){if(t>this.data.length)throw new Error("Unexpected end of buffer");return this.data.subarray(t)}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err(`${this.bitPos} bits left after unpack: ${ue.encode(this.data.slice(this.pos))}`);if(this.bs&&!this.parent){let t=Fe.indices(this.bs,this.data.length,!0);if(t.length){let n=Fe.range(t).map(({pos:r,length:o})=>`(${r}/${o})[${ue.encode(this.data.subarray(r,r+o))}]`).join(", ");throw this.err(`unread byte ranges: ${n} (total=${this.data.length})`)}else return}if(!this.isEnd())throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${ue.encode(this.data.slice(this.pos))}`)}}err(t){return En.err("Reader",this.stack,t)}offsetReader(t){if(t>this.data.length)throw this.err("offsetReader: Unexpected end of buffer");return new e(this.absBytes(t),this.opts,this.stack,this,t)}bytes(t,n=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let r=this.data.subarray(this.pos,this.pos+t);return n||this.markBytes(t),r}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");if(this.pos+1>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data[this.pos];return t||this.markBytes(1),n}get leftBytes(){return this.data.length-this.pos}get totalBytes(){return this.data.length}isEnd(){return this.pos>=this.data.length&&!this.bitPos}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let n=0;for(;t;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);let r=Math.min(t,this.bitPos);this.bitPos-=r,n=n<<r|this.bitBuf>>this.bitPos&2**r-1,this.bitBuf&=2**this.bitPos-1,t-=r}return n>>>0}find(t,n=this.pos){if(!Rt(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let r=n;(r=this.data.indexOf(t[0],r))!==-1;r++){if(r===-1||this.data.length-r<t.length)return;if(qo(t,this.data.subarray(r,r+t.length)))return r}}},Bf=class{constructor(t=[]){this.stack=t,this.pos=0,this.buffers=[],this.ptrs=[],this.bitBuf=0,this.bitPos=0,this.viewBuf=new Uint8Array(8),this.finished=!1,this.view=Uf(this.viewBuf)}pushObj(t,n){return En.pushObj(this.stack,t,n)}writeView(t,n){if(this.finished)throw this.err("buffer: finished");if(!rn(t)||t>8)throw new Error(`wrong writeView length=${t}`);n(this.view),this.bytes(this.viewBuf.slice(0,t)),this.viewBuf.fill(0)}err(t){if(this.finished)throw this.err("buffer: finished");return En.err("Reader",this.stack,t)}bytes(t){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}finish(t=!0){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let n=this.buffers.concat(this.ptrs.map(i=>i.buffer)),r=n.map(i=>i.length).reduce((i,s)=>i+s,0),o=new Uint8Array(r);for(let i=0,s=0;i<n.length;i++){let a=n[i];o.set(a,s),s+=a.length}for(let i=this.pos,s=0;s<this.ptrs.length;s++){let a=this.ptrs[s];o.set(a.ptr.encode(i),a.pos),i+=a.buffer.length}if(t){this.buffers=[];for(let i of this.ptrs)i.buffer.fill(0);this.ptrs=[],this.finished=!0,this.bitBuf=0}return o}bits(t,n){if(n>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**n)throw this.err(`writeBits: value (${t}) >= 2**bits (${n})`);for(;n;){let r=Math.min(n,8-this.bitPos);this.bitBuf=this.bitBuf<<r|t>>n-r,this.bitPos+=r,n-=r,t&=2**n-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}},Vf=e=>Uint8Array.from(e).reverse();function Pv(e,t,n){if(n){let r=2n**(t-1n);if(e<-r||e>=r)throw new Error(`value out of signed bounds. Expected ${-r} <= ${e} < ${r}`)}else if(0n>e||e>=2n**t)throw new Error(`value out of unsigned bounds. Expected 0 <= ${e} < ${2n**t}`)}function Lv(e){return{encodeStream:e.encodeStream,decodeStream:e.decodeStream,size:e.size,encode:t=>{let n=new Bf;return e.encodeStream(n,t),n.finish()},decode:(t,n={})=>{let r=new Ff(t,n),o=e.decodeStream(r);return r.finish(),o}}}function qe(e,t){if(!Dt(e))throw new Error(`validate: invalid inner value ${e}`);if(typeof t!="function")throw new Error("validate: fn should be function");return Lv({size:e.size,encodeStream:(n,r)=>{let o;try{o=t(r)}catch(i){throw n.err(i)}e.encodeStream(n,o)},decodeStream:n=>{let r=e.decodeStream(n);try{return t(r)}catch(o){throw n.err(o)}}})}var Ke=e=>{let t=Lv(e);return e.validate?qe(t,e.validate):t},_c=e=>Ko(e)&&typeof e.decode=="function"&&typeof e.encode=="function";function Dt(e){return Ko(e)&&_c(e)&&typeof e.encodeStream=="function"&&typeof e.decodeStream=="function"&&(e.size===void 0||rn(e.size))}function ST(){return{encode:e=>{if(!Array.isArray(e))throw new Error("array expected");let t={};for(let n of e){if(!Array.isArray(n)||n.length!==2)throw new Error("array of two elements expected");let r=n[0],o=n[1];if(t[r]!==void 0)throw new Error(`key(${r}) appears twice in struct`);t[r]=o}return t},decode:e=>{if(!Ko(e))throw new Error(`expected plain object, got ${e}`);return Object.entries(e)}}}var TT={encode:e=>{if(typeof e!="bigint")throw new Error(`expected bigint, got ${typeof e}`);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>{if(!rn(e))throw new Error("element is not a safe integer");return BigInt(e)}};function AT(e){if(!Ko(e))throw new Error("plain object expected");return{encode:t=>{if(!rn(t)||!(t in e))throw new Error(`wrong value ${t}`);return e[t]},decode:t=>{if(typeof t!="string")throw new Error(`wrong value ${typeof t}`);return e[t]}}}function MT(e,t=!1){if(!rn(e))throw new Error(`decimal/precision: wrong value ${e}`);if(typeof t!="boolean")throw new Error(`decimal/round: expected boolean, got ${typeof t}`);let n=10n**BigInt(e);return{encode:r=>{if(typeof r!="bigint")throw new Error(`expected bigint, got ${typeof r}`);let o=(r<0n?-r:r).toString(10),i=o.length-e;i<0&&(o=o.padStart(o.length-i,"0"),i=0);let s=o.length-1;for(;s>=i&&o[s]==="0";s--);let a=o.slice(0,i),c=o.slice(i,s+1);return a||(a="0"),r<0n&&(a="-"+a),c?`${a}.${c}`:a},decode:r=>{if(typeof r!="string")throw new Error(`expected string, got ${typeof r}`);if(r==="-0")throw new Error("negative zero is not allowed");let o=!1;if(r.startsWith("-")&&(o=!0,r=r.slice(1)),!/^(0|[1-9]\d*)(\.\d+)?$/.test(r))throw new Error(`wrong string value=${r}`);let i=r.indexOf(".");i=i===-1?r.length:i;let s=r.slice(0,i),a=r.slice(i+1).replace(/0+$/,""),c=BigInt(s)*n;if(!t&&a.length>e)throw new Error(`fractional part cannot be represented with this precision (num=${r}, prec=${e})`);let u=Math.min(a.length,e),l=BigInt(a.slice(0,u))*10n**BigInt(e-u),d=c+l;return o?-d:d}}}function NT(e){if(!Array.isArray(e))throw new Error(`expected array, got ${typeof e}`);for(let t of e)if(!_c(t))throw new Error(`wrong base coder ${t}`);return{encode:t=>{for(let n of e){let r=n.encode(t);if(r!==void 0)return r}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let n of e){let r=n.decode(t);if(r!==void 0)return r}throw new Error(`match/decode: cannot find match in ${t}`)}}}var Fv=e=>{if(!_c(e))throw new Error("BaseCoder expected");return{encode:e.decode,decode:e.encode}},Dn={dict:ST,numberBigint:TT,tsEnum:AT,decimal:MT,match:NT,reverse:Fv};var $f=(e,t=!1,n=!1,r=!0)=>{if(!rn(e))throw new Error(`bigint/size: wrong value ${e}`);if(typeof t!="boolean")throw new Error(`bigint/le: expected boolean, got ${typeof t}`);if(typeof n!="boolean")throw new Error(`bigint/signed: expected boolean, got ${typeof n}`);if(typeof r!="boolean")throw new Error(`bigint/sized: expected boolean, got ${typeof r}`);let o=BigInt(e),i=2n**(8n*o-1n);return Ke({size:r?e:void 0,encodeStream:(s,a)=>{n&&a<0&&(a=a|i);let c=[];for(let l=0;l<e;l++)c.push(Number(a&255n)),a>>=8n;let u=new Uint8Array(c).reverse();if(!r){let l=0;for(l=0;l<u.length&&u[l]===0;l++);u=u.subarray(l)}s.bytes(t?u.reverse():u)},decodeStream:s=>{let a=s.bytes(r?e:Math.min(e,s.leftBytes)),c=t?a:Vf(a),u=0n;for(let l=0;l<c.length;l++)u|=BigInt(c[l])<<8n*BigInt(l);return n&&u&i&&(u=(u^i)-i),u},validate:s=>{if(typeof s!="bigint")throw new Error(`bigint: invalid value: ${s}`);return Pv(s,8n*o,!!n),s}})};var Bv=$f(32,!1);var Yo=$f(8,!0);var Vv=$f(8,!0,!0);var kT=(e,t)=>Ke({size:e,encodeStream:(n,r)=>n.writeView(e,o=>t.write(o,r)),decodeStream:n=>n.readView(e,t.read),validate:n=>{if(typeof n!="number")throw new Error(`viewCoder: expected number, got ${typeof n}`);return t.validate&&t.validate(n),n}}),ts=(e,t,n)=>{let r=e*8,o=2**(r-1),i=c=>{if(!rn(c))throw new Error(`sintView: value is not safe integer: ${c}`);if(c<-o||c>=o)throw new Error(`sintView: value out of bounds. Expected ${-o} <= ${c} < ${o}`)},s=2**r,a=c=>{if(!rn(c))throw new Error(`uintView: value is not safe integer: ${c}`);if(0>c||c>=s)throw new Error(`uintView: value out of bounds. Expected 0 <= ${c} < ${s}`)};return kT(e,{write:n.write,read:n.read,validate:t?i:a})},ie=ts(4,!1,{read:(e,t)=>e.getUint32(t,!0),write:(e,t)=>e.setUint32(0,t,!0)}),jv=ts(4,!1,{read:(e,t)=>e.getUint32(t,!1),write:(e,t)=>e.setUint32(0,t,!1)}),qr=ts(4,!0,{read:(e,t)=>e.getInt32(t,!0),write:(e,t)=>e.setInt32(0,t,!0)});var Hf=ts(2,!1,{read:(e,t)=>e.getUint16(t,!0),write:(e,t)=>e.setUint16(0,t,!0)});var zt=ts(1,!1,{read:(e,t)=>e.getUint8(t),write:(e,t)=>e.setUint8(0,t)});var he=(e,t=!1)=>{if(typeof t!="boolean")throw new Error(`bytes/le: expected boolean, got ${typeof t}`);let n=Ov(e),r=Rt(e);return Ke({size:typeof e=="number"?e:void 0,encodeStream:(o,i)=>{r||n.encodeStream(o,i.length),o.bytes(t?Vf(i):i),r&&o.bytes(e)},decodeStream:o=>{let i;if(r){let s=o.find(e);if(!s)throw o.err("bytes: cannot find terminator");i=o.bytes(s-o.pos),o.bytes(e.length)}else i=o.bytes(e===null?o.leftBytes:n.decodeStream(o));return t?Vf(i):i},validate:o=>{if(!Rt(o))throw new Error(`bytes: invalid value ${o}`);return o}})};function Uv(e,t){if(!Dt(t))throw new Error(`prefix: invalid inner value ${t}`);return Wt(he(e),Fv(t))}var Cc=(e,t=!1)=>qe(Wt(he(e,t),kv),n=>{if(typeof n!="string")throw new Error(`expected string, got ${typeof n}`);return n});var $v=(e,t={isLE:!1,with0x:!1})=>{let n=Wt(he(e,t.isLE),ue);if(typeof t.with0x!="boolean")throw new Error(`hex/with0x: expected boolean, got ${typeof t.with0x}`);return t.with0x&&(n=Wt(n,{encode:r=>`0x${r}`,decode:r=>{if(!r.startsWith("0x"))throw new Error("hex(with0x=true).encode input should start with 0x");return r.slice(2)}})),n};function Wt(e,t){if(!Dt(e))throw new Error(`apply: invalid inner value ${e}`);if(!_c(t))throw new Error(`apply: invalid base value ${e}`);return Ke({size:e.size,encodeStream:(n,r)=>{let o;try{o=t.decode(r)}catch(i){throw n.err(""+i)}return e.encodeStream(n,o)},decodeStream:n=>{let r=e.decodeStream(n);try{return t.encode(r)}catch(o){throw n.err(""+o)}}})}var Hv=(e,t=!1)=>{if(!Rt(e))throw new Error(`flag/flagValue: expected Uint8Array, got ${typeof e}`);if(typeof t!="boolean")throw new Error(`flag/xor: expected boolean, got ${typeof t}`);return Ke({size:e.length,encodeStream:(n,r)=>{!!r!==t&&n.bytes(e)},decodeStream:n=>{let r=n.leftBytes>=e.length;return r&&(r=qo(n.bytes(e.length,!0),e),r&&n.bytes(e.length)),r!==t},validate:n=>{if(n!==void 0&&typeof n!="boolean")throw new Error(`flag: expected boolean value or undefined, got ${typeof n}`);return n}})};function Gv(e,t,n){if(!Dt(t))throw new Error(`flagged: invalid inner value ${t}`);if(typeof e!="string"&&!Dt(t))throw new Error(`flagged: wrong path=${e}`);return Ke({encodeStream:(r,o)=>{typeof e=="string"?En.resolve(r.stack,e)?t.encodeStream(r,o):n&&t.encodeStream(r,n):(e.encodeStream(r,!!o),o?t.encodeStream(r,o):n&&t.encodeStream(r,n))},decodeStream:r=>{let o=!1;if(typeof e=="string"?o=!!En.resolve(r.stack,e):o=e.decodeStream(r),o)return t.decodeStream(r);n&&t.decodeStream(r)}})}function Sc(e,t,n=!0){if(!Dt(e))throw new Error(`magic: invalid inner value ${e}`);if(typeof n!="boolean")throw new Error(`magic: expected boolean, got ${typeof n}`);return Ke({size:e.size,encodeStream:(r,o)=>e.encodeStream(r,t),decodeStream:r=>{let o=e.decodeStream(r);if(n&&typeof o!="object"&&o!==t||Rt(t)&&!qo(t,o))throw r.err(`magic: invalid value: ${o} !== ${t}`)},validate:r=>{if(r!==void 0)throw new Error(`magic: wrong value=${typeof r}`);return r}})}function Wv(e){let t=0;for(let n of e){if(n.size===void 0)return;if(!rn(n.size))throw new Error(`sizeof: wrong element size=${t}`);t+=n.size}return t}function Be(e){if(!Ko(e))throw new Error(`struct: expected plain object, got ${e}`);for(let t in e)if(!Dt(e[t]))throw new Error(`struct: field ${t} is not CoderType`);return Ke({size:Wv(Object.values(e)),encodeStream:(t,n)=>{t.pushObj(n,r=>{for(let o in e)r(o,()=>e[o].encodeStream(t,n[o]))})},decodeStream:t=>{let n={};return t.pushObj(n,r=>{for(let o in e)r(o,()=>n[o]=e[o].decodeStream(t))}),n},validate:t=>{if(typeof t!="object"||t===null)throw new Error(`struct: invalid value ${t}`);return t}})}function zv(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);for(let t=0;t<e.length;t++)if(!Dt(e[t]))throw new Error(`tuple: field ${t} is not CoderType`);return Ke({size:Wv(e),encodeStream:(t,n)=>{if(!Array.isArray(n))throw t.err(`tuple: invalid value ${n}`);t.pushObj(n,r=>{for(let o=0;o<e.length;o++)r(`${o}`,()=>e[o].encodeStream(t,n[o]))})},decodeStream:t=>{let n=[];return t.pushObj(n,r=>{for(let o=0;o<e.length;o++)r(`${o}`,()=>n.push(e[o].decodeStream(t)))}),n},validate:t=>{if(!Array.isArray(t))throw new Error(`tuple: invalid value ${t}`);if(t.length!==e.length)throw new Error(`tuple: wrong length=${t.length}, expected ${e.length}`);return t}})}function Ye(e,t){if(!Dt(t))throw new Error(`array: invalid inner value ${t}`);let n=Ov(typeof e=="string"?`../${e}`:e);return Ke({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,o)=>{let i=r;i.pushObj(o,s=>{Rt(e)||n.encodeStream(r,o.length);for(let a=0;a<o.length;a++)s(`${a}`,()=>{let c=o[a],u=r.pos;if(t.encodeStream(r,c),Rt(e)){if(e.length>i.pos-u)return;let l=i.finish(!1).subarray(u,i.pos);if(qo(l.subarray(0,e.length),e))throw i.err(`array: inner element encoding same as separator. elm=${c} data=${l}`)}})}),Rt(e)&&r.bytes(e)},decodeStream:r=>{let o=[];return r.pushObj(o,i=>{if(e===null)for(let s=0;!r.isEnd()&&(i(`${s}`,()=>o.push(t.decodeStream(r))),!(t.size&&r.leftBytes<t.size));s++);else if(Rt(e))for(let s=0;;s++){if(qo(r.bytes(e.length,!0),e)){r.bytes(e.length);break}i(`${s}`,()=>o.push(t.decodeStream(r)))}else{let s;i("arrayLen",()=>s=n.decodeStream(r));for(let a=0;a<s;a++)i(`${a}`,()=>o.push(t.decodeStream(r)))}}),o},validate:r=>{if(!Array.isArray(r))throw new Error(`array: invalid value ${r}`);return r}})}var RT=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Kv=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),OT=Kv.map(e=>(9*e+5)%16),Wf=[Kv],zf=[OT];for(let e=0;e<4;e++)for(let t of[Wf,zf])t.push(t[e].map(n=>RT[n]));var Yv=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),PT=Wf.map((e,t)=>e.map(n=>Yv[t][n])),LT=zf.map((e,t)=>e.map(n=>Yv[t][n])),FT=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),BT=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function qv(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}var Ac=new Uint32Array(16),Gf=class extends Ho{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:n,h2:r,h3:o,h4:i}=this;return[t,n,r,o,i]}set(t,n,r,o,i){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=o|0,this.h4=i|0}process(t,n){for(let p=0;p<16;p++,n+=4)Ac[p]=t.getUint32(n,!0);let r=this.h0|0,o=r,i=this.h1|0,s=i,a=this.h2|0,c=a,u=this.h3|0,l=u,d=this.h4|0,h=d;for(let p=0;p<5;p++){let y=4-p,f=FT[p],m=BT[p],g=Wf[p],w=zf[p],b=PT[p],v=LT[p];for(let D=0;D<16;D++){let E=Yi(r+qv(p,i,a,u)+Ac[g[D]]+f,b[D])+d|0;r=d,d=u,u=Yi(a,10)|0,a=i,i=E}for(let D=0;D<16;D++){let E=Yi(o+qv(y,s,c,l)+Ac[w[D]]+m,v[D])+h|0;o=h,h=l,l=Yi(c,10)|0,c=s,s=E}}this.set(this.h1+a+l|0,this.h2+u+h|0,this.h3+d+o|0,this.h4+r+s|0,this.h0+i+c|0)}roundClean(){Ac.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},Zv=hc(()=>new Gf);var Zf={};jp(Zf,{abytes:()=>Zo,bitGet:()=>WT,bitLen:()=>GT,bitMask:()=>ns,bitSet:()=>zT,bytesToHex:()=>Kr,bytesToNumberBE:()=>$e,bytesToNumberLE:()=>Nc,concatBytes:()=>In,createHmacDrbg:()=>Yf,ensureBytes:()=>Ne,equalBytes:()=>$T,hexToBytes:()=>Yr,hexToNumber:()=>Kf,isBytes:()=>ar,numberToBytesBE:()=>qt,numberToBytesLE:()=>kc,numberToHexUnpadded:()=>e0,numberToVarBytesBE:()=>UT,utf8ToBytes:()=>HT,validateObject:()=>cr});var Jv=BigInt(0),Mc=BigInt(1),VT=BigInt(2);function ar(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Zo(e){if(!ar(e))throw new Error("Uint8Array expected")}var jT=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Kr(e){Zo(e);let t="";for(let n=0;n<e.length;n++)t+=jT[e[n]];return t}function e0(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Kf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var xn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Qv(e){if(e>=xn._0&&e<=xn._9)return e-xn._0;if(e>=xn._A&&e<=xn._F)return e-(xn._A-10);if(e>=xn._a&&e<=xn._f)return e-(xn._a-10)}function Yr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){let s=Qv(e.charCodeAt(i)),a=Qv(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=s*16+a}return r}function $e(e){return Kf(Kr(e))}function Nc(e){return Zo(e),Kf(Kr(Uint8Array.from(e).reverse()))}function qt(e,t){return Yr(e.toString(16).padStart(t*2,"0"))}function kc(e,t){return qt(e,t).reverse()}function UT(e){return Yr(e0(e))}function Ne(e,t,n){let r;if(typeof t=="string")try{r=Yr(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(ar(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function In(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];Zo(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}function $T(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function HT(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function GT(e){let t;for(t=0;e>Jv;e>>=Mc,t+=1);return t}function WT(e,t){return e>>BigInt(t)&Mc}function zT(e,t,n){return e|(n?Mc:Jv)<<BigInt(t)}var ns=e=>(VT<<BigInt(e-1))-Mc,qf=e=>new Uint8Array(e),Xv=e=>Uint8Array.from(e);function Yf(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=qf(e),o=qf(e),i=0,s=()=>{r.fill(1),o.fill(0),i=0},a=(...d)=>n(o,r,...d),c=(d=qf())=>{o=a(Xv([0]),d),r=a(),d.length!==0&&(o=a(Xv([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<t;){r=a();let p=r.slice();h.push(p),d+=r.length}return In(...h)};return(d,h)=>{s(),c(d);let p;for(;!(p=h(u()));)c();return s(),p}}var qT={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ar(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function cr(e,t,n={}){let r=(o,i,s)=>{let a=qT[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var Re=BigInt(0),De=BigInt(1),Zr=BigInt(2),KT=BigInt(3),Qf=BigInt(4),t0=BigInt(5),n0=BigInt(8),YT=BigInt(9),ZT=BigInt(16);function ke(e,t){let n=e%t;return n>=Re?n:t+n}function QT(e,t,n){if(n<=Re||t<Re)throw new Error("Expected power/modulo > 0");if(n===De)return Re;let r=De;for(;t>Re;)t&De&&(r=r*e%n),e=e*e%n,t>>=De;return r}function xt(e,t,n){let r=e;for(;t-- >Re;)r*=r,r%=n;return r}function Rc(e,t){if(e===Re||t<=Re)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ke(e,t),r=t,o=Re,i=De,s=De,a=Re;for(;n!==Re;){let u=r/n,l=r%n,d=o-s*u,h=i-a*u;r=n,n=l,o=s,i=a,s=d,a=h}if(r!==De)throw new Error("invert: does not exist");return ke(o,t)}function XT(e){let t=(e-De)/Zr,n,r,o;for(n=e-De,r=0;n%Zr===Re;n/=Zr,r++);for(o=Zr;o<e&&QT(o,t,e)!==e-De;o++);if(r===1){let s=(e+De)/Qf;return function(c,u){let l=c.pow(u,s);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}let i=(n+De)/Zr;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,o),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let p=1;for(let f=a.sqr(h);p<u&&!a.eql(f,a.ONE);p++)f=a.sqr(f);let y=a.pow(l,De<<BigInt(u-p-1));l=a.sqr(y),d=a.mul(d,y),h=a.mul(h,l),u=p}return d}}function JT(e){if(e%Qf===KT){let t=(e+De)/Qf;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%n0===t0){let t=(e-t0)/n0;return function(r,o){let i=r.mul(o,Zr),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,Zr),s),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),o))throw new Error("Cannot find square root");return u}}return e%ZT,XT(e)}var eA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xf(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=eA.reduce((r,o)=>(r[o]="function",r),t);return cr(e,n)}function tA(e,t,n){if(n<Re)throw new Error("Expected power > 0");if(n===Re)return e.ONE;if(n===De)return t;let r=e.ONE,o=t;for(;n>Re;)n&De&&(r=e.mul(r,o)),o=e.sqr(o),n>>=De;return r}function nA(e,t){let n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function Jf(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function r0(e,t,n=!1,r={}){if(e<=Re)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Jf(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=JT(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:ns(o),ZERO:Re,ONE:De,create:c=>ke(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Re<=c&&c<e},is0:c=>c===Re,isOdd:c=>(c&De)===De,neg:c=>ke(-c,e),eql:(c,u)=>c===u,sqr:c=>ke(c*c,e),add:(c,u)=>ke(c+u,e),sub:(c,u)=>ke(c-u,e),mul:(c,u)=>ke(c*u,e),pow:(c,u)=>tA(a,c,u),div:(c,u)=>ke(c*Rc(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Rc(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>nA(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?kc(c,i):qt(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Nc(c):$e(c)}});return Object.freeze(a)}function o0(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function eh(e){let t=o0(e);return t+Math.ceil(t/2)}function i0(e,t,n=!1){let r=e.length,o=o0(t),i=eh(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let s=n?$e(e):Nc(e),a=ke(s,t-De)+De;return n?kc(a,o):qt(a,o)}var oA=BigInt(0),th=BigInt(1);function s0(e,t){let n=(o,i)=>{let s=i.negate();return o?s:i},r=o=>{let i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,a=o;for(;i>oA;)i&th&&(s=s.add(a)),a=a.double(),i>>=th;return s},precomputeWindow(o,i){let{windows:s,windowSize:a}=r(i),c=[],u=o,l=u;for(let d=0;d<s;d++){l=u,c.push(l);for(let h=1;h<a;h++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(o,i,s){let{windows:a,windowSize:c}=r(o),u=e.ZERO,l=e.BASE,d=BigInt(2**o-1),h=2**o,p=BigInt(o);for(let y=0;y<a;y++){let f=y*c,m=Number(s&d);s>>=p,m>c&&(m-=h,s+=th);let g=f,w=f+Math.abs(m)-1,b=y%2!==0,v=m<0;m===0?l=l.add(n(b,i[g])):u=u.add(n(v,i[w]))}return{p:u,f:l}},wNAFCached(o,i,s,a){let c=o._WINDOW_SIZE||1,u=i.get(o);return u||(u=this.precomputeWindow(o,c),c!==1&&i.set(o,a(u))),this.wNAF(c,u,s)}}}function nh(e){return Xf(e.Fp),cr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(V(T(T({},Jf(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}function iA(e){let t=nh(e);cr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(T({},t))}var{bytesToNumberBE:sA,hexToBytes:aA}=Zf,Qr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Qr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:sA(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=Qr,n=typeof e=="string"?aA(e):e;Zo(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Qr._parseInt(n.subarray(2)),{d:s,l:a}=Qr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{let l=u.toString(16);return l.length&1?`0${l}`:l},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},_n=BigInt(0),Ot=BigInt(1),cL=BigInt(2),a0=BigInt(3),uL=BigInt(4);function cA(e){let t=iA(e),{Fp:n}=t,r=t.toBytes||((y,f,m)=>{let g=f.toAffine();return In(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),o=t.fromBytes||(y=>{let f=y.subarray(1),m=n.fromBytes(f.subarray(0,n.BYTES)),g=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:m,y:g}});function i(y){let{a:f,b:m}=t,g=n.sqr(y),w=n.mul(g,y);return n.add(n.add(w,n.mul(y,f)),m)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return typeof y=="bigint"&&_n<y&&y<t.n}function a(y){if(!s(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){let{allowedPrivateKeyLengths:f,nByteLength:m,wrapPrivateKey:g,n:w}=t;if(f&&typeof y!="bigint"){if(ar(y)&&(y=Kr(y)),typeof y!="string"||!f.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let b;try{b=typeof y=="bigint"?y:$e(Ne("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return g&&(b=ke(b,w)),a(b),b}let u=new Map;function l(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(f,m,g){if(this.px=f,this.py=m,this.pz=g,f==null||!n.isValid(f))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required")}static fromAffine(f){let{x:m,y:g}=f||{};if(!f||!n.isValid(m)||!n.isValid(g))throw new Error("invalid affine point");if(f instanceof d)throw new Error("projective point not allowed");let w=b=>n.eql(b,n.ZERO);return w(m)&&w(g)?d.ZERO:new d(m,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let m=n.invertBatch(f.map(g=>g.pz));return f.map((g,w)=>g.toAffine(m[w])).map(d.fromAffine)}static fromHex(f){let m=d.fromAffine(o(Ne("pointHex",f)));return m.assertValidity(),m}static fromPrivateKey(f){return d.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:f,y:m}=this.toAffine();if(!n.isValid(f)||!n.isValid(m))throw new Error("bad point: x or y not FE");let g=n.sqr(m),w=i(f);if(!n.eql(g,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){l(f);let{px:m,py:g,pz:w}=this,{px:b,py:v,pz:D}=f,E=n.eql(n.mul(m,D),n.mul(b,w)),I=n.eql(n.mul(g,D),n.mul(v,w));return E&&I}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){let{a:f,b:m}=t,g=n.mul(m,a0),{px:w,py:b,pz:v}=this,D=n.ZERO,E=n.ZERO,I=n.ZERO,_=n.mul(w,w),B=n.mul(b,b),N=n.mul(v,v),S=n.mul(w,b);return S=n.add(S,S),I=n.mul(w,v),I=n.add(I,I),D=n.mul(f,I),E=n.mul(g,N),E=n.add(D,E),D=n.sub(B,E),E=n.add(B,E),E=n.mul(D,E),D=n.mul(S,D),I=n.mul(g,I),N=n.mul(f,N),S=n.sub(_,N),S=n.mul(f,S),S=n.add(S,I),I=n.add(_,_),_=n.add(I,_),_=n.add(_,N),_=n.mul(_,S),E=n.add(E,_),N=n.mul(b,v),N=n.add(N,N),_=n.mul(N,S),D=n.sub(D,_),I=n.mul(N,B),I=n.add(I,I),I=n.add(I,I),new d(D,E,I)}add(f){l(f);let{px:m,py:g,pz:w}=this,{px:b,py:v,pz:D}=f,E=n.ZERO,I=n.ZERO,_=n.ZERO,B=t.a,N=n.mul(t.b,a0),S=n.mul(m,b),G=n.mul(g,v),L=n.mul(w,D),M=n.add(m,g),x=n.add(b,v);M=n.mul(M,x),x=n.add(S,G),M=n.sub(M,x),x=n.add(m,w);let C=n.add(b,D);return x=n.mul(x,C),C=n.add(S,L),x=n.sub(x,C),C=n.add(g,w),E=n.add(v,D),C=n.mul(C,E),E=n.add(G,L),C=n.sub(C,E),_=n.mul(B,x),E=n.mul(N,L),_=n.add(E,_),E=n.sub(G,_),_=n.add(G,_),I=n.mul(E,_),G=n.add(S,S),G=n.add(G,S),L=n.mul(B,L),x=n.mul(N,x),G=n.add(G,L),L=n.sub(S,L),L=n.mul(B,L),x=n.add(x,L),S=n.mul(G,x),I=n.add(I,S),S=n.mul(C,x),E=n.mul(M,E),E=n.sub(E,S),S=n.mul(M,G),_=n.mul(C,_),_=n.add(_,S),new d(E,I,_)}subtract(f){return this.add(f.negate())}is0(){return this.equals(d.ZERO)}wNAF(f){return p.wNAFCached(this,u,f,m=>{let g=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(g[b])).map(d.fromAffine)})}multiplyUnsafe(f){let m=d.ZERO;if(f===_n)return m;if(a(f),f===Ot)return this;let{endo:g}=t;if(!g)return p.unsafeLadder(this,f);let{k1neg:w,k1:b,k2neg:v,k2:D}=g.splitScalar(f),E=m,I=m,_=this;for(;b>_n||D>_n;)b&Ot&&(E=E.add(_)),D&Ot&&(I=I.add(_)),_=_.double(),b>>=Ot,D>>=Ot;return w&&(E=E.negate()),v&&(I=I.negate()),I=new d(n.mul(I.px,g.beta),I.py,I.pz),E.add(I)}multiply(f){a(f);let m=f,g,w,{endo:b}=t;if(b){let{k1neg:v,k1:D,k2neg:E,k2:I}=b.splitScalar(m),{p:_,f:B}=this.wNAF(D),{p:N,f:S}=this.wNAF(I);_=p.constTimeNegate(v,_),N=p.constTimeNegate(E,N),N=new d(n.mul(N.px,b.beta),N.py,N.pz),g=_.add(N),w=B.add(S)}else{let{p:v,f:D}=this.wNAF(m);g=v,w=D}return d.normalizeZ([g,w])[0]}multiplyAndAddUnsafe(f,m,g){let w=d.BASE,b=(D,E)=>E===_n||E===Ot||!D.equals(w)?D.multiplyUnsafe(E):D.multiply(E),v=b(this,m).add(b(f,g));return v.is0()?void 0:v}toAffine(f){let{px:m,py:g,pz:w}=this,b=this.is0();f==null&&(f=b?n.ONE:n.inv(w));let v=n.mul(m,f),D=n.mul(g,f),E=n.mul(w,f);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:v,y:D}}isTorsionFree(){let{h:f,isTorsionFree:m}=t;if(f===Ot)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:m}=t;return f===Ot?this:m?m(d,this):this.multiplyUnsafe(t.h)}toRawBytes(f=!0){return this.assertValidity(),r(d,this,f)}toHex(f=!0){return Kr(this.toRawBytes(f))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);let h=t.nBitLength,p=s0(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}function uA(e){let t=nh(e);return cr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(T({lowS:!0},t))}function c0(e){let t=uA(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(x){return _n<x&&x<n.ORDER}function a(x){return ke(x,r)}function c(x){return Rc(x,r)}let{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:h}=cA(V(T({},t),{toBytes(x,C,k){let P=C.toAffine(),U=n.toBytes(P.x),J=In;return k?J(Uint8Array.from([C.hasEvenY()?2:3]),U):J(Uint8Array.from([4]),U,n.toBytes(P.y))},fromBytes(x){let C=x.length,k=x[0],P=x.subarray(1);if(C===o&&(k===2||k===3)){let U=$e(P);if(!s(U))throw new Error("Point is not on curve");let J=d(U),ee;try{ee=n.sqrt(J)}catch(ve){let ot=ve instanceof Error?": "+ve.message:"";throw new Error("Point is not on curve"+ot)}let oe=(ee&Ot)===Ot;return(k&1)===1!==oe&&(ee=n.neg(ee)),{x:U,y:ee}}else if(C===i&&k===4){let U=n.fromBytes(P.subarray(0,n.BYTES)),J=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:U,y:J}}else throw new Error(`Point of length ${C} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}})),p=x=>Kr(qt(x,t.nByteLength));function y(x){let C=r>>Ot;return x>C}function f(x){return y(x)?a(-x):x}let m=(x,C,k)=>$e(x.slice(C,k));class g{constructor(C,k,P){this.r=C,this.s=k,this.recovery=P,this.assertValidity()}static fromCompact(C){let k=t.nByteLength;return C=Ne("compactSignature",C,k*2),new g(m(C,0,k),m(C,k,2*k))}static fromDER(C){let{r:k,s:P}=Qr.toSig(Ne("DER",C));return new g(k,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(C){return new g(this.r,this.s,C)}recoverPublicKey(C){let{r:k,s:P,recovery:U}=this,J=I(Ne("msgHash",C));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");let ee=U===2||U===3?k+t.n:k;if(ee>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let oe=U&1?"03":"02",ye=u.fromHex(oe+p(ee)),ve=c(ee),ot=a(-J*ve),it=a(P*ve),St=u.BASE.multiplyAndAddUnsafe(ye,ot,it);if(!St)throw new Error("point at infinify");return St.assertValidity(),St}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Yr(this.toDERHex())}toDERHex(){return Qr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Yr(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let x=eh(t.n);return i0(t.randomBytes(x),t.n)},precompute(x=8,C=u.BASE){return C._setWindowSize(x),C.multiply(BigInt(3)),C}};function b(x,C=!0){return u.fromPrivateKey(x).toRawBytes(C)}function v(x){let C=ar(x),k=typeof x=="string",P=(C||k)&&x.length;return C?P===o||P===i:k?P===2*o||P===2*i:x instanceof u}function D(x,C,k=!0){if(v(x))throw new Error("first arg must be private key");if(!v(C))throw new Error("second arg must be public key");return u.fromHex(C).multiply(l(x)).toRawBytes(k)}let E=t.bits2int||function(x){let C=$e(x),k=x.length*8-t.nBitLength;return k>0?C>>BigInt(k):C},I=t.bits2int_modN||function(x){return a(E(x))},_=ns(t.nBitLength);function B(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(_n<=x&&x<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return qt(x,t.nByteLength)}function N(x,C,k=S){if(["recovered","canonical"].some(st=>st in k))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:U}=t,{lowS:J,prehash:ee,extraEntropy:oe}=k;J==null&&(J=!0),x=Ne("msgHash",x),ee&&(x=Ne("prehashed msgHash",P(x)));let ye=I(x),ve=l(C),ot=[B(ve),B(ye)];if(oe!=null&&oe!==!1){let st=oe===!0?U(n.BYTES):oe;ot.push(Ne("extraEntropy",st))}let it=In(...ot),St=ye;function Lt(st){let un=E(st);if(!h(un))return;let gt=c(un),Ue=u.BASE.multiply(un).toAffine(),Ft=a(Ue.x);if(Ft===_n)return;let br=a(gt*a(St+Ft*ve));if(br===_n)return;let gi=(Ue.x===Ft?0:2)|Number(Ue.y&Ot),Pp=br;return J&&y(br)&&(Pp=f(br),gi^=1),new g(Ft,Pp,gi)}return{seed:it,k2sig:Lt}}let S={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function L(x,C,k=S){let{seed:P,k2sig:U}=N(x,C,k),J=t;return Yf(J.hash.outputLen,J.nByteLength,J.hmac)(P,U)}u.BASE._setWindowSize(8);function M(x,C,k,P=G){let U=x;if(C=Ne("msgHash",C),k=Ne("publicKey",k),"strict"in P)throw new Error("options.strict was renamed to lowS");let{lowS:J,prehash:ee}=P,oe,ye;try{if(typeof U=="string"||ar(U))try{oe=g.fromDER(U)}catch(Ue){if(!(Ue instanceof Qr.Err))throw Ue;oe=g.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){let{r:Ue,s:Ft}=U;oe=new g(Ue,Ft)}else throw new Error("PARSE");ye=u.fromHex(k)}catch(Ue){if(Ue.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(J&&oe.hasHighS())return!1;ee&&(C=t.hash(C));let{r:ve,s:ot}=oe,it=I(C),St=c(ot),Lt=a(it*St),st=a(ve*St),un=u.BASE.multiplyAndAddUnsafe(ye,Lt,st)?.toAffine();return un?a(un.x)===ve:!1}return{CURVE:t,getPublicKey:b,getSharedSecret:D,sign:L,verify:M,ProjectivePoint:u,Signature:g,utils:w}}function lA(e){return{hash:e,hmac:(t,...n)=>Qi(e,t,fc(...n)),randomBytes:$o}}function u0(e,t){let n=r=>c0(T(T({},e),lA(r)));return Object.freeze(V(T({},n(t)),{create:n}))}var Fc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Oc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f0=BigInt(1),Pc=BigInt(2),l0=(e,t)=>(e+t/Pc)/t;function h0(e){let t=Fc,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=xt(l,n,t)*l%t,h=xt(d,n,t)*l%t,p=xt(h,Pc,t)*u%t,y=xt(p,o,t)*p%t,f=xt(y,i,t)*y%t,m=xt(f,a,t)*f%t,g=xt(m,c,t)*m%t,w=xt(g,a,t)*f%t,b=xt(w,n,t)*l%t,v=xt(b,s,t)*y%t,D=xt(v,r,t)*u%t,E=xt(D,Pc,t);if(!oh.eql(oh.sqr(E),e))throw new Error("Cannot find square root");return E}var oh=r0(Fc,void 0,void 0,{sqrt:h0}),Cn=u0({a:BigInt(0),b:BigInt(7),Fp:oh,n:Oc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Oc,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=l0(i*e,t),c=l0(-r*e,t),u=ke(e-a*n-c*o,t),l=ke(-a*r-c*i,t),d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},xe),Bc=BigInt(0),p0=e=>typeof e=="bigint"&&Bc<e&&e<Fc,dA=e=>typeof e=="bigint"&&Bc<e&&e<Oc,d0={};function Lc(e,...t){let n=d0[e];if(n===void 0){let r=xe(Uint8Array.from(e,o=>o.charCodeAt(0)));n=In(r,r),d0[e]=n}return xe(In(n,...t))}var ah=e=>e.toRawBytes(!0).slice(1),ih=e=>qt(e,32),rh=e=>ke(e,Fc),rs=e=>ke(e,Oc),ch=Cn.ProjectivePoint,fA=(e,t,n)=>ch.BASE.multiplyAndAddUnsafe(e,t,n);function sh(e){let t=Cn.utils.normPrivateKeyToScalar(e),n=ch.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:rs(-t),bytes:ah(n)}}function g0(e){if(!p0(e))throw new Error("bad x: need 0 < x < p");let t=rh(e*e),n=rh(t*e+BigInt(7)),r=h0(n);r%Pc!==Bc&&(r=rh(-r));let o=new ch(e,r,f0);return o.assertValidity(),o}function m0(...e){return rs($e(Lc("BIP0340/challenge",...e)))}function hA(e){return sh(e).bytes}function pA(e,t,n=$o(32)){let r=Ne("message",e),{bytes:o,scalar:i}=sh(t),s=Ne("auxRand",n,32),a=ih(i^$e(Lc("BIP0340/aux",s))),c=Lc("BIP0340/nonce",a,o,r),u=rs($e(c));if(u===Bc)throw new Error("sign failed: k is zero");let{bytes:l,scalar:d}=sh(u),h=m0(l,o,r),p=new Uint8Array(64);if(p.set(l,0),p.set(ih(rs(d+h*i)),32),!y0(p,r,o))throw new Error("sign: Invalid signature produced");return p}function y0(e,t,n){let r=Ne("signature",e,64),o=Ne("message",t),i=Ne("publicKey",n,32);try{let s=g0($e(i)),a=$e(r.subarray(0,32));if(!p0(a))return!1;let c=$e(r.subarray(32,64));if(!dA(c))return!1;let u=m0(ih(a),ah(s),o),l=fA(s,c,rs(-u));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}var on={getPublicKey:hA,sign:pA,verify:y0,utils:{randomPrivateKey:Cn.utils.randomPrivateKey,lift_x:g0,pointToBytes:ah,numberToBytesBE:qt,bytesToNumberBE:$e,taggedHash:Lc,mod:ke}};var jc=Cn.ProjectivePoint,Vc=Cn.CURVE.n,{isBytes:se,concatBytes:Pt,equalBytes:we}=Rv;var Xr=e=>Zv(xe(e)),Sn=(...e)=>xe(xe(Pt(...e))),v0=on.utils.randomPrivateKey,Jr=on.getPublicKey,Uc=Cn.getPublicKey,w0=e=>e.r<Vc/2n;function b0(e,t,n=!1){let r=Cn.sign(e,t);if(n&&!w0(r)){let o=new Uint8Array(32),i=0;for(;!w0(r);)if(o.set(ie.encode(i++)),r=Cn.sign(e,t,{extraEntropy:o}),i>4294967295)throw new Error("lowR counter overflow: report the error")}return r.toDERRawBytes()}var uh=on.sign,os=on.utils.taggedHash,Ve=function(e){return e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr",e}(Ve||{});function ur(e,t){let n=e.length;if(t===Ve.ecdsa){if(n===32)throw new Error("Expected non-Schnorr key");return jc.fromHex(e),e}else if(t===Ve.schnorr){if(n!==32)throw new Error("Expected 32-byte Schnorr key");return on.utils.lift_x(on.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function E0(e,t){let n=on.utils,r=n.taggedHash("TapTweak",e,t),o=n.bytesToNumberBE(r);if(o>=Vc)throw new Error("tweak higher than curve order");return o}function D0(e,t=new Uint8Array){let n=on.utils,r=n.bytesToNumberBE(e),o=jc.fromPrivateKey(r),i=o.hasEvenY()?r:n.mod(-r,Vc),s=n.pointToBytes(o),a=E0(s,t);return n.numberToBytesBE(n.mod(i+a,Vc),32)}function Qo(e,t){let n=on.utils,r=E0(e,t),i=n.lift_x(n.bytesToNumberBE(e)).add(jc.fromPrivateKey(r)),s=i.hasEvenY()?0:1;return[n.pointToBytes(i),s]}var $c=xe(jc.BASE.toRawBytes(!1)),Kt={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};function lr(e,t){if(!se(e)||!se(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)if(e[r]!=t[r])return Math.sign(e[r]-t[r]);return Math.sign(e.length-t.length)}var je=function(e){return e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID",e}(je||{});function C0(e=6,t=!1){return Ke({encodeStream:(n,r)=>{if(r===0n)return;let o=r<0,i=BigInt(r),s=[];for(let a=o?-i:i;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(o?128:0):o&&(s[s.length-1]|=128),n.bytes(new Uint8Array(s))},decodeStream:n=>{let r=n.leftBytes;if(r>e)throw new Error(`ScriptNum: number (${r}) bigger than limit=${e}`);if(r===0)return 0n;if(t){let s=n.bytes(r,!0);if(!(s[s.length-1]&127)&&(r<=1||!(s[s.length-2]&128)))throw new Error("Non-minimally encoded ScriptNum")}let o=0,i=0n;for(let s=0;s<r;++s)o=n.byte(),i|=BigInt(o)<<8n*BigInt(s);return o>=128&&(i&=2n**BigInt(r*8)-1n>>1n,i=-i),i}})}function S0(e,t=4,n=!0){if(typeof e=="number")return e;if(se(e))try{let r=C0(t,n).decode(e);return r>Number.MAX_SAFE_INTEGER?void 0:Number(r)}catch{return}}var Ie=Ke({encodeStream:(e,t)=>{for(let n of t){if(typeof n=="string"){if(je[n]===void 0)throw new Error(`Unknown opcode=${n}`);e.byte(je[n]);continue}else if(typeof n=="number"){if(n===0){e.byte(0);continue}else if(1<=n&&n<=16){e.byte(je.OP_1-1+n);continue}}if(typeof n=="number"&&(n=C0().encode(BigInt(n))),!se(n))throw new Error(`Wrong Script OP=${n} (${typeof n})`);let r=n.length;r<je.PUSHDATA1?e.byte(r):r<=255?(e.byte(je.PUSHDATA1),e.byte(r)):r<=65535?(e.byte(je.PUSHDATA2),e.bytes(Hf.encode(r))):(e.byte(je.PUSHDATA4),e.bytes(ie.encode(r))),e.bytes(n)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let n=e.byte();if(je.OP_0<n&&n<=je.PUSHDATA4){let r;if(n<je.PUSHDATA1)r=n;else if(n===je.PUSHDATA1)r=zt.decodeStream(e);else if(n===je.PUSHDATA2)r=Hf.decodeStream(e);else if(n===je.PUSHDATA4)r=ie.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(r))}else if(n===0)t.push(0);else if(je.OP_1<=n&&n<=je.OP_16)t.push(n-(je.OP_1-1));else{let r=je[n];if(r===void 0)throw new Error(`Unknown opcode=${n.toString(16)}`);t.push(r)}}return t}}),I0={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},is=Ke({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[n,r,o,i]of Object.values(I0))if(!(o>t||t>i)){e.byte(n);for(let s=0;s<r;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[n,r,o]=I0[t],i=0n;for(let s=0;s<r;s++)i|=BigInt(e.byte())<<8n*BigInt(s);if(i<o)throw e.err(`Wrong CompactSize(${8*r})`);return i}}),pt=Wt(is,Dn.numberBigint),tt=he(is),Xo=Ye(pt,tt),_0=e=>Ye(is,e),gA=Be({txid:he(32,!0),index:ie,finalScriptSig:tt,sequence:ie}),dr=Be({amount:Yo,script:tt}),mA=Be({version:qr,segwitFlag:Hv(new Uint8Array([0,1])),inputs:_0(gA),outputs:_0(dr),witnesses:Gv("segwitFlag",Ye("inputs/length",Xo)),lockTime:ie});function yA(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var It=qe(mA,yA);function ss(e){if(e.nonWitnessUtxo){if(e.index===void 0)throw new Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}else{if(e.witnessUtxo)return e.witnessUtxo;throw new Error("Cannot find previous output info")}}function lh(e,t,n,r=!1){let{nonWitnessUtxo:o,txid:i}=e;typeof o=="string"&&(o=ue.decode(o)),se(o)&&(o=It.decode(o)),!("nonWitnessUtxo"in e)&&o===void 0&&(o=t?.nonWitnessUtxo),typeof i=="string"&&(i=ue.decode(i)),i===void 0&&(i=t?.txid);let s=V(T(T({},t),e),{nonWitnessUtxo:o,txid:i});!("nonWitnessUtxo"in e)&&s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=dh),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=us(Jo,s,t,n),Gc.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!r&&ls(a&&a.script,s.redeemScript,s.witnessScript),s}function Hc(e,t=!1){let n="legacy",r=ge.ALL,o=ss(e),i=_e.decode(o.script),s=i.type,a=i,c=[i];if(i.type==="tr")return r=ge.DEFAULT,{txType:"taproot",type:"tr",last:i,lastScript:o.script,defaultSighash:r,sighash:e.sighashType||r};{if((i.type==="wpkh"||i.type==="wsh")&&(n="segwit"),i.type==="sh"){if(!e.redeemScript)throw new Error("inputType: sh without redeemScript");let h=_e.decode(e.redeemScript);(h.type==="wpkh"||h.type==="wsh")&&(n="segwit"),c.push(h),a=h,s+=`-${h.type}`}if(a.type==="wsh"){if(!e.witnessScript)throw new Error("inputType: wsh without witnessScript");let h=_e.decode(e.witnessScript);h.type==="wsh"&&(n="segwit"),c.push(h),a=h,s+=`-${h.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let l=_e.encode(u),d={type:s,txType:n,last:u,lastScript:l,defaultSighash:r,sighash:e.sighashType||r};if(n==="legacy"&&!t&&!e.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return d}}var T0=e=>Math.ceil(e/4);var Wc=new Uint8Array(32),wA={amount:0xffffffffffffffffn,script:fe},vA=8,bA=2,eo=0,dh=4294967295,UL=Dn.decimal(vA),ds=(e,t)=>e===void 0?t:e;function zc(e){if(Array.isArray(e))return e.map(t=>zc(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,zc(n)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var ge=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e}(ge||{}),N0=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY",e}(N0||{});function EA(e,t,n,r=fe){return we(n,t)&&(e=D0(e,r),t=Jr(e)),{privKey:e,pubKey:t}}function ti(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function as(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:ds(e.sequence,dh),finalScriptSig:ds(e.finalScriptSig,fe)}}function fh(e){for(let t in e){let n=t;k0.includes(n)||delete e[n]}}var hh=Be({txid:he(32,!0),index:ie});function DA(e){if(typeof e!="number"||typeof N0[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function M0(e){let t=e&31;return{isAny:!!(e&ge.ANYONECANPAY),isNone:t===ge.NONE,isSingle:t===ge.SINGLE}}function xA(e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t=V(T({},e),{version:ds(e.version,bA),lockTime:ds(e.lockTime,0),PSBTVersion:ds(e.PSBTVersion,0)});if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(ie.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let n of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[n];if(r!==void 0&&typeof r!="boolean")throw new Error(`Transation options wrong type: ${n}=${r} (${typeof r})`)}if(t.customScripts!==void 0){let n=t.customScripts;if(!Array.isArray(n))throw new Error(`wrong custom scripts type (expected array): customScripts=${n} (${typeof n})`);for(let r of n){if(typeof r.encode!="function"||typeof r.decode!="function")throw new Error(`wrong script=${r} (${typeof r})`);if(r.finalizeTaproot!==void 0&&typeof r.finalizeTaproot!="function")throw new Error(`wrong script=${r} (${typeof r})`)}}return Object.freeze(t)}var cs=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let n=this.opts=xA(t);n.lockTime!==eo&&(this.global.fallbackLocktime=n.lockTime),this.global.txVersion=n.version}static fromRaw(t,n={}){let r=It.decode(t),o=new e(V(T({},n),{version:r.version,lockTime:r.lockTime}));for(let i of r.outputs)o.addOutput(i);if(o.outputs=r.outputs,o.inputs=r.inputs,r.witnesses)for(let i=0;i<r.witnesses.length;i++)o.inputs[i].finalScriptWitness=r.witnesses[i];return o}static fromPSBT(t,n={}){let r;try{r=gh.decode(t)}catch(d){try{r=mh.decode(t)}catch{throw d}}let o=r.global.version||0;if(o!==0&&o!==2)throw new Error(`Wrong PSBT version=${o}`);let i=r.global.unsignedTx,s=o===0?i?.version:r.global.txVersion,a=o===0?i?.lockTime:r.global.fallbackLocktime,c=new e(V(T({},n),{version:s,lockTime:a,PSBTVersion:o})),u=o===0?i?.inputs.length:r.global.inputCount;c.inputs=r.inputs.slice(0,u).map((d,h)=>T(T({finalScriptSig:fe},r.global.unsignedTx?.inputs[h]),d));let l=o===0?i?.outputs.length:r.global.outputCount;return c.outputs=r.outputs.slice(0,l).map((d,h)=>T(T({},d),r.global.unsignedTx?.outputs[h])),c.global=V(T({},r.global),{txVersion:s}),a!==eo&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let n=this.inputs.map(i=>ph(t,Jo,i));for(let i of n)i.partialSig&&!i.partialSig.length&&delete i.partialSig,i.finalScriptSig&&!i.finalScriptSig.length&&delete i.finalScriptSig,i.finalScriptWitness&&!i.finalScriptWitness.length&&delete i.finalScriptWitness;let r=this.outputs.map(i=>ph(t,fs,i)),o=T({},this.global);return t===0?(o.unsignedTx=It.decode(this.unsignedTx),delete o.fallbackLocktime,delete o.txVersion):(o.version=t,o.txVersion=this.version,o.inputCount=this.inputs.length,o.outputCount=this.outputs.length,o.fallbackLocktime&&o.fallbackLocktime===eo&&delete o.fallbackLocktime),this.opts.bip174jsCompat&&(n.length||n.push({}),r.length||r.push({})),(t===0?gh:mh).encode({global:o,inputs:n,outputs:r})}get lockTime(){let t=eo,n=0,r=eo,o=0;for(let i of this.inputs)i.requiredHeightLocktime&&(t=Math.max(t,i.requiredHeightLocktime),n++),i.requiredTimeLocktime&&(r=Math.max(r,i.requiredTimeLocktime),o++);return n&&n>=o?t:r!==eo?r:this.global.fallbackLocktime||eo}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let n=this.inputs[t];return n.finalScriptSig&&n.finalScriptSig.length||n.finalScriptWitness&&n.finalScriptWitness.length?"finalized":n.tapKeySig||n.tapScriptSig&&n.tapScriptSig.length||n.partialSig&&n.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let n=Hc(this.inputs[t],this.opts.allowLegacyWitnessUtxo).sighash,r=n===ge.DEFAULT?ge.ALL:n&3;return{sigInputs:n&ge.ANYONECANPAY,sigOutputs:r}}signStatus(){let t=!0,n=!0,r=[],o=[];for(let i=0;i<this.inputs.length;i++){if(this.inputStatus(i)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(i);if(a===ge.ANYONECANPAY?r.push(i):t=!1,c===ge.ALL)n=!1;else if(c===ge.SINGLE)o.push(i);else if(c!==ge.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:n,inputs:r,outputs:o}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let n of this.inputs)n.finalScriptWitness&&n.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,n=this.outputs.map(ti);t+=4*pt.encode(this.outputs.length).length;for(let r of n)t+=32+4*tt.encode(r.script).length;this.hasWitnesses&&(t+=2),t+=4*pt.encode(this.inputs.length).length;for(let r of this.inputs)t+=160+4*tt.encode(r.finalScriptSig||fe).length,this.hasWitnesses&&r.finalScriptWitness&&(t+=Xo.encode(r.finalScriptWitness).length);return t}get vsize(){return T0(this.weight)}toBytes(t=!1,n=!1){return It.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(as).map(r=>V(T({},r),{finalScriptSig:t&&r.finalScriptSig||fe})),outputs:this.outputs.map(ti),witnesses:this.inputs.map(r=>r.finalScriptWitness||[]),segwitFlag:n&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return ue.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ue.encode(Sn(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return ue.encode(Sn(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),zc(this.inputs[t])}get inputsLength(){return this.inputs.length}addInput(t,n=!1){if(!n&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(lh(t,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(t,n,r=!1){this.checkInputIdx(t);let o;if(!r){let i=this.signStatus();(!i.addInput||i.inputs.includes(t))&&(o=R0)}this.inputs[t]=lh(n,this.inputs[t],o,this.opts.disableScriptCheck)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),zc(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,n,r){let{amount:o,script:i}=t;if(o===void 0&&(o=n?.amount),typeof o!="bigint")throw new Error("amount must be bigint sats");typeof i=="string"&&(i=ue.decode(i)),i===void 0&&(i=n?.script);let s=V(T(T({},n),t),{amount:o,script:i});if(s.amount===void 0&&delete s.amount,s=us(fs,s,n,r),Kc.encode(s),s.script&&!this.opts.allowUnknownOutputs&&_e.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||ls(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,n=!1){if(!n&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,n,r=!1){this.checkOutputIdx(t);let o;if(!r){let i=this.signStatus();(!i.addOutput||i.outputs.includes(t))&&(o=O0)}this.outputs[t]=this.normalizeOutput(n,this.outputs[t],o)}addOutputAddress(t,n,r=Kt){return this.addOutput({script:_e.encode(fr(r).decode(t)),amount:n})}get fee(){let t=0n;for(let r of this.inputs){let o=ss(r);if(!o)throw new Error("Empty input amount");t+=o.amount}let n=this.outputs.map(ti);for(let r of n)t-=r.amount;return t}preimageLegacy(t,n,r){let{isAny:o,isNone:i,isSingle:s}=M0(r);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return Bv.encode(1n);n=Ie.encode(Ie.decode(n).filter(l=>l!=="CODESEPARATOR"));let a=this.inputs.map(as).map((l,d)=>V(T({},l),{finalScriptSig:d===t?n:fe}));o?a=[a[t]]:(i||s)&&(a=a.map((l,d)=>V(T({},l),{sequence:d===t?l.sequence:0})));let c=this.outputs.map(ti);i?c=[]:s&&(c=c.slice(0,t).fill(wA).concat([c[t]]));let u=It.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return Sn(u,qr.encode(r))}preimageWitnessV0(t,n,r,o){let{isAny:i,isNone:s,isSingle:a}=M0(r),c=Wc,u=Wc,l=Wc,d=this.inputs.map(as),h=this.outputs.map(ti);i||(c=Sn(...d.map(hh.encode))),!i&&!a&&!s&&(u=Sn(...d.map(y=>ie.encode(y.sequence)))),!a&&!s?l=Sn(...h.map(dr.encode)):a&&t<h.length&&(l=Sn(dr.encode(h[t])));let p=d[t];return Sn(qr.encode(this.version),c,u,he(32,!0).encode(p.txid),ie.encode(p.index),tt.encode(n),Yo.encode(o),ie.encode(p.sequence),l,ie.encode(this.lockTime),ie.encode(r))}preimageWitnessV1(t,n,r,o,i=-1,s,a=192,c){if(!Array.isArray(o)||this.inputs.length!==o.length)throw new Error(`Invalid amounts array=${o}`);if(!Array.isArray(n)||this.inputs.length!==n.length)throw new Error(`Invalid prevOutScript array=${n}`);let u=[zt.encode(0),zt.encode(r),qr.encode(this.version),ie.encode(this.lockTime)],l=r===ge.DEFAULT?ge.ALL:r&3,d=r&ge.ANYONECANPAY,h=this.inputs.map(as),p=this.outputs.map(ti);d!==ge.ANYONECANPAY&&u.push(...[h.map(hh.encode),o.map(Yo.encode),n.map(tt.encode),h.map(f=>ie.encode(f.sequence))].map(f=>xe(Pt(...f)))),l===ge.ALL&&u.push(xe(Pt(...p.map(dr.encode))));let y=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([y])),d===ge.ANYONECANPAY){let f=h[t];u.push(hh.encode(f),Yo.encode(o[t]),tt.encode(n[t]),ie.encode(f.sequence))}else u.push(ie.encode(t));return y&1&&u.push(xe(tt.encode(c||fe))),l===ge.SINGLE&&u.push(t<p.length?xe(dr.encode(p[t])):Wc),s&&u.push(ei(s,a),zt.encode(0),qr.encode(i)),os("TapSighash",...u)}signIdx(t,n,r,o){this.checkInputIdx(n);let i=this.inputs[n],s=Hc(i,this.opts.allowLegacyWitnessUtxo);if(!se(t)){if(!i.bip32Derivation||!i.bip32Derivation.length)throw new Error("bip32Derivation: empty");let l=i.bip32Derivation.filter(h=>h[1].fingerprint==t.fingerprint).map(([h,{path:p}])=>{let y=t;for(let f of p)y=y.deriveChild(f);if(!we(y.publicKey,h))throw new Error("bip32Derivation: wrong pubKey");if(!y.privateKey)throw new Error("bip32Derivation: no privateKey");return y});if(!l.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let d=!1;for(let h of l)this.signIdx(h.privateKey,n)&&(d=!0);return d}r?r.forEach(DA):r=[s.defaultSighash];let a=s.sighash;if(!r.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${r.join(", ")}`);let{sigOutputs:c}=this.inputSighash(n);if(c===ge.SINGLE&&n>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${n}`);let u=ss(i);if(s.txType==="taproot"){if(i.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let l=this.inputs.map(ss),d=l.map(m=>m.script),h=l.map(m=>m.amount),p=!1,y=Jr(t),f=i.tapMerkleRoot||fe;if(i.tapInternalKey){let{pubKey:m,privKey:g}=EA(t,y,i.tapInternalKey,f),[w,b]=Qo(i.tapInternalKey,f);if(we(w,m)){let v=this.preimageWitnessV1(n,d,a,h),D=Pt(uh(v,g,o),a!==ge.DEFAULT?new Uint8Array([a]):fe);this.updateInput(n,{tapKeySig:D},!0),p=!0}}if(i.tapLeafScript){i.tapScriptSig=i.tapScriptSig||[];for(let[m,g]of i.tapLeafScript){let w=g.subarray(0,-1),b=Ie.decode(w),v=g[g.length-1],D=ei(w,v);if(b.findIndex(B=>se(B)&&we(B,y))===-1)continue;let I=this.preimageWitnessV1(n,d,a,h,void 0,w,v),_=Pt(uh(I,t,o),a!==ge.DEFAULT?new Uint8Array([a]):fe);this.updateInput(n,{tapScriptSig:[[{pubKey:y,leafHash:D},_]]},!0),p=!0}}if(!p)throw new Error("No taproot scripts signed");return!0}else{let l=Uc(t),d=!1,h=Xr(l);for(let f of Ie.decode(s.lastScript))se(f)&&(we(f,l)||we(f,h))&&(d=!0);if(!d)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let p;if(s.txType==="legacy")p=this.preimageLegacy(n,s.lastScript,a);else if(s.txType==="segwit"){let f=s.lastScript;s.last.type==="wpkh"&&(f=_e.encode({type:"pkh",hash:s.last.hash})),p=this.preimageWitnessV0(n,f,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let y=b0(p,t,this.opts.lowR);this.updateInput(n,{partialSig:[[l,Pt(y,new Uint8Array([a]))]]},!0)}return!0}sign(t,n,r){let o=0;for(let i=0;i<this.inputs.length;i++)try{this.signIdx(t,i,n,r)&&o++}catch{}if(!o)throw new Error("No inputs signed");return o}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let n=this.inputs[t],r=Hc(n,this.opts.allowLegacyWitnessUtxo);if(r.txType==="taproot"){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else if(n.tapLeafScript&&n.tapScriptSig){let c=n.tapLeafScript.sort((u,l)=>sn.encode(u[0]).length-sn.encode(l[0]).length);for(let[u,l]of c){let d=l.slice(0,-1),h=l[l.length-1],p=_e.decode(d),y=ei(d,h),f=n.tapScriptSig.filter(g=>we(g[0].leafHash,y)),m=[];if(p.type==="tr_ms"){let g=p.m,w=p.pubkeys,b=0;for(let v of w){let D=f.findIndex(E=>we(E[0].pubKey,v));if(b===g||D===-1){m.push(fe);continue}m.push(f[D][1]),b++}if(b!==g)continue}else if(p.type==="tr_ns"){for(let g of p.pubkeys){let w=f.findIndex(b=>we(b[0].pubKey,g));w!==-1&&m.push(f[w][1])}if(m.length!==p.pubkeys.length)continue}else if(p.type==="unknown"&&this.opts.allowUnknownInputs){let g=Ie.decode(d);if(m=f.map(([{pubKey:w},b])=>{let v=g.findIndex(D=>se(D)&&we(D,w));if(v===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:b,pos:v}}).sort((w,b)=>w.pos-b.pos).map(w=>w.signature),!m.length)continue}else{let g=this.opts.customScripts;if(g)for(let w of g){if(!w.finalizeTaproot)continue;let b=Ie.decode(d),v=w.encode(b);if(v===void 0)continue;let D=w.finalizeTaproot(d,v,f);if(D){n.finalScriptWitness=D.concat(sn.encode(u)),n.finalScriptSig=fe,fh(n);return}}throw new Error("Finalize: Unknown tapLeafScript")}n.finalScriptWitness=m.reverse().concat([d,sn.encode(u)]);break}if(!n.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");n.finalScriptSig=fe,fh(n);return}if(!n.partialSig||!n.partialSig.length)throw new Error("Not enough partial sign");let o=fe,i=[];if(r.last.type==="ms"){let c=r.last.m,u=r.last.pubkeys,l=[];for(let d of u){let h=n.partialSig.find(p=>we(d,p[0]));h&&l.push(h[1])}if(l=l.slice(0,c),l.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${l.length}`);o=Ie.encode([0,...l])}else if(r.last.type==="pk")o=Ie.encode([n.partialSig[0][1]]);else if(r.last.type==="pkh")o=Ie.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if(r.last.type==="wpkh")o=fe,i=[n.partialSig[0][1],n.partialSig[0][0]];else if(r.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(r.type.includes("wsh-")&&(o.length&&r.lastScript.length&&(i=Ie.decode(o).map(c=>{if(c===0)return fe;if(se(c))return c;throw new Error(`Wrong witness op=${c}`)})),i=i.concat(r.lastScript)),r.txType==="segwit"&&(a=i),r.type.startsWith("sh-wsh-")?s=Ie.encode([Ie.encode([0,xe(r.lastScript)])]):r.type.startsWith("sh-")?s=Ie.encode([...Ie.decode(o),r.lastScript]):r.type.startsWith("wsh-")||r.txType!=="segwit"&&(s=o),!s&&!a)throw new Error("Unknown error finalizing input");s&&(n.finalScriptSig=s),a&&(n.finalScriptWitness=a),fh(n)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let o of["PSBTVersion","version","lockTime"])if(this.opts[o]!==t.opts[o])throw new Error(`Transaction/combine: different ${o} this=${this.opts[o]} other=${t.opts[o]}`);for(let o of["inputs","outputs"])if(this[o].length!==t[o].length)throw new Error(`Transaction/combine: different ${o} length this=${this[o].length} other=${t[o].length}`);let n=this.global.unsignedTx?It.encode(this.global.unsignedTx):fe,r=t.global.unsignedTx?It.encode(t.global.unsignedTx):fe;if(!we(n,r))throw new Error("Transaction/combine: different unsigned tx");this.global=us(qc,this.global,t.global);for(let o=0;o<this.inputs.length;o++)this.updateInput(o,t.inputs[o],!0);for(let o=0;o<this.outputs.length;o++)this.updateOutput(o,t.outputs[o],!0);return this}clone(){return e.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}};var wh=qe(he(null),e=>ur(e,Ve.ecdsa)),Yc=qe(he(32),e=>ur(e,Ve.schnorr)),P0=qe(he(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e}),Zc=Be({fingerprint:jv,path:Ye(null,ie)}),B0=Be({hashes:Ye(pt,he(32)),der:Zc}),IA=he(78),_A=Be({pubKey:Yc,leafHash:he(32)}),CA=Be({version:zt,internalKey:he(32),merklePath:Ye(null,he(32))}),sn=qe(CA,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),SA=Ye(null,Be({depth:zt,version:zt,script:tt})),Oe=he(null),L0=he(20),hs=he(32),qc={unsignedTx:[0,!1,It,[0],[0],!1],xpub:[1,IA,Zc,[],[0,2],!1],txVersion:[2,!1,ie,[2],[2],!1],fallbackLocktime:[3,!1,ie,[],[2],!1],inputCount:[4,!1,pt,[2],[2],!1],outputCount:[5,!1,pt,[2],[2],!1],txModifiable:[6,!1,zt,[],[2],!1],version:[251,!1,ie,[],[0,2],!1],proprietary:[252,Oe,Oe,[],[0,2],!1]},Jo={nonWitnessUtxo:[0,!1,It,[],[0,2],!1],witnessUtxo:[1,!1,dr,[],[0,2],!1],partialSig:[2,wh,Oe,[],[0,2],!1],sighashType:[3,!1,ie,[],[0,2],!1],redeemScript:[4,!1,Oe,[],[0,2],!1],witnessScript:[5,!1,Oe,[],[0,2],!1],bip32Derivation:[6,wh,Zc,[],[0,2],!1],finalScriptSig:[7,!1,Oe,[],[0,2],!1],finalScriptWitness:[8,!1,Xo,[],[0,2],!1],porCommitment:[9,!1,Oe,[],[0,2],!1],ripemd160:[10,L0,Oe,[],[0,2],!1],sha256:[11,hs,Oe,[],[0,2],!1],hash160:[12,L0,Oe,[],[0,2],!1],hash256:[13,hs,Oe,[],[0,2],!1],txid:[14,!1,hs,[2],[2],!0],index:[15,!1,ie,[2],[2],!0],sequence:[16,!1,ie,[],[2],!0],requiredTimeLocktime:[17,!1,ie,[],[2],!1],requiredHeightLocktime:[18,!1,ie,[],[2],!1],tapKeySig:[19,!1,P0,[],[0,2],!1],tapScriptSig:[20,_A,P0,[],[0,2],!1],tapLeafScript:[21,sn,Oe,[],[0,2],!1],tapBip32Derivation:[22,hs,B0,[],[0,2],!1],tapInternalKey:[23,!1,Yc,[],[0,2],!1],tapMerkleRoot:[24,!1,hs,[],[0,2],!1],proprietary:[252,Oe,Oe,[],[0,2],!1]},k0=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],R0=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],fs={redeemScript:[0,!1,Oe,[],[0,2],!1],witnessScript:[1,!1,Oe,[],[0,2],!1],bip32Derivation:[2,wh,Zc,[],[0,2],!1],amount:[3,!1,Vv,[2],[2],!0],script:[4,!1,Oe,[2],[2],!0],tapInternalKey:[5,!1,Yc,[],[0,2],!1],tapTree:[6,!1,SA,[],[0,2],!1],tapBip32Derivation:[7,Yc,B0,[],[0,2],!1],proprietary:[252,Oe,Oe,[],[0,2],!1]},O0=[],F0=Ye(jf,Be({key:Uv(pt,Be({type:pt,key:he(null)})),value:he(pt)}));function vh(e){let[t,n,r,o,i,s]=e;return{type:t,kc:n,vc:r,reqInc:o,allowInc:i,silentIgnore:s}}var KL=Be({type:pt,key:he(null)});function bh(e){let t={};for(let n in e){let[r,o,i]=e[n];t[r]=[n,o,i]}return Ke({encodeStream:(n,r)=>{let o=[];for(let i in e){let s=r[i];if(s===void 0)continue;let[a,c,u]=e[i];if(!c)o.push({key:{type:a,key:fe},value:u.encode(s)});else{let l=s.map(([d,h])=>[c.encode(d),u.encode(h)]);l.sort((d,h)=>lr(d[0],h[0]));for(let[d,h]of l)o.push({key:{key:d,type:a},value:h})}}if(r.unknown){r.unknown.sort((i,s)=>lr(i[0].key,s[0].key));for(let[i,s]of r.unknown)o.push({key:i,value:s})}F0.encodeStream(n,o)},decodeStream:n=>{let r=F0.decodeStream(n),o={},i={};for(let s of r){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[l,d,h]=t[s.key.type];if(a=l,!d&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${ue.encode(c)} value=${ue.encode(u)}`);if(c=d?d.decode(c):void 0,u=h.decode(u),!d){if(o[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);o[a]=u,i[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(i[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);o[a]||(o[a]=[]),o[a].push([c,u])}return o}})}var Gc=qe(bh(Jo),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)ur(t,Ve.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)ur(t,Ve.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let n=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!we(e.witnessUtxo.script,n.script)||e.witnessUtxo.amount!==n.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,n]of e.tapLeafScript){if((t.version&254)!==n[n.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(n[n.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index!==void 0&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let n=cs.fromRaw(It.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=ue.encode(e.txid);if(n.isFinal&&n.id!==r)throw new Error(`nonWitnessUtxo: wrong txid, exp=${r} got=${n.id}`)}return e}),Kc=qe(bh(fs),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)ur(t,Ve.ecdsa);return e}),V0=qe(bh(qc),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let n of e.unsignedTx.inputs)if(n.finalScriptSig&&n.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),TA=Be({magic:Sc(Cc(new Uint8Array([255])),"psbt"),global:V0,inputs:Ye("global/unsignedTx/inputs/length",Gc),outputs:Ye(null,Kc)}),AA=Be({magic:Sc(Cc(new Uint8Array([255])),"psbt"),global:V0,inputs:Ye("global/inputCount",Gc),outputs:Ye("global/outputCount",Kc)}),YL=Be({magic:Sc(Cc(new Uint8Array([255])),"psbt"),items:Ye(null,Wt(Ye(jf,zv([$v(pt),he(is)])),Dn.dict()))});function yh(e,t,n){for(let r in n){if(r==="unknown"||!t[r])continue;let{allowInc:o}=vh(t[r]);if(!o.includes(e))throw new Error(`PSBTv${e}: field ${r} is not allowed`)}for(let r in t){let{reqInc:o}=vh(t[r]);if(o.includes(e)&&n[r]===void 0)throw new Error(`PSBTv${e}: missing required field ${r}`)}}function ph(e,t,n){let r={};for(let o in n){let i=o;if(i!=="unknown"){if(!t[i])continue;let{allowInc:s,silentIgnore:a}=vh(t[i]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${i} but versions allows inclusion=${s}`)}}r[i]=n[i]}return r}function j0(e){let t=e&&e.global&&e.global.version||0;yh(t,qc,e.global);for(let s of e.inputs)yh(t,Jo,s);for(let s of e.outputs)yh(t,fs,s);let n=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<n)throw new Error("Not enough inputs");let r=e.inputs.slice(n);if(r.length>1||r.length&&Object.keys(r[0]).length)throw new Error(`Unexpected inputs left in tx=${r}`);let o=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<o)throw new Error("Not outputs inputs");let i=e.outputs.slice(o);if(i.length>1||i.length&&Object.keys(i[0]).length)throw new Error(`Unexpected outputs left in tx=${i}`);return e}function us(e,t,n,r){let o=T(T({},n),t);for(let i in e){let s=i,[a,c,u]=e[s],l=r&&!r.includes(i);if(t[i]===void 0&&i in t){if(l)throw new Error(`Cannot remove signed field=${i}`);delete o[i]}else if(c){let d=n&&n[i]?n[i]:[],h=t[s];if(h){if(!Array.isArray(h))throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);h=h.map(f=>{if(f.length!==2)throw new Error(`keyMap(${i}): KV pairs should be [k, v][]`);return[typeof f[0]=="string"?c.decode(ue.decode(f[0])):f[0],typeof f[1]=="string"?u.decode(ue.decode(f[1])):f[1]]});let p={},y=(f,m,g)=>{if(p[f]===void 0){p[f]=[m,g];return}let w=ue.encode(u.encode(p[f][1])),b=ue.encode(u.encode(g));if(w!==b)throw new Error(`keyMap(${s}): same key=${f} oldVal=${w} newVal=${b}`)};for(let[f,m]of d){let g=ue.encode(c.encode(f));y(g,f,m)}for(let[f,m]of h){let g=ue.encode(c.encode(f));if(m===void 0){if(l)throw new Error(`Cannot remove signed field=${s}/${f}`);delete p[g]}else y(g,f,m)}o[s]=Object.values(p)}}else if(typeof o[i]=="string")o[i]=u.decode(ue.decode(o[i]));else if(l&&i in t&&n&&n[i]!==void 0&&!we(u.encode(t[i]),u.encode(n[i])))throw new Error(`Cannot change signed field=${i}`)}for(let i in o)e[i]||delete o[i];return o}var gh=qe(TA,j0),mh=qe(AA,j0);function hr(e,t){try{return ur(e,t),!0}catch{return!1}}var MA={encode(e){if(!(e.length!==2||!se(e[0])||!hr(e[0],Ve.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0},NA={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!se(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},kA={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!se(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},RA={encode(e){if(!(e.length!==2||e[0]!==0||!se(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0},OA={encode(e){if(!(e.length!==2||e[0]!==0||!se(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},PA={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let n=e[0],r=e[t-1];if(typeof n!="number"||typeof r!="number")return;let o=e.slice(1,-2);if(r===o.length){for(let i of o)if(!se(i))return;return{type:"ms",m:n,pubkeys:o}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},LA={encode(e){if(!(e.length!==2||e[0]!==1||!se(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0},FA={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let n=[];for(let r=0;r<t;r++){let o=e[r];if(r&1){if(o!=="CHECKSIGVERIFY"||r===t-1)return;continue}if(!se(o))return;n.push(o)}return{type:"tr_ns",pubkeys:n}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let n=0;n<e.pubkeys.length-1;n++)t.push(e.pubkeys[n],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}},BA={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let n=[],r=S0(e[t-1]);if(typeof r=="number"){for(let o=0;o<t-1;o++){let i=e[o];if(o&1){if(i!==(o===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!se(i))throw new Error("OutScript.encode/tr_ms: wrong key element");n.push(i)}return{type:"tr_ms",pubkeys:n,m:r}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let n=1;n<e.pubkeys.length;n++)t.push(e.pubkeys[n],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}},VA={encode(e){return{type:"unknown",script:Ie.encode(e)}},decode:e=>e.type==="unknown"?Ie.decode(e.script):void 0},jA=[MA,NA,kA,RA,OA,PA,LA,FA,BA,VA],UA=Wt(Ie,Dn.match(jA)),_e=qe(UA,e=>{if(e.type==="pk"&&!hr(e.pubkey,Ve.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!se(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!se(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!se(e.pubkey)||!hr(e.pubkey,Ve.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let n of e.pubkeys)if(!hr(n,Ve.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!hr(t,Ve.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function U0(e,t){if(!we(e.hash,xe(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let n=_e.decode(t);if(n.type==="tr"||n.type==="tr_ns"||n.type==="tr_ms")throw new Error(`checkScript: P2${n.type} cannot be wrapped in P2SH`);if(n.type==="wpkh"||n.type==="sh")throw new Error(`checkScript: P2${n.type} cannot be wrapped in P2WSH`)}function ls(e,t,n){if(e){let r=_e.decode(e);if(r.type==="tr_ns"||r.type==="tr_ms"||r.type==="ms"||r.type=="pk")throw new Error(`checkScript: non-wrapped ${r.type}`);if(r.type==="sh"&&t){if(!we(r.hash,Xr(t)))throw new Error("checkScript: sh wrong redeemScript hash");let o=_e.decode(t);if(o.type==="tr"||o.type==="tr_ns"||o.type==="tr_ms")throw new Error(`checkScript: P2${o.type} cannot be wrapped in P2SH`);if(o.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}r.type==="wsh"&&n&&U0(r,n)}if(t){let r=_e.decode(t);r.type==="wsh"&&n&&U0(r,n)}}var Qc=(e,t=Kt)=>{if(!hr(e,Ve.ecdsa))throw new Error("P2PKH: invalid publicKey");let n=Xr(e);return{type:"pkh",script:_e.encode({type:"pkh",hash:n}),address:fr(t).encode({type:"pkh",hash:n})}},Ch=(e,t=Kt)=>{let n=e.script;if(!se(n))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let r=Xr(n),o=_e.encode({type:"sh",hash:r});ls(o,n,e.witnessScript);let i={type:"sh",redeemScript:n,script:_e.encode({type:"sh",hash:r}),address:fr(t).encode({type:"sh",hash:r})};return e.witnessScript&&(i.witnessScript=e.witnessScript),i};var H0=(e,t=Kt)=>{if(!hr(e,Ve.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let n=Xr(e);return{type:"wpkh",script:_e.encode({type:"wpkh",hash:n}),address:fr(t).encode({type:"wpkh",hash:n})}};function $A(e,t,n=!1,r){let o=_e.decode(e);if(o.type==="unknown"){if(r){let a=Wt(Ie,Dn.match(r)).decode(e);if(a!==void 0){if(typeof a.type!="string"||!a.type.startsWith("tr_"))throw new Error(`P2TR: invalid custom type=${a.type}`);return}}if(n)return}if(!["tr_ns","tr_ms"].includes(o.type))throw new Error(`P2TR: invalid leaf script=${o.type}`);let i=o;if(!n&&i.pubkeys)for(let s of i.pubkeys){if(we(s,$c))throw new Error("Unspendable taproot key in leaf script");if(we(s,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function G0(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let r=t.pop(),o=t.pop(),i=(o?.weight||1)+(r?.weight||1);t.push({weight:i,childs:[o?.childs||o,r?.childs||r]})}let n=t[0];return n?.childs||n}function Dh(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return V(T({},e),{path:t});if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return V(T({},e),{path:t,left:Dh(e.left,[e.right.hash,...t]),right:Dh(e.right,[e.left.hash,...t])})}function xh(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...xh(e.left),...xh(e.right)]}function Ih(e,t,n=!1,r){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:c,script:u}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!we(e.tapMerkleRoot,fe))throw new Error("P2TR: tapRoot leafScript cannot have tree");let l=typeof u=="string"?ue.decode(u):u;if(!se(l))throw new Error(`checkScript: wrong script type=${l}`);return $A(l,t,n,r),{type:"leaf",version:c,script:l,hash:ei(l,c)}}if(e.length!==2&&(e=G0(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let o=Ih(e[0],t,n,r),i=Ih(e[1],t,n,r),[s,a]=[o.hash,i.hash];return lr(a,s)===-1&&([s,a]=[a,s]),{type:"branch",left:o,right:i,hash:os("TapBranch",s,a)}}var _h=192,ei=(e,t=_h)=>os("TapLeaf",new Uint8Array([t]),tt.encode(e));function W0(e,t,n=Kt,r=!1,o){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?ue.decode(e):e||$c;if(!hr(i,Ve.schnorr))throw new Error("p2tr: non-schnorr pubkey");let s=t?Dh(Ih(t,i,r,o)):void 0,a=s?s.hash:void 0,[c,u]=Qo(i,a||fe),l;s&&(l=xh(s).map(p=>V(T({},p),{controlBlock:sn.encode({version:(p.version||_h)+u,internalKey:i,merklePath:p.path})})));let d;l&&(d=l.map(p=>[sn.decode(p.controlBlock),Pt(p.script,new Uint8Array([p.version||_h]))]));let h={type:"tr",script:_e.encode({type:"tr",pubkey:c}),address:fr(n).encode({type:"tr",pubkey:c}),tweakedPubkey:c,tapInternalKey:i};return l&&(h.leaves=l),d&&(h.tapLeafScript=d),a&&(h.tapMerkleRoot=a),h}function Sh(e,t,n=Kt){if(e==="tr")return W0(Jr(t),void 0,n).address;let r=Uc(t);if(e==="pkh")return Qc(r,n).address;if(e==="wpkh")return H0(r,n).address;throw new Error(`getAddress: unknown type=${e}`)}var z0=Mv(xe);function q0(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function Eh(e,t,n=Kt){q0(e,t);let r=e===0?Ic:Lf;return r.encode(n.bech32,[e].concat(r.toWords(t)))}function $0(e,t){return z0.encode(Pt(Uint8Array.from(t),e))}function fr(e=Kt){return{encode(t){let{type:n}=t;if(n==="wpkh")return Eh(0,t.hash,e);if(n==="wsh")return Eh(0,t.hash,e);if(n==="tr")return Eh(1,t.pubkey,e);if(n==="pkh")return $0(t.hash,[e.pubKeyHash]);if(n==="sh")return $0(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${n}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let r;try{if(r=Ic.decode(t),r.words[0]!==0)throw new Error(`bech32: wrong version=${r.words[0]}`)}catch{if(r=Lf.decode(t),r.words[0]===0)throw new Error(`bech32m: wrong version=${r.words[0]}`)}if(r.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${r.prefix}`);let[o,...i]=r.words,s=Ic.fromWords(i);if(q0(o,s),o===0&&s.length===32)return{type:"wsh",hash:s};if(o===0&&s.length===20)return{type:"wpkh",hash:s};if(o===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let n=z0.decode(t);if(n.length!==21)throw new Error("Invalid base58 address");if(n[0]===e.pubKeyHash)return{type:"pkh",hash:n.slice(1)};if(n[0]===e.scriptHash)return{type:"sh",hash:n.slice(1)};throw new Error(`Invalid address prefix=${n[0]}`)}}}var K0={isBytes:se,concatBytes:Pt,compareBytes:lr,pubSchnorr:Jr,randomPrivateKeyBytes:v0,taprootTweakPubkey:Qo};var Y0=(e,t="pkh")=>{let n;if(t==="sh"){let o=Nf.getPublicKey(e);n=Ch(Qc(o)).address}else n=Sh(t,e);let r=xc.encode(e);return{format:t,privateKey:e,address:n,privateKeyBase58:r}},Xc=(e="pkh")=>{let t=K0.randomPrivateKeyBytes();return Y0(t,e)},Z0=e=>{if(!(e.length<25||e.length>34)){if(e[0]==="1")return"pkh";if(e[0]==="3")return"sh";if(e.slice(0,4)==="bc1q")return"wpkh";if(e.slice(0,4)==="bc1p")return"tr"}},Q0=e=>{let t=xc.decode(e.privateKeyBase58);return Y0(t,e.format).address===e.address};var sb=(()=>{let t=class t{constructor(r,o){this._renderer=r,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(r,o){this._renderer.setProperty(this._elementRef.nativeElement,r,o)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(o){return new(o||t)(ne(Kn),ne(ht))},t.\u0275dir=Ge({type:t});let e=t;return e})(),ab=(()=>{let t=class t extends sb{};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Pi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,features:[mn]});let e=t;return e})(),kh=new W("");var GA={provide:kh,useExisting:Hn(()=>ou),multi:!0};function WA(){let e=Bo()?Bo().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var zA=new W(""),ou=(()=>{let t=class t extends sb{constructor(r,o,i){super(r,o),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WA())}writeValue(r){let o=r??"";this.setProperty("value",o)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(o){return new(o||t)(ne(Kn),ne(ht),ne(zA,8))},t.\u0275dir=Ge({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&vt("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Po([GA]),mn]});let e=t;return e})();function eu(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var Rh=new W(""),qA=new W("");function KA(e){return t=>{if(eu(t.value)||eu(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function YA(e){return t=>{if(eu(t.value)||eu(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function X0(e){return null}function cb(e){return e!=null}function ub(e){return Bi(e)?Ir(e):e}function lb(e){let t={};return e.forEach(n=>{t=n!=null?T(T({},t),n):t}),Object.keys(t).length===0?null:t}function db(e,t){return t.map(n=>n(e))}function ZA(e){return!e.validate}function fb(e){return e.map(t=>ZA(t)?t:n=>t.validate(n))}function QA(e){if(!e)return null;let t=e.filter(cb);return t.length==0?null:function(n){return lb(db(n,t))}}function hb(e){return e!=null?QA(fb(e)):null}function XA(e){if(!e)return null;let t=e.filter(cb);return t.length==0?null:function(n){let r=db(n,t).map(ub);return Ju(r).pipe(lt(lb))}}function pb(e){return e!=null?XA(fb(e)):null}function J0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function JA(e){return e._rawValidators}function eM(e){return e._rawAsyncValidators}function Th(e){return e?Array.isArray(e)?e:[e]:[]}function tu(e,t){return Array.isArray(e)?e.includes(t):e===t}function eb(e,t){let n=Th(t);return Th(e).forEach(o=>{tu(n,o)||n.push(o)}),n}function tb(e,t){return Th(t).filter(n=>!tu(e,n))}var nu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ah=class extends nu{get formDirective(){return null}get path(){return null}},ws=class extends nu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Mh=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PF=V(T({},tM),{"[class.ng-submitted]":"isSubmitted"}),gb=(()=>{let t=class t extends Mh{constructor(r){super(r)}};t.\u0275fac=function(o){return new(o||t)(ne(ws,2))},t.\u0275dir=Ge({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&Gd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[mn]});let e=t;return e})();var ps="VALID",Jc="INVALID",ni="PENDING",gs="DISABLED",oi=class{},ru=class extends oi{constructor(t,n){super(),this.value=t,this.source=n}},ms=class extends oi{constructor(t,n){super(),this.pristine=t,this.source=n}},ys=class extends oi{constructor(t,n){super(),this.touched=t,this.source=n}},ri=class extends oi{constructor(t,n){super(),this.status=t,this.source=n}};function nM(e){return(iu(e)?e.validators:e)||null}function rM(e){return Array.isArray(e)?hb(e):e||null}function oM(e,t){return(iu(t)?t.asyncValidators:e)||null}function iM(e){return Array.isArray(e)?pb(e):e||null}function iu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var Nh=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Xa(()=>this.statusReactive()),this.statusReactive=Ya(void 0),this._pristine=Xa(()=>this.pristineReactive()),this.pristineReactive=Ya(!0),this._touched=Xa(()=>this.touchedReactive()),this.touchedReactive=Ya(!1),this._events=new Zt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Yn(this.statusReactive)}set status(t){Yn(()=>this.statusReactive.set(t))}get valid(){return this.status===ps}get invalid(){return this.status===Jc}get pending(){return this.status==ni}get disabled(){return this.status===gs}get enabled(){return this.status!==gs}get pristine(){return Yn(this.pristineReactive)}set pristine(t){Yn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Yn(this.touchedReactive)}set touched(t){Yn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(eb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(eb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(tb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(tb(t,this._rawAsyncValidators))}hasValidator(t){return tu(this._rawValidators,t)}hasAsyncValidator(t){return tu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(V(T({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ys(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new ys(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(V(T({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ms(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ms(!0,r))}markAsPending(t={}){this.status=ni;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ri(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(V(T({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=gs,this.errors=null,this._forEachChild(o=>{o.disable(V(T({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ru(this.value,r)),this._events.next(new ri(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(V(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ps,this._forEachChild(r=>{r.enable(V(T({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(V(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ps||this.status===ni)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ru(this.value,n)),this._events.next(new ri(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(V(T({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gs:ps}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ni,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=ub(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new ri(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?gs:this.errors?Jc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ni)?ni:this._anyControlsHaveStatus(Jc)?Jc:ps}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new ms(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new ys(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){iu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=rM(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=iM(this._rawAsyncValidators)}};var mb=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Oh}),Oh="always";function sM(e,t){return[...t.path,e]}function aM(e,t,n=Oh){uM(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),lM(e,t),fM(e,t),dM(e,t),cM(e,t)}function nb(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function cM(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function uM(e,t){let n=JA(e);t.validator!==null?e.setValidators(J0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=eM(e);t.asyncValidator!==null?e.setAsyncValidators(J0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();nb(t._rawValidators,o),nb(t._rawAsyncValidators,o)}function lM(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&yb(e,t)})}function dM(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&yb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function yb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fM(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function hM(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function pM(e){return Object.getPrototypeOf(e.constructor)===ab}function gM(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===ou?n=i:pM(i)?r=i:o=i}),o||r||n||null}function rb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function ob(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var mM=class extends Nh{constructor(t=null,n,r){super(nM(n),oM(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ob(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){rb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){rb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ob(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var yM={provide:ws,useExisting:Hn(()=>Ph)},ib=Promise.resolve(),Ph=(()=>{let t=class t extends ws{constructor(r,o,i,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new mM,this._registered=!1,this.name="",this.update=new dt,this._parent=r,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=gM(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let o=r.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),hM(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){aM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){ib.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let o=r.isDisabled.currentValue,i=o!==0&&Zd(o);ib.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?sM(r,this._parent):[r]}};t.\u0275fac=function(o){return new(o||t)(ne(Ah,9),ne(Rh,10),ne(qA,10),ne(kh,10),ne(Lo,8),ne(mb,8))},t.\u0275dir=Ge({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Po([yM]),mn,Vr]});let e=t;return e})();var wM={provide:kh,useExisting:Hn(()=>Lh),multi:!0},Lh=(()=>{let t=class t extends ab{writeValue(r){let o=r??"";this.setProperty("value",o)}registerOnChange(r){this.onChange=o=>{r(o==""?null:parseFloat(o))}}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Pi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,i){o&1&&vt("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[Po([wM]),mn]});let e=t;return e})();function wb(e){return typeof e=="number"?e:parseFloat(e)}var vb=(()=>{let t=class t{constructor(){this._validator=X0}ngOnChanges(r){if(this.inputName in r){let o=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):X0,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=Ge({type:t,features:[Vr]});let e=t;return e})(),vM={provide:Rh,useExisting:Hn(()=>Fh),multi:!0},Fh=(()=>{let t=class t extends vb{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>wb(r),this.createValidator=r=>YA(r)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Pi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&Za("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Po([vM]),mn]});let e=t;return e})(),bM={provide:Rh,useExisting:Hn(()=>Bh),multi:!0},Bh=(()=>{let t=class t extends vb{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>wb(r),this.createValidator=r=>KA(r)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Pi(t)))(i||t)}})(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&Za("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Po([bM]),mn]});let e=t;return e})();var EM=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Br({type:t}),t.\u0275inj=Fr({});let e=t;return e})();var bb=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:mb,useValue:r.callSetDisabledState??Oh}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Br({type:t}),t.\u0275inj=Fr({imports:[EM]});let e=t;return e})();var Eb=(()=>{var t,n,Db,xb;let i=class i{constructor(a,c){Pu(this,n);Pu(this,t);this._elRef=a,this._renderer=c,this.busy=!1}ngOnChanges(a){let c=a.busy;c&&(c.currentValue?(this._renderer.setAttribute(this._elRef.nativeElement,"disabled",""),Fu(this,n,Db).call(this)):c.firstChange||(this._renderer.removeAttribute(this._elRef.nativeElement,"disabled"),Fu(this,n,xb).call(this)))}};t=new WeakMap,n=new WeakSet,Db=function(){Lu(this,t,document.createElement("span")),mi(this,t).classList.add("bar"),this._renderer.appendChild(this._elRef.nativeElement,mi(this,t))},xb=function(){mi(this,t)&&(mi(this,t).remove(),Lu(this,t,void 0))},i.\u0275fac=function(c){return new(c||i)(ne(ht),ne(Kn))},i.\u0275dir=Ge({type:i,selectors:[["button","progress",""]],inputs:{busy:"busy"},standalone:!0,features:[Vr]});let e=i;return e})();function xM(e,t){e&1&&Ur(0,"span",6)}function IM(e,t){if(e&1&&(R(0,"div",3),jr(1,xM,1,0,"span",4),R(2,"span",5),A(3),O()()),e&2){let n=t.$implicit;wt(),We("ngIf",n.pending),wt(),We("ngClass",n.type==="INFO"?"text-cyan-300":n.type==="WARN"?"text-amber-300":n.type==="ERROR"?"text-red-300 font-bold":n.type==="SUCCESS"?"text-green-300 font-bold":"text-white"),wt(),Wd(" ",n.text," ")}}var su=class{constructor(t){this.type="INFO",this.text="",this.timestamp=Date.now(),this.pending=!1,Object.assign(this,t)}},Vh=(()=>{let t=class t{constructor(r,o){this.elRef=r,this.cd=o,this.messages=[]}ngOnInit(){this.window=this.elRef.nativeElement.children[0]}log(r){let o=r instanceof su?r:new su(r);return this.messages.push(o),this.cd.detectChanges(),this.window.scrollTop=this.window.scrollHeight,o}clear(){this.messages=[]}};t.\u0275fac=function(o){return new(o||t)(ne(ht),ne(Lo))},t.\u0275cmp=Va({type:t,selectors:[["message-log"]],standalone:!0,features:[Qa],decls:4,vars:1,consts:[[1,"bg-gray-900","text-white","p-4","rounded-md","h-96","overflow-y-scroll","relative","font-mono"],[1,"border-2","sticky","bg-black","top-0","ml-auto","block",3,"click"],["class","mb-2 flex items-center text-sm",4,"ngFor","ngForOf"],[1,"mb-2","flex","items-center","text-sm"],["class","log-message-loader absolute",4,"ngIf"],[1,"ml-6","whitespace-pre-line",3,"ngClass"],[1,"log-message-loader","absolute"]],template:function(o,i){o&1&&(R(0,"div",0)(1,"button",1),vt("click",function(){return i.clear()}),A(2," Clear "),O(),jr(3,IM,4,3,"div",2),O()),o&2&&(wt(3),We("ngForOf",i.messages))},dependencies:[ji,Rw,Ow,tc],styles:[".log-message-loader[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_log-message-loader-anim 1s linear infinite}@keyframes _ngcontent-%COMP%_log-message-loader-anim{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let e=t;return e})();var au=class{constructor(t){this.moduleName=t,this.module={},this.worker={};let n=window;this.factory=n[t]}init(){return ae(this,null,function*(){return new Promise((t,n)=>ae(this,null,function*(){this.module=yield this.factory();let{runningWorkers:r}=this.module.PThread;this.worker=r[0];let o=s=>{n(s.error),this.worker.removeEventListener("error",o)};this.worker.addEventListener("error",o);let i=s=>{let a=s.data;!a||a.em_cmd!=="main_thread_ready"||(t(),this.worker.removeEventListener("message",i))};this.worker.addEventListener("message",i)}))})}exit(){this.module.ccall("em_exit",null,[],[])}};var pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Se=Object.keys,Qe=Array.isArray;typeof Promise<"u"&&!pe.Promise&&(pe.Promise=Promise);function rt(e,t){return typeof t!="object"||Se(t).forEach(function(n){e[n]=t[n]}),e}var Is=Object.getPrototypeOf,_M={}.hasOwnProperty;function Ct(e,t){return _M.call(e,t)}function ui(e,t){typeof t=="function"&&(t=t(Is(e))),(typeof Reflect>"u"?Se:Reflect.ownKeys)(t).forEach(n=>{Rn(e,n,t[n])})}var Lb=Object.defineProperty;function Rn(e,t,n,r){Lb(e,t,rt(n&&Ct(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function di(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Rn(e.prototype,"constructor",e),{extend:ui.bind(null,e.prototype)}}}}var CM=Object.getOwnPropertyDescriptor;function bp(e,t){let n=CM(e,t),r;return n||(r=Is(e))&&bp(r,t)}var SM=[].slice;function Au(e,t,n){return SM.call(e,t,n)}function Fb(e,t){return t(e)}function vs(e){if(!e)throw new Error("Assertion Failed")}function Bb(e){pe.setImmediate?setImmediate(e):setTimeout(e,0)}function Vb(e,t){return e.reduce((n,r,o)=>{var i=t(r,o);return i&&(n[i[0]]=i[1]),n},{})}function TM(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function kn(e,t){if(typeof t=="string"&&Ct(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var i=kn(e,t[r]);n.push(i)}return n}var s=t.indexOf(".");if(s!==-1){var a=e[t.substr(0,s)];return a===void 0?void 0:kn(a,t.substr(s+1))}}function Yt(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){vs(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)Yt(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var s=t.substr(0,i),a=t.substr(i+1);if(a==="")n===void 0?Qe(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];(!c||!Ct(e,s))&&(c=e[s]={}),Yt(c,a,n)}}else n===void 0?Qe(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function AM(e,t){typeof t=="string"?Yt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Yt(e,n,void 0)})}function jb(e){var t={};for(var n in e)Ct(e,n)&&(t[n]=e[n]);return t}var MM=[].concat;function Ub(e){return MM.apply([],e)}var $b="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ub([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>pe[e]),NM=$b.map(e=>pe[e]);Vb($b,e=>[e,!0]);var gr=null;function Ns(e){gr=typeof WeakMap<"u"&&new WeakMap;let t=zh(e);return gr=null,t}function zh(e){if(!e||typeof e!="object")return e;let t=gr&&gr.get(e);if(t)return t;if(Qe(e)){t=[],gr&&gr.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(zh(e[n]))}else if(NM.indexOf(e.constructor)>=0)t=e;else{let i=Is(e);t=i===Object.prototype?{}:Object.create(i),gr&&gr.set(e,t);for(var o in e)Ct(e,o)&&(t[o]=zh(e[o]))}return t}var{toString:kM}={};function qh(e){return kM.call(e).slice(8,-1)}var Kh=typeof Symbol<"u"?Symbol.iterator:"@@iterator",RM=typeof Kh=="symbol"?function(e){var t;return e!=null&&(t=e[Kh])&&t.apply(e)}:function(){return null},ai={};function Mn(e){var t,n,r,o;if(arguments.length===1){if(Qe(e))return e.slice();if(this===ai&&typeof e=="string")return[e];if(o=RM(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ep=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1,cn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Hb(e,t){cn=e,Gb=t}var Gb=()=>!0,OM=!new Error("").stack;function ao(){if(OM)try{throw ao.arguments,new Error}catch(e){return e}return new Error}function Yh(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Gb).map(r=>`
`+r).join("")):""}var PM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Wb=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dp=PM.concat(Wb),LM={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fi(e,t){this._e=ao(),this.name=e,this.message=t}di(fi).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Yh(this._e,2))}},toString:function(){return this.name+": "+this.message}});function zb(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,o)=>o.indexOf(n)===r).join(`
`)}function vu(e,t,n,r){this._e=ao(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=zb(e,t)}di(vu).from(fi);function Es(e,t){this._e=ao(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=zb(e,t)}di(Es).from(fi);var xp=Dp.reduce((e,t)=>(e[t]=t+"Error",e),{}),FM=fi,$=Dp.reduce((e,t)=>{var n=t+"Error";function r(o,i){this._e=ao(),this.name=n,o?typeof o=="string"?(this.message=`${o}${i?`
 `+i:""}`,this.inner=i||null):typeof o=="object"&&(this.message=`${o.name} ${o.message}`,this.inner=o):(this.message=LM[t]||n,this.inner=null)}return di(r).from(FM),e[t]=r,e},{});$.Syntax=SyntaxError;$.Type=TypeError;$.Range=RangeError;var Ib=Wb.reduce((e,t)=>(e[t+"Error"]=$[t],e),{});function BM(e,t){if(!e||e instanceof fi||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ib[e.name])return e;var n=new Ib[e.name](t||e.message,e);return"stack"in e&&Rn(n,"stack",{get:function(){return this.inner.stack}}),n}var Mu=Dp.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=$[t]),e),{});Mu.ModifyError=vu;Mu.DexieError=fi;Mu.BulkError=Es;function le(){}function ks(e){return e}function VM(e,t){return e==null||e===ks?t:function(n){return t(e(n))}}function io(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function jM(e,t){return e===le?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?io(r,this.onsuccess):r),o&&(this.onerror=this.onerror?io(o,this.onerror):o),i!==void 0?i:n}}function UM(e,t){return e===le?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?io(n,this.onsuccess):n),r&&(this.onerror=this.onerror?io(r,this.onerror):r)}}function $M(e,t){return e===le?t:function(n){var r=e.apply(this,arguments);rt(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?io(o,this.onsuccess):o),i&&(this.onerror=this.onerror?io(i,this.onerror):i),r===void 0?s===void 0?void 0:s:rt(r,s)}}function HM(e,t){return e===le?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Ip(e,t){return e===le?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}var _s={},GM=100,WM=20,qb=100,[Zh,bu,Qh]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Is(e),e];let t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Is(t),e]})(),Kb=bu&&bu.then,hu=Zh&&Zh.constructor,_p=!!Qh,Xh=!1,zM=Qh?()=>{Qh.then(cu)}:pe.setImmediate?setImmediate.bind(null,cu):pe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{cu(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(cu,0)},Cs=function(e,t){bs.push([e,t]),Eu&&(zM(),Eu=!1)},Jh=!0,Eu=!0,ro=[],pu=[],ep=null,tp=ks,ci={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Sb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Sb(e[0],e[1])}catch{}})}},j=ci,bs=[],oo=0,gu=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=le,this._lib=!1;var t=this._PSD=j;if(cn&&(this._stackHolder=ao(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==_s)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&rp(this,this._value);return}this._state=null,this._value=null,++t.ref,Zb(this,e)}var np={get:function(){var e=j,t=Du;function n(r,o){var i=!e.global&&(e!==j||t!==Du);let s=i&&!On();var a=new F((c,u)=>{Cp(this,new Yb(Iu(r,e,i,s),Iu(o,e,i,s),c,u,e))});return cn&&Jb(a,this),a}return n.prototype=_s,n},set:function(e){Rn(this,"then",e&&e.prototype===_s?np:{get:function(){return e},set:np.set})}};ui(F.prototype,{then:np,_then:function(e,t){Cp(this,new Yb(null,null,e,t,j))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):mu(r)):this.then(null,r=>r&&r.name===t?n(r):mu(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),mu(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Xh=!0;var e=Xb(this,[],WM),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Xh=!1}}},timeout:function(e,t){return e<1/0?new F((n,r)=>{var o=setTimeout(()=>r(new $.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Rn(F.prototype,Symbol.toStringTag,"Dexie.Promise");ci.env=eE();function Yb(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}ui(F,{all:function(){var e=Mn.apply(null,arguments).map(xu);return new F(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((o,i)=>F.resolve(o).then(s=>{e[i]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof F)return e;if(e&&typeof e.then=="function")return new F((n,r)=>{e.then(n,r)});var t=new F(_s,!0,e);return Jb(t,ep),t},reject:mu,race:function(){var e=Mn.apply(null,arguments).map(xu);return new F((t,n)=>{e.map(r=>F.resolve(r).then(t,n))})},PSD:{get:()=>j,set:e=>j=e},totalEchoes:{get:()=>Du},newPSD:yr,usePSD:pi,scheduler:{get:()=>Cs,set:e=>{Cs=e}},rejectionMapper:{get:()=>tp,set:e=>{tp=e}},follow:(e,t)=>new F((n,r)=>yr((o,i)=>{var s=j;s.unhandleds=[],s.onunhandled=i,s.finalize=io(function(){KM(()=>{this.unhandleds.length===0?o():i(this.unhandleds[0])})},s.finalize),e()},t,n,r))});hu&&(hu.allSettled&&Rn(F,"allSettled",function(){let e=Mn.apply(null,arguments).map(xu);return new F(t=>{e.length===0&&t([]);let n=e.length,r=new Array(n);e.forEach((o,i)=>F.resolve(o).then(s=>r[i]={status:"fulfilled",value:s},s=>r[i]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),hu.any&&typeof AggregateError<"u"&&Rn(F,"any",function(){let e=Mn.apply(null,arguments).map(xu);return new F((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length,o=new Array(r);e.forEach((i,s)=>F.resolve(i).then(a=>t(a),a=>{o[s]=a,--r||n(new AggregateError(o))}))})}));function Zb(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Rs();n&&typeof n.then=="function"?Zb(e,(o,i)=>{n instanceof F?n._then(o,i):n.then(o,i)}):(e._state=!0,e._value=n,Qb(e)),r&&Os()}},rp.bind(null,e))}catch(n){rp(e,n)}}function rp(e,t){if(pu.push(t),e._state===null){var n=e._lib&&Rs();t=tp(t),e._state=!1,e._value=t,cn&&t!==null&&typeof t=="object"&&!t._promise&&TM(()=>{var r=bp(t,"stack");t._promise=e,Rn(t,"stack",{get:()=>Xh?r&&(r.get?r.get.apply(t):r.value):e.stack})}),YM(e),Qb(e),n&&Os()}}function Qb(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Cp(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),oo===0&&(++oo,Cs(()=>{--oo===0&&Sp()},[]))}function Cp(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++oo,Cs(qM,[n,e,t])}function qM(e,t,n){try{ep=t;var r,o=t._value;t._state?r=e(o):(pu.length&&(pu=[]),r=e(o),pu.indexOf(o)===-1&&ZM(t)),n.resolve(r)}catch(i){n.reject(i)}finally{ep=null,--oo===0&&Sp(),--n.psd.ref||n.psd.finalize()}}function Xb(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o=e._value,i,s;o!=null?(i=o.name||"Error",s=o.message||o,r=Yh(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+r)}return cn&&(r=Yh(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Xb(e._prev,t,n)),t}function Jb(e,t){var n=t?t._numPrev+1:0;n<GM&&(e._prev=t,e._numPrev=n)}function cu(){Rs()&&Os()}function Rs(){var e=Jh;return Jh=!1,Eu=!1,e}function Os(){var e,t,n;do for(;bs.length>0;)for(e=bs,bs=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(bs.length>0);Jh=!0,Eu=!0}function Sp(){var e=ro;ro=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=gu.slice(0),n=t.length;n;)t[--n]()}function KM(e){function t(){e(),gu.splice(gu.indexOf(t),1)}gu.push(t),++oo,Cs(()=>{--oo===0&&Sp()},[])}function YM(e){ro.some(t=>t._value===e._value)||ro.push(e)}function ZM(e){for(var t=ro.length;t;)if(ro[--t]._value===e._value){ro.splice(t,1);return}}function mu(e){return new F(_s,!1,e)}function me(e,t){var n=j;return function(){var r=Rs(),o=j;try{return wr(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{wr(o,!1),r&&Os()}}}var Ze={awaits:0,echoes:0,id:0},QM=0,yu=[],jh=0,Du=0,XM=0;function yr(e,t,n,r){var o=j,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++XM;var s=ci.env;i.env=_p?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject,nthen:_b(s.nthen,i),gthen:_b(s.gthen,i)}:{},t&&rt(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=pi(i,e,n,r);return i.ref===0&&i.finalize(),a}function hi(){return Ze.id||(Ze.id=++QM),++Ze.awaits,Ze.echoes+=qb,Ze.id}function On(){return Ze.awaits?(--Ze.awaits===0&&(Ze.id=0),Ze.echoes=Ze.awaits*qb,!0):!1}(""+Kb).indexOf("[native code]")===-1&&(hi=On=le);function xu(e){return Ze.echoes&&e&&e.constructor===hu?(hi(),e.then(t=>(On(),t),t=>(On(),Pe(t)))):e}function JM(e){++Du,(!Ze.echoes||--Ze.echoes===0)&&(Ze.echoes=Ze.id=0),yu.push(j),wr(e,!0)}function e1(){var e=yu[yu.length-1];yu.pop(),wr(e,!1)}function wr(e,t){var n=j;if((t?Ze.echoes&&(!jh++||e!==j):jh&&(!--jh||e!==j))&&tE(t?JM.bind(null,e):e1),e!==j&&(j=e,n===ci&&(ci.env=eE()),_p)){var r=ci.env.Promise,o=e.env;bu.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(pe,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function eE(){var e=pe.Promise;return _p?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(pe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:bu.then,gthen:e.prototype.then}:{}}function pi(e,t,n,r,o){var i=j;try{return wr(e,!0),t(n,r,o)}finally{wr(i,!1)}}function tE(e){Kb.call(Zh,e)}function Iu(e,t,n,r){return typeof e!="function"?e:function(){var o=j;n&&hi(),wr(t,!0);try{return e.apply(this,arguments)}finally{wr(o,!1),r&&tE(On)}}}function _b(e,t){return function(n,r){return e.call(this,Iu(n,t),Iu(r,t))}}var Cb="unhandledrejection";function Sb(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,o={promise:t,reason:e};if(pe.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Cb,!0,!0),rt(r,o)):pe.CustomEvent&&(r=new CustomEvent(Cb,{detail:o}),rt(r,o)),r&&pe.dispatchEvent&&(dispatchEvent(r),!pe.PromiseRejectionEvent&&pe.onunhandledrejection))try{pe.onunhandledrejection(r)}catch{}cn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Pe=F.reject;function op(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!j.letThrough&&!e._vip){if(e._state.openComplete)return Pe(new $.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Pe(new $.DatabaseClosed);e.open().catch(le)}return e._state.dbReadyPromise.then(()=>op(e,t,n,r))}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===xp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>op(e,t,n,r))):Pe(i)}return o._promise(t,(i,s)=>yr(()=>(j.trans=o,r(i,s,o)))).then(i=>o._completion.then(()=>i))}}var Tb="3.2.5",no="\uFFFF",ip=-1/0,Tn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",nE="String expected.",Ds=[],Nu=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),t1=Nu,n1=Nu,rE=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),ku="__dbnames",Uh="readonly",$h="readwrite";function so(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var oE={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function uu(e){return typeof e=="string"&&!/\./.test(e)?t=>(t[e]===void 0&&e in t&&(t=Ns(t),delete t[e]),t):t=>t}var sp=class{_trans(t,n,r){let o=this._tx||j.trans,i=this.name;function s(c,u,l){if(!l.schema[i])throw new $.NotFound("Table "+i+" not part of transaction");return n(l.idbtrans,l)}let a=Rs();try{return o&&o.db===this.db?o===j.trans?o._promise(t,s,r):yr(()=>o._promise(t,s,r),{trans:o,transless:j.transless||j}):op(this.db,t,[this.name],s)}finally{a&&Os()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(o=>this.hook.reading.fire(o))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Qe(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);let n=Se(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(u=>{if(u.compound&&n.every(l=>u.keyPath.indexOf(l)>=0)){for(let l=0;l<n.length;++l)if(n.indexOf(u.keyPath[l])===-1)return!1;return!0}return!1}).sort((u,l)=>u.keyPath.length-l.keyPath.length)[0];if(r&&this.db._maxKey!==no){let u=r.keyPath.slice(0,n.length);return this.where(u).equals(u.map(l=>t[l]))}!r&&cn&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:o}=this.schema,i=this.db._deps.indexedDB;function s(u,l){try{return i.cmp(u,l)===0}catch{return!1}}let[a,c]=n.reduce(([u,l],d)=>{let h=o[d],p=t[d];return[u||h,u||!h?so(l,h&&h.multi?y=>{let f=kn(y,d);return Qe(f)&&f.some(m=>s(p,m))}:y=>s(p,kn(y,d))):l]},[null,null]);return a?this.where(a.name).equals(t[a.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Qe(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;let n=r=>{if(!r)return r;let o=Object.create(t.prototype);for(var i in r)if(Ct(r,i))try{o[i]=r[i]}catch{}return o};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){function t(n){rt(this,n)}return this.mapToClass(t)}add(t,n){let{auto:r,keyPath:o}=this.schema.primKey,i=t;return o&&r&&(i=uu(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[i]})).then(s=>s.numFailures?F.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{Yt(t,o,s)}catch{}return s})}update(t,n){if(typeof t=="object"&&!Qe(t)){let r=kn(t,this.schema.primKey.keyPath);if(r===void 0)return Pe(new $.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Se(n).forEach(o=>{Yt(t,o,n[o])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)}put(t,n){let{auto:r,keyPath:o}=this.schema.primKey,i=t;return o&&r&&(i=uu(o)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[i],keys:n!=null?[n]:null})).then(s=>s.numFailures?F.reject(s.failures[0]):s.lastResult).then(s=>{if(o)try{Yt(t,o,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?F.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:oE})).then(t=>t.numFailures?F.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(o=>this.hook.reading.fire(o))))}bulkAdd(t,n,r){let o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);let i=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&o)throw new $.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,l=c&&a?t.map(uu(c)):t;return this.core.mutate({trans:s,type:"add",keys:o,values:l,wantResults:i}).then(({numFailures:d,results:h,lastResult:p,failures:y})=>{let f=i?h:p;if(d===0)return f;throw new Es(`${this.name}.bulkAdd(): ${d} of ${u} operations failed`,y)})})}bulkPut(t,n,r){let o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);let i=r?r.allKeys:void 0;return this._trans("readwrite",s=>{let{auto:a,keyPath:c}=this.schema.primKey;if(c&&o)throw new $.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new $.InvalidArgument("Arguments objects and keys must have the same length");let u=t.length,l=c&&a?t.map(uu(c)):t;return this.core.mutate({trans:s,type:"put",keys:o,values:l,wantResults:i}).then(({numFailures:d,results:h,lastResult:p,failures:y})=>{let f=i?h:p;if(d===0)return f;throw new Es(`${this.name}.bulkPut(): ${d} of ${u} operations failed`,y)})})}bulkDelete(t){let n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:o,failures:i})=>{if(r===0)return o;throw new Es(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}};function Ps(e){var t={},n=function(a,c){if(c){for(var u=arguments.length,l=new Array(u-1);--u;)l[u-1]=arguments[u];return t[a].subscribe.apply(null,l),e}else if(typeof a=="string")return t[a]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(a,c,u){if(typeof a=="object")return s(a);c||(c=HM),u||(u=le);var l={subscribers:[],fire:u,subscribe:function(d){l.subscribers.indexOf(d)===-1&&(l.subscribers.push(d),l.fire=c(l.fire,d))},unsubscribe:function(d){l.subscribers=l.subscribers.filter(function(h){return h!==d}),l.fire=l.subscribers.reduce(c,u)}};return t[a]=n[a]=l,l}function s(a){Se(a).forEach(function(c){var u=a[c];if(Qe(u))i(c,a[c][0],a[c][1]);else if(u==="asap")var l=i(c,ks,function(){for(var h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];l.subscribers.forEach(function(y){Bb(function(){y.apply(null,p)})})});else throw new $.InvalidArgument("Invalid event config")})}}function Ls(e,t){return di(t).from({prototype:e}),t}function r1(e){return Ls(sp.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ps(null,{creating:[jM,le],reading:[VM,ks],updating:[$M,le],deleting:[UM,le]})})}function ii(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Hh(e,t){e.filter=so(e.filter,t)}function Gh(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>so(r(),t()):t,e.justLimit=n&&!r}function o1(e,t){e.isMatch=so(e.isMatch,t)}function wu(e,t){if(e.isPrimKey)return t.primaryKey;let n=t.getIndexByKeyPath(e.index);if(!n)throw new $.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ab(e,t,n){let r=wu(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function lu(e,t,n,r){let o=e.replayFilter?so(e.filter,e.replayFilter()):e.filter;if(e.or){let i={},s=(a,c,u)=>{if(!o||o(c,u,h=>c.stop(h),h=>c.fail(h))){var l=c.primaryKey,d=""+l;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(l)),Ct(i,d)||(i[d]=!0,t(a,c,u))}};return Promise.all([e.or._iterate(s,n),Mb(Ab(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return Mb(Ab(e,r,n),so(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Mb(e,t,n,r){var o=r?(s,a,c)=>n(r(s),a,c):n,i=me(o);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();(!t||t(s,c=>a=c,c=>{s.stop(c),a=le},c=>{s.fail(c),a=le}))&&i(s.value,s,c=>a=c),a()})})}function nt(e,t){try{let n=Nb(e),r=Nb(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return s1(kb(e),kb(t));case"Array":return i1(e,t)}}catch{}return NaN}function i1(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let i=0;i<o;++i){let s=nt(e[i],t[i]);if(s!==0)return s}return n===r?0:n<r?-1:1}function s1(e,t){let n=e.length,r=t.length,o=n<r?n:r;for(let i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}function Nb(e){let t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";let n=qh(e);return n==="ArrayBuffer"?"binary":n}function kb(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ap=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Pe.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Pe.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=so(n.algorithm,t)}_iterate(t,n){return lu(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&rt(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>lu(n,t,r,n.table.core))}count(t){return this._read(n=>{let r=this._ctx,o=r.table.core;if(ii(r,!0))return o.count({trans:n,query:{index:wu(r,o.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var i=0;return lu(r,()=>(++i,!1),n,o).then(()=>i)}).then(t)}sortBy(t,n){let r=t.split(".").reverse(),o=r[0],i=r.length-1;function s(u,l){return l?s(u[r[l]],l-1):u[o]}var a=this._ctx.dir==="next"?1:-1;function c(u,l){var d=s(u,i),h=s(l,i);return d<h?-a:d>h?a:0}return this.toArray(function(u){return u.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ii(r,!0)&&r.limit>0){let{valueMapper:o}=r,i=wu(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:s})=>o?s.map(o):s)}else{let o=[];return lu(r,i=>o.push(i),n,r.table.core).then(()=>o)}},t)}offset(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ii(n)?Gh(n,()=>{var r=t;return(o,i)=>r===0?!0:r===1?(--r,!1):(i(()=>{o.advance(r),r=0}),!1)}):Gh(n,()=>{var r=t;return()=>--r<0}),this)}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Gh(this._ctx,()=>{var n=t;return function(r,o,i){return--n<=0&&o(i),n>=0}},!0),this}until(t,n){return Hh(this._ctx,function(r,o,i){return t(r.value)?(o(i),n):!0}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){return Hh(this._ctx,function(n){return t(n.value)}),o1(this._ctx,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.key,o)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.primaryKey,o)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ii(n,!0)&&n.limit>0)return this._read(o=>{var i=wu(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:o})=>o).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Hh(this._ctx,function(o){var i=o.primaryKey.toString(),s=Ct(r,i);return r[i]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var o;if(typeof t=="function")o=t;else{var i=Se(t),s=i.length;o=function(f){for(var m=!1,g=0;g<s;++g){var w=i[g],b=t[w];kn(f,w)!==b&&(Yt(f,w,b),m=!0)}return m}}let a=n.table.core,{outbound:c,extractKey:u}=a.schema.primaryKey,l=this.db._options.modifyChunkSize||200,d=[],h=0,p=[],y=(f,m)=>{let{failures:g,numFailures:w}=m;h+=f-w;for(let b of Se(g))d.push(g[b])};return this.clone().primaryKeys().then(f=>{let m=g=>{let w=Math.min(l,f.length-g);return a.getMany({trans:r,keys:f.slice(g,g+w),cache:"immutable"}).then(b=>{let v=[],D=[],E=c?[]:null,I=[];for(let B=0;B<w;++B){let N=b[B],S={value:Ns(N),primKey:f[g+B]};o.call(S,S.value,S)!==!1&&(S.value==null?I.push(f[g+B]):!c&&nt(u(N),u(S.value))!==0?(I.push(f[g+B]),v.push(S.value)):(D.push(S.value),c&&E.push(f[g+B])))}let _=ii(n)&&n.limit===1/0&&(typeof t!="function"||t===Wh)&&{index:n.index,range:n.range};return Promise.resolve(v.length>0&&a.mutate({trans:r,type:"add",values:v}).then(B=>{for(let N in B.failures)I.splice(parseInt(N),1);y(v.length,B)})).then(()=>(D.length>0||_&&typeof t=="object")&&a.mutate({trans:r,type:"put",keys:E,values:D,criteria:_,changeSpec:typeof t!="function"&&t}).then(B=>y(D.length,B))).then(()=>(I.length>0||_&&t===Wh)&&a.mutate({trans:r,type:"delete",keys:I,criteria:_}).then(B=>y(I.length,B))).then(()=>f.length>g+w&&m(g+l))})};return m(0).then(()=>{if(d.length>0)throw new vu("Error modifying one or more objects",d,h,p);return f.length})})})}delete(){var t=this._ctx,n=t.range;return ii(t)&&(t.isPrimKey&&!n1||n.type===3)?this._write(r=>{let{primaryKey:o}=t.table.core.schema,i=n;return t.table.core.count({trans:r,query:{index:o,range:i}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:c,results:u,numFailures:l})=>{if(l)throw new vu("Could not delete some values",Object.keys(a).map(d=>a[d]),s-l);return s-l}))}):this.modify(Wh)}},Wh=(e,t)=>t.value=null;function a1(e){return Ls(ap.prototype,function(n,r){this.db=e;let o=oE,i=null;if(r)try{o=r()}catch(u){i=u}let s=n._ctx,a=s.table,c=a.hook.reading.fire;this._ctx={table:a,index:s.index,isPrimKey:!s.index||a.schema.primKey.keyPath&&s.index===a.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:c!==ks?c:null}})}function c1(e,t){return e<t?-1:e===t?0:1}function u1(e,t){return e>t?-1:e===t?0:1}function _t(e,t,n){var r=e instanceof _u?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function si(e){return new e.Collection(e,()=>iE("")).limit(0)}function l1(e){return e==="next"?t=>t.toUpperCase():t=>t.toLowerCase()}function d1(e){return e==="next"?t=>t.toLowerCase():t=>t.toUpperCase()}function f1(e,t,n,r,o,i){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return o(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):o(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[c],u)<0&&(a=c)}return s<r.length&&i==="next"?e+n.substr(e.length):s<e.length&&i==="prev"?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function du(e,t,n,r){var o,i,s,a,c,u,l,d=n.length;if(!n.every(f=>typeof f=="string"))return _t(e,nE);function h(f){o=l1(f),i=d1(f),s=f==="next"?c1:u1;var m=n.map(function(g){return{lower:i(g),upper:o(g)}}).sort(function(g,w){return s(g.lower,w.lower)});a=m.map(function(g){return g.upper}),c=m.map(function(g){return g.lower}),u=f,l=f==="next"?"":r}h("next");var p=new e.Collection(e,()=>pr(a[0],c[d-1]+r));p._ondirectionchange=function(f){h(f)};var y=0;return p._addAlgorithm(function(f,m,g){var w=f.key;if(typeof w!="string")return!1;var b=i(w);if(t(b,c,y))return!0;for(var v=null,D=y;D<d;++D){var E=f1(w,b,a[D],c[D],s,u);E===null&&v===null?y=D+1:(v===null||s(v,E)>0)&&(v=E)}return m(v!==null?function(){f.continue(v+l)}:g),!1}),p}function pr(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function iE(e){return{type:1,lower:e,upper:e}}var _u=class{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||o)&&!(r&&o)?si(this):new this.Collection(this,()=>pr(t,n,!r,!o))}catch{return _t(this,Tn)}}equals(t){return t==null?_t(this,Tn):new this.Collection(this,()=>iE(t))}above(t){return t==null?_t(this,Tn):new this.Collection(this,()=>pr(t,void 0,!0))}aboveOrEqual(t){return t==null?_t(this,Tn):new this.Collection(this,()=>pr(t,void 0,!1))}below(t){return t==null?_t(this,Tn):new this.Collection(this,()=>pr(void 0,t,!1,!0))}belowOrEqual(t){return t==null?_t(this,Tn):new this.Collection(this,()=>pr(void 0,t))}startsWith(t){return typeof t!="string"?_t(this,nE):this.between(t,t+no,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):du(this,(n,r)=>n.indexOf(r[0])===0,[t],no)}equalsIgnoreCase(t){return du(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Mn.apply(ai,arguments);return t.length===0?si(this):du(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Mn.apply(ai,arguments);return t.length===0?si(this):du(this,(n,r)=>r.some(o=>n.indexOf(o)===0),t,no)}anyOf(){let t=Mn.apply(ai,arguments),n=this._cmp;try{t.sort(n)}catch{return _t(this,Tn)}if(t.length===0)return si(this);let r=new this.Collection(this,()=>pr(t[0],t[t.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let o=0;return r._addAlgorithm((i,s,a)=>{let c=i.key;for(;n(c,t[o])>0;)if(++o,o===t.length)return s(a),!1;return n(c,t[o])===0?!0:(s(()=>{i.continue(t[o])}),!1)}),r}notEqual(t){return this.inAnyRange([[ip,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let t=Mn.apply(ai,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return _t(this,Tn)}let n=t.reduce((r,o)=>r?r.concat([[r[r.length-1][1],o]]):[[ip,o]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){let r=this._cmp,o=this._ascending,i=this._descending,s=this._min,a=this._max;if(t.length===0)return si(this);if(!t.every(v=>v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0))return _t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$.InvalidArgument);let c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;function l(v,D){let E=0,I=v.length;for(;E<I;++E){let _=v[E];if(r(D[0],_[1])<0&&r(D[1],_[0])>0){_[0]=s(_[0],D[0]),_[1]=a(_[1],D[1]);break}}return E===I&&v.push(D),v}let d=o;function h(v,D){return d(v[0],D[0])}let p;try{p=t.reduce(l,[]),p.sort(h)}catch{return _t(this,Tn)}let y=0,f=u?v=>o(v,p[y][1])>0:v=>o(v,p[y][1])>=0,m=c?v=>i(v,p[y][0])>0:v=>i(v,p[y][0])>=0;function g(v){return!f(v)&&!m(v)}let w=f,b=new this.Collection(this,()=>pr(p[0][0],p[p.length-1][1],!c,!u));return b._ondirectionchange=v=>{v==="next"?(w=f,d=o):(w=m,d=i),p.sort(h)},b._addAlgorithm((v,D,E)=>{for(var I=v.key;w(I);)if(++y,y===p.length)return D(E),!1;return g(I)?!0:(this._cmp(I,p[y][1])===0||this._cmp(I,p[y][0])===0||D(()=>{d===o?v.continue(p[y][0]):v.continue(p[y][1])}),!1)}),b}startsWithAnyOf(){let t=Mn.apply(ai,arguments);return t.every(n=>typeof n=="string")?t.length===0?si(this):this.inAnyRange(t.map(n=>[n,n+no])):_t(this,"startsWithAnyOf() only works with strings")}};function h1(e){return Ls(_u.prototype,function(n,r,o){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o};let i=e._deps.indexedDB;if(!i)throw new $.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(s,a)=>i.cmp(a,s),this._max=(s,a)=>i.cmp(s,a)>0?s:a,this._min=(s,a)=>i.cmp(s,a)<0?s:a,this._IDBKeyRange=e._deps.IDBKeyRange})}function an(e){return me(function(t){return Ss(t),e(t.target.error),!1})}function Ss(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ts="storagemutated",mr="x-storagemutated-1",vr=Ps(null,Ts),cp=class{_lock(){return vs(!j.global),++this._reculock,this._reculock===1&&!j.global&&(j.lockOwnerFor=this),this}_unlock(){if(vs(!j.global),--this._reculock===0)for(j.global||(j.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{pi(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&j.lockOwnerFor!==this}create(t){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(vs(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new $.DatabaseClosed(r);case"MissingAPIError":throw new $.MissingAPI(r.message,r);default:throw new $.OpenFailed(r)}if(!this.active)throw new $.TransactionInactive;return vs(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=me(o=>{Ss(o),this._reject(t.error)}),t.onabort=me(o=>{Ss(o),this.active&&this._reject(new $.Abort(t.error)),this.active=!1,this.on("abort").fire(o)}),t.oncomplete=me(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&vr.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Pe(new $.ReadOnly("Transaction is readonly"));if(!this.active)return Pe(new $.TransactionInactive);if(this._locked())return new F((i,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(i,s)},j])});if(r)return yr(()=>{var i=new F((s,a)=>{this._lock();let c=n(s,a,this);c&&c.then&&c.then(s,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var o=new F((i,s)=>{var a=n(i,s,this);a&&a.then&&a.then(i,s)});return o._lib=!0,o}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();let r=F.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var i=n._waitingFor;return new F((s,a)=>{r.then(c=>n._waitingQueue.push(me(s.bind(null,c))),c=>n._waitingQueue.push(me(a.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $.Abort))}table(t){let n=this._memoizedTables||(this._memoizedTables={});if(Ct(n,t))return n[t];let r=this.schema[t];if(!r)throw new $.NotFound("Table "+t+" not part of transaction");let o=new this.db.Table(t,r,this);return o.core=this.db.core.table(t),n[t]=o,o}};function p1(e){return Ls(cp.prototype,function(n,r,o,i,s){this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Ps(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F((a,c)=>{this._resolve=a,this._reject=c}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var c=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):c&&this.idbtrans&&this.idbtrans.abort(),Pe(a)})})}function up(e,t,n,r,o,i,s){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+sE(t)}}function sE(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function aE(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Vb(n,r=>[r.name,r])}}function g1(e){return e.length===1?e[0]:e}var As=e=>{try{return e.only([[]]),As=()=>[[]],[[]]}catch{return As=()=>no,no}};function lp(e){return e==null?()=>{}:typeof e=="string"?m1(e):t=>kn(t,e)}function m1(e){return e.split(".").length===1?n=>n[e]:n=>kn(n,e)}function Rb(e){return[].slice.call(e)}var y1=0;function xs(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function w1(e,t,n){function r(l,d){let h=Rb(l.objectStoreNames);return{schema:{name:l.name,tables:h.map(p=>d.objectStore(p)).map(p=>{let{keyPath:y,autoIncrement:f}=p,m=Qe(y),g=y==null,w={},b={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:m,keyPath:y,autoIncrement:f,unique:!0,extractKey:lp(y)},indexes:Rb(p.indexNames).map(v=>p.index(v)).map(v=>{let{name:D,unique:E,multiEntry:I,keyPath:_}=v,B=Qe(_),N={name:D,compound:B,keyPath:_,unique:E,multiEntry:I,extractKey:lp(_)};return w[xs(_)]=N,N}),getIndexByKeyPath:v=>w[xs(v)]};return w[":id"]=b.primaryKey,y!=null&&(w[xs(y)]=b.primaryKey),b})},hasGetAll:h.length>0&&"getAll"in d.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:d,upper:h,lowerOpen:p,upperOpen:y}=l;return d===void 0?h===void 0?null:t.upperBound(h,!!y):h===void 0?t.lowerBound(d,!!p):t.bound(d,h,!!p,!!y)}function i(l){let d=l.name;function h({trans:f,type:m,keys:g,values:w,range:b}){return new Promise((v,D)=>{v=me(v);let E=f.objectStore(d),I=E.keyPath==null,_=m==="put"||m==="add";if(!_&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);let{length:B}=g||w||{length:1};if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let N,S=[],G=[],L=0,M=C=>{++L,Ss(C)};if(m==="deleteRange"){if(b.type===4)return v({numFailures:L,failures:G,results:[],lastResult:void 0});b.type===3?S.push(N=E.clear()):S.push(N=E.delete(o(b)))}else{let[C,k]=_?I?[w,g]:[w,null]:[g,null];if(_)for(let P=0;P<B;++P)S.push(N=k&&k[P]!==void 0?E[m](C[P],k[P]):E[m](C[P])),N.onerror=M;else for(let P=0;P<B;++P)S.push(N=E[m](C[P])),N.onerror=M}let x=C=>{let k=C.target.result;S.forEach((P,U)=>P.error!=null&&(G[U]=P.error)),v({numFailures:L,failures:G,results:m==="delete"?g:S.map(P=>P.result),lastResult:k})};N.onerror=C=>{M(C),x(C)},N.onsuccess=x})}function p({trans:f,values:m,query:g,reverse:w,unique:b}){return new Promise((v,D)=>{v=me(v);let{index:E,range:I}=g,_=f.objectStore(d),B=E.isPrimaryKey?_:_.index(E.name),N=w?b?"prevunique":"prev":b?"nextunique":"next",S=m||!("openKeyCursor"in B)?B.openCursor(o(I),N):B.openKeyCursor(o(I),N);S.onerror=an(D),S.onsuccess=me(G=>{let L=S.result;if(!L){v(null);return}L.___id=++y1,L.done=!1;let M=L.continue.bind(L),x=L.continuePrimaryKey;x&&(x=x.bind(L));let C=L.advance.bind(L),k=()=>{throw new Error("Cursor not started")},P=()=>{throw new Error("Cursor not stopped")};L.trans=f,L.stop=L.continue=L.continuePrimaryKey=L.advance=k,L.fail=me(D),L.next=function(){let U=1;return this.start(()=>U--?this.continue():this.stop()).then(()=>this)},L.start=U=>{let J=new Promise((oe,ye)=>{oe=me(oe),S.onerror=an(ye),L.fail=ye,L.stop=ve=>{L.stop=L.continue=L.continuePrimaryKey=L.advance=P,oe(ve)}}),ee=()=>{if(S.result)try{U()}catch(oe){L.fail(oe)}else L.done=!0,L.start=()=>{throw new Error("Cursor behind last entry")},L.stop()};return S.onsuccess=me(oe=>{S.onsuccess=ee,ee()}),L.continue=M,L.continuePrimaryKey=x,L.advance=C,ee(),J},v(L)},D)})}function y(f){return m=>new Promise((g,w)=>{g=me(g);let{trans:b,values:v,limit:D,query:E}=m,I=D===1/0?void 0:D,{index:_,range:B}=E,N=b.objectStore(d),S=_.isPrimaryKey?N:N.index(_.name),G=o(B);if(D===0)return g({result:[]});if(f){let L=v?S.getAll(G,I):S.getAllKeys(G,I);L.onsuccess=M=>g({result:M.target.result}),L.onerror=an(w)}else{let L=0,M=v||!("openKeyCursor"in S)?S.openCursor(G):S.openKeyCursor(G),x=[];M.onsuccess=C=>{let k=M.result;if(!k)return g({result:x});if(x.push(v?k.value:k.primaryKey),++L===D)return g({result:x});k.continue()},M.onerror=an(w)}})}return{name:d,schema:l,mutate:h,getMany({trans:f,keys:m}){return new Promise((g,w)=>{g=me(g);let b=f.objectStore(d),v=m.length,D=new Array(v),E=0,I=0,_,B=S=>{let G=S.target;(D[G._pos]=G.result)!=null,++I===E&&g(D)},N=an(w);for(let S=0;S<v;++S)m[S]!=null&&(_=b.get(m[S]),_._pos=S,_.onsuccess=B,_.onerror=N,++E);E===0&&g(D)})},get({trans:f,key:m}){return new Promise((g,w)=>{g=me(g);let v=f.objectStore(d).get(m);v.onsuccess=D=>g(D.target.result),v.onerror=an(w)})},query:y(a),openCursor:p,count({query:f,trans:m}){let{index:g,range:w}=f;return new Promise((b,v)=>{let D=m.objectStore(d),E=g.isPrimaryKey?D:D.index(g.name),I=o(w),_=I?E.count(I):E.count();_.onsuccess=me(B=>b(B.target.result)),_.onerror=an(v)})}}}let{schema:s,hasGetAll:a}=r(e,n),c=s.tables.map(l=>i(l)),u={};return c.forEach(l=>u[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!u[l])throw new Error(`Table '${l}' not found`);return u[l]},MIN_KEY:-1/0,MAX_KEY:As(t),schema:s}}function v1(e,t){return t.reduce((n,{create:r})=>T(T({},n),r(n)),e)}function b1(e,t,{IDBKeyRange:n,indexedDB:r},o){return{dbcore:v1(w1(t,n,o),e.dbcore)}}function Tp({_novip:e},t){let n=t.db,r=b1(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(o=>{let i=o.name;e.core.schema.tables.some(s=>s.name===i)&&(o.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=o.core))})}function Cu({_novip:e},t,n,r){n.forEach(o=>{let i=r[o];t.forEach(s=>{let a=bp(s,o);(!a||"value"in a&&a.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Rn(s,o,{get(){return this.table(o)},set(c){Lb(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new e.Table(o,i))})})}function dp({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function E1(e,t){return e._cfg.version-t._cfg.version}function D1(e,t,n,r){let o=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,o);i.create(n),i._completion.catch(r);let s=i._reject.bind(i),a=j.transless||j;yr(()=>{j.trans=i,j.transless=a,t===0?(Se(o).forEach(c=>{Ap(n,c,o[c].primKey,o[c].indexes)}),Tp(e,n),F.follow(()=>e.on.populate.fire(i)).catch(s)):x1(e,t,i,n).catch(s)})}function x1({_novip:e},t,n,r){let o=[],i=e._versions,s=e._dbSchema=Mp(e,e.idbdb,r),a=!1;i.filter(l=>l._cfg.version>=t).forEach(l=>{o.push(()=>{let d=s,h=l._cfg.dbschema;hp(e,d,r),hp(e,h,r),s=e._dbSchema=h;let p=cE(d,h);p.add.forEach(f=>{Ap(r,f[0],f[1].primKey,f[1].indexes)}),p.change.forEach(f=>{if(f.recreate)throw new $.Upgrade("Not yet support for changing primary key");{let m=r.objectStore(f.name);f.add.forEach(g=>fp(m,g)),f.change.forEach(g=>{m.deleteIndex(g.name),fp(m,g)}),f.del.forEach(g=>m.deleteIndex(g))}});let y=l._cfg.contentUpgrade;if(y&&l._cfg.version>t){Tp(e,r),n._memoizedTables={},a=!0;let f=jb(h);p.del.forEach(b=>{f[b]=d[b]}),dp(e,[e.Transaction.prototype]),Cu(e,[e.Transaction.prototype],Se(f),f),n.schema=f;let m=Ep(y);m&&hi();let g,w=F.follow(()=>{if(g=y(n),g&&m){var b=On.bind(null,null);g.then(b,b)}});return g&&typeof g.then=="function"?F.resolve(g):w.then(()=>g)}}),o.push(d=>{if(!a||!t1){let h=l._cfg.dbschema;_1(h,d)}dp(e,[e.Transaction.prototype]),Cu(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function u(){return o.length?F.resolve(o.shift()(n.idbtrans)).then(u):F.resolve()}return u().then(()=>{I1(s,r)})}function cE(e,t){let n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){let o=e[r],i=t[r];if(!o)n.add.push([r,i]);else{let s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!Nu)s.recreate=!0,n.change.push(s);else{let a=o.idxByName,c=i.idxByName,u;for(u in a)c[u]||s.del.push(u);for(u in c){let l=a[u],d=c[u];l?l.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function Ap(e,t,n,r){let o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>fp(o,i)),o}function I1(e,t){Se(e).forEach(n=>{t.db.objectStoreNames.contains(n)||Ap(t,n,e[n].primKey,e[n].indexes)})}function _1(e,t){[].slice.call(t.db.objectStoreNames).forEach(n=>e[n]==null&&t.db.deleteObjectStore(n))}function fp(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Mp(e,t,n){let r={};return Au(t.objectStoreNames,0).forEach(i=>{let s=n.objectStore(i),a=s.keyPath,c=up(sE(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),u=[];for(let d=0;d<s.indexNames.length;++d){let h=s.index(s.indexNames[d]);a=h.keyPath;var l=up(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);u.push(l)}r[i]=aE(i,c,u)}),r}function C1({_novip:e},t,n){e.verno=t.version/10;let r=e._dbSchema=Mp(e,t,n);e._storeNames=Au(t.objectStoreNames,0),Cu(e,[e._allTables],Se(r),r)}function S1(e,t){let n=Mp(e,e.idbdb,t),r=cE(n,e._dbSchema);return!(r.add.length||r.change.some(o=>o.add.length||o.change.length))}function hp({_novip:e},t,n){let r=n.db.objectStoreNames;for(let o=0;o<r.length;++o){let i=r[o],s=n.objectStore(i);e._hasGetAll="getAll"in s;for(let a=0;a<s.indexNames.length;++a){let c=s.indexNames[a],u=s.index(c).keyPath,l=typeof u=="string"?u:"["+Au(u).join("+")+"]";if(t[i]){let d=t[i].idxByName[l];d&&(d.name=c,delete t[i].idxByName[l],t[i].idxByName[c]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&pe.WorkerGlobalScope&&pe instanceof pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function T1(e){return e.split(",").map((t,n)=>{t=t.trim();let r=t.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return up(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Qe(o),n===0)})}var pp=class{_parseStoresSpec(t,n){Se(t).forEach(r=>{if(t[r]!==null){var o=T1(t[r]),i=o.shift();if(i.multi)throw new $.Schema("Primary key cannot be multi-valued");o.forEach(s=>{if(s.auto)throw new $.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new $.Schema("Index must have a name and cannot be an empty string")}),n[r]=aE(r,i,o)}})}stores(t){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?rt(this._cfg.storesSource,t):t;let r=n._versions,o={},i={};return r.forEach(s=>{rt(o,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(o,i)}),n._dbSchema=i,dp(n,[n._allTables,n,n.Transaction.prototype]),Cu(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Se(i),i),n._storeNames=Se(i),this}upgrade(t){return this._cfg.contentUpgrade=Ip(this._cfg.contentUpgrade||le,t),this}};function A1(e){return Ls(pp.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Np(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new li(ku,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function kp(e){return e&&typeof e.databases=="function"}function M1({indexedDB:e,IDBKeyRange:t}){return kp(e)?Promise.resolve(e.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==ku)):Np(e,t).toCollection().primaryKeys()}function N1({indexedDB:e,IDBKeyRange:t},n){!kp(e)&&n!==ku&&Np(e,t).put({name:n}).catch(le)}function k1({indexedDB:e,IDBKeyRange:t},n){!kp(e)&&n!==ku&&Np(e,t).delete(n).catch(le)}function gp(e){return yr(function(){return j.letThrough=!0,e()})}function R1(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function O1(e){let t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Pe(t.dbOpenError):e);cn&&(t.openCanceller._stackHolder=ao()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;let r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new $.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,s=null,a=!1,c=()=>new F((u,l)=>{if(o(),!n)throw new $.MissingAPI;let d=e.name,h=t.autoSchema?n.open(d):n.open(d,Math.round(e.verno*10));if(!h)throw new $.MissingAPI;h.onerror=an(l),h.onblocked=me(e._fireOnBlocked),h.onupgradeneeded=me(p=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Ss,s.abort(),h.result.close();let f=n.deleteDatabase(d);f.onsuccess=f.onerror=me(()=>{l(new $.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=an(l);var y=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;a=y<1,e._novip.idbdb=h.result,D1(e,y/10,s,l)}},l),h.onsuccess=me(()=>{s=null;let p=e._novip.idbdb=h.result,y=Au(p.objectStoreNames);if(y.length>0)try{let f=p.transaction(g1(y),"readonly");t.autoSchema?C1(e,p,f):(hp(e,e._dbSchema,f),S1(e,f)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Tp(e,f)}catch{}Ds.push(e),p.onversionchange=me(f=>{t.vcFired=!0,e.on("versionchange").fire(f)}),p.onclose=me(f=>{e.on("close").fire(f)}),a&&N1(e._deps,d),u()},l)}).catch(u=>u&&u.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):F.reject(u));return F.race([r,(typeof navigator>"u"?F.resolve():R1()).then(c)]).then(()=>(o(),t.onReadyBeingFired=[],F.resolve(gp(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let l=t.onReadyBeingFired.reduce(Ip,le);return t.onReadyBeingFired=[],F.resolve(gp(()=>l(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Pe(u)}).finally(()=>{t.openComplete=!0,i()})}function mp(e){var t=s=>e.next(s),n=s=>e.throw(s),r=i(t),o=i(n);function i(s){return a=>{var c=s(a),u=c.value;return c.done?u:!u||typeof u.then!="function"?Qe(u)?Promise.all(u).then(r,o):r(u):u.then(r,o)}}return i(t)()}function P1(e,t,n){var r=arguments.length;if(r<2)throw new $.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var i=Ub(o);return[e,i,n]}function uE(e,t,n,r,o){return F.resolve().then(()=>{let i=j.transless||j,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:i};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(d){return d.name===xp.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>uE(e,t,n,null,o))):Pe(d)}let c=Ep(o);c&&hi();let u,l=F.follow(()=>{if(u=o.call(s,s),u)if(c){var d=On.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=mp(u))},a);return(u&&typeof u.then=="function"?F.resolve(u).then(d=>s.active?d:Pe(new $.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):l.then(()=>u)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Pe(d)))})}function fu(e,t,n){let r=Qe(e)?e.slice():[e];for(let o=0;o<n;++o)r.push(t);return r}function L1(e){return V(T({},e),{table(t){let n=e.table(t),{schema:r}=n,o={},i=[];function s(h,p,y){let f=xs(h),m=o[f]=o[f]||[],g=h==null?0:typeof h=="string"?1:h.length,w=p>0,b=V(T({},y),{isVirtual:w,keyTail:p,keyLength:g,extractKey:lp(h),unique:!w&&y.unique});if(m.push(b),b.isPrimaryKey||i.push(b),g>1){let v=g===2?h[0]:h.slice(0,g-1);s(v,p+1,y)}return m.sort((v,D)=>v.keyTail-D.keyTail),b}let a=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[a];for(let h of r.indexes)s(h.keyPath,0,h);function c(h){let p=o[xs(h)];return p&&p[0]}function u(h,p){return{type:h.type===1?2:h.type,lower:fu(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:fu(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0}}function l(h){let p=h.query.index;return p.isVirtual?V(T({},h),{query:{index:p,range:u(h.query.range,p.keyTail)}}):h}return V(T({},n),{schema:V(T({},r),{primaryKey:a,indexes:i,getIndexByKeyPath:c}),count(h){return n.count(l(h))},query(h){return n.query(l(h))},openCursor(h){let{keyTail:p,isVirtual:y,keyLength:f}=h.query.index;if(!y)return n.openCursor(h);function m(g){function w(v){v!=null?g.continue(fu(v,h.reverse?e.MAX_KEY:e.MIN_KEY,p)):h.unique?g.continue(g.key.slice(0,f).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,p)):g.continue()}return Object.create(g,{continue:{value:w},continuePrimaryKey:{value(v,D){g.continuePrimaryKey(fu(v,e.MAX_KEY,p),D)}},primaryKey:{get(){return g.primaryKey}},key:{get(){let v=g.key;return f===1?v[0]:v.slice(0,f)}},value:{get(){return g.value}}})}return n.openCursor(l(h)).then(g=>g&&m(g))}})}})}var F1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:L1};function Rp(e,t,n,r){return n=n||{},r=r||"",Se(e).forEach(o=>{if(!Ct(t,o))n[r+o]=void 0;else{var i=e[o],s=t[o];if(typeof i=="object"&&typeof s=="object"&&i&&s){let a=qh(i),c=qh(s);a!==c?n[r+o]=t[o]:a==="Object"?Rp(i,s,n,r+o+"."):i!==s&&(n[r+o]=t[o])}else i!==s&&(n[r+o]=t[o])}}),Se(t).forEach(o=>{Ct(e,o)||(n[r+o]=t[o])}),n}function B1(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var V1={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>V(T({},e),{table(t){let n=e.table(t),{primaryKey:r}=n.schema;return V(T({},n),{mutate(i){let s=j.trans,{deleting:a,creating:c,updating:u}=s.table(t).hook;switch(i.type){case"add":if(c.fire===le)break;return s._promise("readwrite",()=>l(i),!0);case"put":if(c.fire===le&&u.fire===le)break;return s._promise("readwrite",()=>l(i),!0);case"delete":if(a.fire===le)break;return s._promise("readwrite",()=>l(i),!0);case"deleteRange":if(a.fire===le)break;return s._promise("readwrite",()=>d(i),!0)}return n.mutate(i);function l(p){let y=j.trans,f=p.keys||B1(r,p);if(!f)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?V(T({},p),{keys:f}):T({},p),p.type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),j1(n,p,f).then(m=>{let g=f.map((w,b)=>{let v=m[b],D={onerror:null,onsuccess:null};if(p.type==="delete")a.fire.call(D,w,v,y);else if(p.type==="add"||v===void 0){let E=c.fire.call(D,w,p.values[b],y);w==null&&E!=null&&(w=E,p.keys[b]=w,r.outbound||Yt(p.values[b],r.keyPath,w))}else{let E=Rp(v,p.values[b]),I=u.fire.call(D,E,w,v,y);if(I){let _=p.values[b];Object.keys(I).forEach(B=>{Ct(_,B)?_[B]=I[B]:Yt(_,B,I[B])})}}return D});return n.mutate(p).then(({failures:w,results:b,numFailures:v,lastResult:D})=>{for(let E=0;E<f.length;++E){let I=b?b[E]:f[E],_=g[E];I==null?_.onerror&&_.onerror(w[E]):_.onsuccess&&_.onsuccess(p.type==="put"&&m[E]?p.values[E]:I)}return{failures:w,results:b,numFailures:v,lastResult:D}}).catch(w=>(g.forEach(b=>b.onerror&&b.onerror(w)),Promise.reject(w)))})}function d(p){return h(p.trans,p.range,1e4)}function h(p,y,f){return n.query({trans:p,values:!1,query:{index:r,range:y},limit:f}).then(({result:m})=>l({type:"delete",keys:m,trans:p}).then(g=>g.numFailures>0?Promise.reject(g.failures[0]):m.length<f?{failures:[],numFailures:0,lastResult:void 0}:h(p,V(T({},y),{lower:m[m.length-1],lowerOpen:!0}),f)))}}})}})};function j1(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function lE(e,t,n){try{if(!t||t.keys.length<e.length)return null;let r=[];for(let o=0,i=0;o<t.keys.length&&i<e.length;++o)nt(t.keys[o],e[i])===0&&(r.push(n?Ns(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch{return null}}var U1={stack:"dbcore",level:-1,create:e=>({table:t=>{let n=e.table(t);return V(T({},n),{getMany:r=>{if(!r.cache)return n.getMany(r);let o=lE(r.keys,r.trans._cache,r.cache==="clone");return o?F.resolve(o):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ns(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))})}})};function Op(e){return!("from"in e)}var An=function(e,t){if(this)rt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{let n=new An;return e&&"d"in e&&rt(n,e),n}};ui(An.prototype,{add(e){return Su(this,e),this},addKey(e){return Ms(this,e,e),this},addKeys(e){return e.forEach(t=>Ms(this,t,t)),this},[Kh](){return yp(this)}});function Ms(e,t,n){let r=nt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Op(e))return rt(e,{from:t,to:n,d:1});let o=e.l,i=e.r;if(nt(n,e.from)<0)return o?Ms(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ob(e);if(nt(t,e.to)>0)return i?Ms(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ob(e);nt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),nt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);let s=!e.r;o&&!e.l&&Su(e,o),i&&s&&Su(e,i)}function Su(e,t){function n(r,{from:o,to:i,l:s,r:a}){Ms(r,o,i),s&&n(r,s),a&&n(r,a)}Op(t)||n(e,t)}function $1(e,t){let n=yp(t),r=n.next();if(r.done)return!1;let o=r.value,i=yp(e),s=i.next(o.from),a=s.value;for(;!r.done&&!s.done;){if(nt(a.from,o.to)<=0&&nt(a.to,o.from)>=0)return!0;nt(o.from,a.from)<0?o=(r=n.next(a.from)).value:a=(s=i.next(o.from)).value}return!1}function yp(e){let t=Op(e)?null:{s:0,n:e};return{next(n){let r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&nt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||nt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ob(e){var t,n;let r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){let i=o==="r"?"l":"r",s=T({},e),a=e[o];e.from=a.from,e.to=a.to,e[o]=a[o],s[o]=a[i],e[i]=s,s.d=Pb(s)}e.d=Pb(e)}function Pb({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var H1={stack:"dbcore",level:0,create:e=>{let t=e.schema.name,n=new An(e.MIN_KEY,e.MAX_KEY);return V(T({},e),{table:r=>{let o=e.table(r),{schema:i}=o,{primaryKey:s}=i,{extractKey:a,outbound:c}=s,u=V(T({},o),{mutate:h=>{let p=h.trans,y=p.mutatedParts||(p.mutatedParts={}),f=E=>{let I=`idb://${t}/${r}/${E}`;return y[I]||(y[I]=new An)},m=f(""),g=f(":dels"),{type:w}=h,[b,v]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],D=h.trans._cache;return o.mutate(h).then(E=>{if(Qe(b)){w!=="delete"&&(b=E.results),m.addKeys(b);let I=lE(b,D);!I&&w!=="add"&&g.addKeys(b),(I||v)&&G1(f,i,I,v)}else if(b){let I={from:b.lower,to:b.upper};g.add(I),m.add(I)}else m.add(n),g.add(n),i.indexes.forEach(I=>f(I.name).add(n));return E})}}),l=({query:{index:h,range:p}})=>{var y,f;return[h,new An((y=p.lower)!==null&&y!==void 0?y:e.MIN_KEY,(f=p.upper)!==null&&f!==void 0?f:e.MAX_KEY)]},d={get:h=>[s,new An(h.key)],getMany:h=>[s,new An().addKeys(h.keys)],count:l,query:l,openCursor:l};return Se(d).forEach(h=>{u[h]=function(p){let{subscr:y}=j;if(y){let f=v=>{let D=`idb://${t}/${r}/${v}`;return y[D]||(y[D]=new An)},m=f(""),g=f(":dels"),[w,b]=d[h](p);if(f(w.name||"").add(b),!w.isPrimaryKey)if(h==="count")g.add(n);else{let v=h==="query"&&c&&p.values&&o.query(V(T({},p),{values:!1}));return o[h].apply(this,arguments).then(D=>{if(h==="query"){if(c&&p.values)return v.then(({result:I})=>(m.addKeys(I),D));let E=p.values?D.result.map(a):D.result;p.values?m.addKeys(E):g.addKeys(E)}else if(h==="openCursor"){let E=D,I=p.values;return E&&Object.create(E,{key:{get(){return g.addKey(E.primaryKey),E.key}},primaryKey:{get(){let _=E.primaryKey;return g.addKey(_),_}},value:{get(){return I&&m.addKey(E.primaryKey),E.value}}})}return D})}}return o[h].apply(this,arguments)}}),u}})}};function G1(e,t,n,r){function o(i){let s=e(i.name||"");function a(u){return u!=null?i.extractKey(u):null}let c=u=>i.multiEntry&&Qe(u)?u.forEach(l=>s.addKey(l)):s.addKey(u);(n||r).forEach((u,l)=>{let d=n&&a(n[l]),h=r&&a(r[l]);nt(d,h)!==0&&(d!=null&&c(d),h!=null&&c(h))})}t.indexes.forEach(o)}var li=class e{constructor(t,n){this._middlewares={},this.verno=0;let r=e.dependencies;this._options=n=T({addons:e.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:o}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:le,dbReadyPromise:null,cancelOpen:le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};i.dbReadyPromise=new F(s=>{i.dbReadyResolve=s}),i.openCanceller=new F((s,a)=>{i.cancelOpen=a}),this._state=i,this.name=t,this.on=Ps(this,"populate","blocked","versionchange","close",{ready:[Ip,le]}),this.on.ready.subscribe=Fb(this.on.ready.subscribe,s=>(a,c)=>{e.vip(()=>{let u=this._state;if(u.openComplete)u.dbOpenError||F.resolve().then(a),c&&s(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&s(a);else{s(a);let l=this;c||s(function d(){l.on.ready.unsubscribe(a),l.on.ready.unsubscribe(d)})}})}),this.Collection=a1(this),this.Table=r1(this),this.Transaction=p1(this),this.Version=A1(this),this.WhereClause=h1(this),this.on("versionchange",s=>{s.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",s=>{!s.newVersion||s.newVersion<s.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${s.oldVersion/10}`)}),this._maxKey=As(n.IDBKeyRange),this._createTransaction=(s,a,c,u)=>new this.Transaction(s,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=s=>{this.on("blocked").fire(s),Ds.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(s))},this.use(F1),this.use(V1),this.use(H1),this.use(U1),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(s=>s(this))}version(t){if(isNaN(t)||t<.1)throw new $.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new $.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);let n=this._versions;var r=n.filter(o=>o._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(E1),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||j.letThrough||this._vip)?t():new F((n,r)=>{if(this._state.openComplete)return r(new $.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new $.DatabaseClosed);return}this.open().catch(le)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:o}){o&&this.unuse({stack:t,name:o});let i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:r??10,name:o}),i.sort((s,a)=>s.level-a.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(o=>r?o.create!==r:n?o.name!==n:!1)),this}open(){return O1(this)}_close(){let t=this._state,n=Ds.indexOf(this);if(n>=0&&Ds.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new F(r=>{t.dbReadyResolve=r}),t.openCanceller=new F((r,o)=>{t.cancelOpen=o})}close(){this._close();let t=this._state;this._options.autoOpen=!1,t.dbOpenError=new $.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){let t=arguments.length>0,n=this._state;return new F((r,o)=>{let i=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=me(()=>{k1(this._deps,this.name),r()}),s.onerror=an(o),s.onblocked=this._fireOnBlocked};if(t)throw new $.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Se(this._allTables).map(t=>this._allTables[t])}transaction(){let t=P1.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let o=j.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);let i=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");let s,a;try{if(a=n.map(u=>{var l=u instanceof this.Table?u.name:u;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===Uh)s=Uh;else if(t=="rw"||t==$h)s=$h;else throw new $.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===Uh&&s===$h)if(i)o=null;else throw new $.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&a.forEach(u=>{if(o&&o.storeNames.indexOf(u)===-1)if(i)o=null;else throw new $.SubTransaction("Table "+u+" not included in parent transaction.")}),i&&o&&!o.active&&(o=null)}}catch(u){return o?o._promise(null,(l,d)=>{d(u)}):Pe(u)}let c=uE.bind(null,this,s,a,o,r);return o?o._promise(s,c,"lock"):j.trans?pi(j.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!Ct(this._allTables,t))throw new $.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}},W1=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wp=class{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)}[W1](){return this}};function dE(e,t){return Se(t).forEach(n=>{let r=e[n]||(e[n]=new An);Su(r,t[n])}),e}function z1(e){let t=!1,n,r=new wp(o=>{let i=Ep(e);function s(m){i&&hi();let g=()=>yr(e,{subscr:m,trans:null}),w=j.trans?pi(j.transless,g):g();return i&&w.then(On,On),w}let a=!1,c={},u={},l={get closed(){return a},unsubscribe:()=>{a=!0,vr.storagemutated.unsubscribe(y)}};o.start&&o.start(l);let d=!1,h=!1;function p(){return Se(u).some(m=>c[m]&&$1(c[m],u[m]))}let y=m=>{dE(c,m),p()&&f()},f=()=>{if(d||a)return;c={};let m={},g=s(m);h||(vr(Ts,y),h=!0),d=!0,Promise.resolve(g).then(w=>{t=!0,n=w,d=!1,!a&&(p()?f():(c={},u=m,o.next&&o.next(w)))},w=>{d=!1,t=!1,o.error&&o.error(w),l.unsubscribe()})};return f(),l});return r.hasValue=()=>t,r.getValue=()=>n,r}var vp;try{vp={indexedDB:pe.indexedDB||pe.mozIndexedDB||pe.webkitIndexedDB||pe.msIndexedDB,IDBKeyRange:pe.IDBKeyRange||pe.webkitIDBKeyRange}}catch{vp={indexedDB:null,IDBKeyRange:null}}var to=li;ui(to,V(T({},Mu),{delete(e){return new to(e,{addons:[]}).delete()},exists(e){return new to(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(e){try{return M1(to.dependencies).then(e)}catch{return Pe(new $.MissingAPI)}},defineClass(){function e(t){rt(this,t)}return e},ignoreTransaction(e){return j.trans?pi(j.transless,e):e()},vip:gp,async:function(e){return function(){try{var t=mp(e.apply(this,arguments));return!t||typeof t.then!="function"?F.resolve(t):t}catch(n){return Pe(n)}}},spawn:function(e,t,n){try{var r=mp(e.apply(n,t||[]));return!r||typeof r.then!="function"?F.resolve(r):r}catch(o){return Pe(o)}},currentTransaction:{get:()=>j.trans||null},waitFor:function(e,t){let n=F.resolve(typeof e=="function"?to.ignoreTransaction(e):e).timeout(t||6e4);return j.trans?j.trans.waitFor(n):n},Promise:F,debug:{get:()=>cn,set:e=>{Hb(e,e==="dexie"?()=>!0:rE)}},derive:di,extend:rt,props:ui,override:Fb,Events:Ps,on:vr,liveQuery:z1,extendObservabilitySet:dE,getByKeyPath:kn,setByKeyPath:Yt,delByKeyPath:AM,shallowClone:jb,deepClone:Ns,getObjectDiff:Rp,cmp:nt,asap:Bb,minKey:ip,addons:[],connections:Ds,errnames:xp,dependencies:vp,semVer:Tb,version:Tb.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,n*2))}));to.maxKey=As(to.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vr(Ts,e=>{if(!Nn){let t;Nu?(t=document.createEvent("CustomEvent"),t.initCustomEvent(mr,!0,!0,e)):t=new CustomEvent(mr,{detail:e}),Nn=!0,dispatchEvent(t),Nn=!1}}),addEventListener(mr,({detail:e})=>{Nn||Tu(e)}));function Tu(e){let t=Nn;try{Nn=!0,vr.storagemutated.fire(e)}finally{Nn=t}}var Nn=!1;if(typeof BroadcastChannel<"u"){let e=new BroadcastChannel(mr);typeof e.unref=="function"&&e.unref(),vr(Ts,t=>{Nn||e.postMessage(t)}),e.onmessage=t=>{t.data&&Tu(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){vr(Ts,t=>{try{Nn||(typeof localStorage<"u"&&localStorage.setItem(mr,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:mr,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===mr){let n=JSON.parse(t.newValue);n&&Tu(n.changedParts)}});let e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",q1)}function q1({data:e}){e&&e.type===mr&&Tu(e.changedParts)}F.rejectionMapper=BM;Hb(cn,rE);var Ru=class extends li{constructor(){super("wasmLlamaCpp"),this.version(1).stores({ggufModel:"id"})}};var fE=(()=>{let t=class t{constructor(r){this.http=r,this.db=new Ru}haveModel(r){return ae(this,null,function*(){return(yield this.db.ggufModel.where("id").equals(r).count())>0})}getModel(r,o){return ae(this,null,function*(){let i=yield this.db.ggufModel.get(r);if(!i&&o){let s=yield this.downloadModel(o);i={id:r,bytes:s,size:s.byteLength},yield this.db.ggufModel.add(i)}return i})}downloadAndStoreModel(r,o){return ae(this,null,function*(){let i=yield this.downloadModel(o),s={id:r,bytes:i,size:i.byteLength};yield this.db.ggufModel.add(s)})}downloadModel(r){return ae(this,null,function*(){return Xu(this.http.get(r,{responseType:"arraybuffer"}))})}destroyModel(r){return ae(this,null,function*(){yield this.db.ggufModel.where({id:r}).delete()})}};t.\u0275fac=function(o){return new(o||t)(q(cf))},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Y1(e,t){if(e&1){let n=Oo();R(0,"button",46),vt("click",function(){Wn(n);let o=yn();return zn(o.downloadLLM())}),A(1," Download LLM "),O()}if(e&2){let n=yn();We("busy",n.busy.downloadLLM)}}function Z1(e,t){if(e&1){let n=Oo();R(0,"button",47),vt("click",function(){Wn(n);let o=yn();return zn(o.predict())}),A(1," Predict Private Key "),O()}if(e&2){let n=yn();We("busy",n.busy.predict)}}function Q1(e,t){if(e&1){let n=Oo();R(0,"button",23),vt("click",function(){Wn(n);let o=yn();return zn(o.closeLlama())}),A(1," Close Llama.cpp "),O()}if(e&2){let n=yn();We("busy",n.busy.close)}}function X1(e,t){if(e&1){let n=Oo();R(0,"button",48),vt("click",function(){Wn(n);let o=yn();return zn(o.deleteLLM())}),A(1," Delete LLM "),O()}if(e&2){let n=yn();We("busy",n.busy.deleteLLM)}}var hE=(()=>{let t=class t{constructor(r){this.modelService=r,this.inferencing=!1,this.numSamples=2,this.numThreads=navigator.hardwareConcurrency,this.bitcoinAddress=Xc(),this.modelId="h2o-danube3-500m-base-Q4_K_M-GGUF",this.modelUrl="https://huggingface.co/lobkov/h2o-danube3-500m-base-Q4_K_M-GGUF/resolve/main/h2o-danube3-500m-base-q4_k_m.gguf?download=true",this.haveLLM=!1,this.wasm=new au("wasmLlamaCpp"),this.llama=new uc(this.wasm),this.busy={downloadLLM:!1,deleteLLM:!1,genAddress:!1,predict:!1,close:!1}}ngOnInit(){return ae(this,null,function*(){})}ngAfterViewInit(){return ae(this,null,function*(){this.haveLLM=yield this.modelService.haveModel(this.modelId),setTimeout(()=>{this.haveLLM&&this.messageLog.log({text:"LLM is stored in the browser using IndexedDB.",type:"INFO"}),this.genAddress()}),yield this.wasm.init()})}ngOnDestroy(){this.llama.destroy()}downloadLLM(){return ae(this,null,function*(){this.busy.downloadLLM=!0;let r=this.messageLog.log({text:"Downloading LLM... ",type:"INFO",pending:!0});try{yield this.modelService.downloadAndStoreModel(this.modelId,this.modelUrl),this.haveLLM=!0,this.messageLog.log({text:"LLM is stored in the browser using IndexedDB.",type:"INFO"}),r.text+="Done.",r.pending=!1}catch(o){this.messageLog.log({text:`Could not download model. ${o.statusText}`,type:"ERROR"}),r.pending=!1}this.busy.downloadLLM=!1})}deleteLLM(){return ae(this,null,function*(){this.busy.deleteLLM=!0,yield this.modelService.destroyModel(this.modelId),this.haveLLM=!1,this.messageLog.log({text:"Deleted LLM from the browser IndexedDB store.",type:"INFO"}),this.busy.deleteLLM=!1})}genAddress(){this.busy.genAddress=!0,this.bitcoinAddress=Xc(),this.messageLog.log({text:"Generated random Bitcoin address.",type:"INFO"}),this.busy.genAddress=!1}setInputAddress(r){let o=Z0(r);this.bitcoinAddress.address=r,this.bitcoinAddress.privateKey=new Uint8Array,this.bitcoinAddress.privateKeyBase58="",o?(this.bitcoinAddress.format=o,this.messageLog.log({text:"Set new Bitcoin address.",type:"INFO"})):(this.bitcoinAddress.format=void 0,this.messageLog.log({text:"Invalid address format.",type:"ERROR"}))}predict(){return ae(this,null,function*(){if(this.busy.predict=!0,!this.llama.cpp){let r=navigator.hardwareConcurrency,o=this.messageLog.log({text:`Initialising Llama.cpp (using ${r} threads)... `,type:"INFO",pending:!0});yield this.llama.init(r,this.messageLog),o.text+="Done.",o.pending=!1}if(!this.model){let r=this.messageLog.log({text:"Retrieving LLM from IndexedDB... ",type:"INFO",pending:!0});if(this.model=yield this.modelService.getModel(this.modelId),!this.model)this.messageLog.log({text:"Could not retrieve LLM from IndexedDB.",type:"ERROR"});else{r.text+="Done.",r.pending=!1;let o=this.messageLog.log({text:"Loading LLM... ",type:"INFO",pending:!0});yield this.llama.loadModel(this.model),this.model.bytes=new Uint8Array,o.text+="Done.",o.pending=!1}}this.model&&(yield this.inference()),this.busy.predict=!1})}closeLlama(){return ae(this,null,function*(){if(!this.llama.cpp)return;this.busy.close=!0;let r=this.messageLog.log({text:"Freeing memory reserved for Llama.cpp ... ",type:"INFO",pending:!0});yield this.llama.destroy(this.model),this.model=void 0,r.text+="Done.",r.pending=!1,this.busy.close=!1})}inference(){return ae(this,null,function*(){let r=this.buildPrompt(this.bitcoinAddress);this.messageLog.log({text:`Prompt: 
${r}`,type:"WARN"});let o=yield this.llama.predict(r),i=!1;this.bitcoinAddress.privateKeyBase58===""?(this.bitcoinAddress.privateKeyBase58=o,i=Q0(this.bitcoinAddress)):o===this.bitcoinAddress.privateKeyBase58&&(i=!0),i?this.messageLog.log({text:"Private key matches the address! \u{1F601}",type:"SUCCESS"}):this.messageLog.log({text:"Private key does not match the address \u{1F61E}",type:"ERROR"})})}destroyModel(){this.model&&this.modelService.destroyModel(this.model.id)}buildPrompt(r){let o="";for(let i=0;i<this.numSamples;i++){let s=Xc();o+=s.address+" "+s.privateKeyBase58+`
`}return o+=r.address+" ",o}};t.\u0275fac=function(o){return new(o||t)(ne(fE))},t.\u0275cmp=Va({type:t,selectors:[["app-root"]],viewQuery:function(o,i){if(o&1&&gw(Vh,5),o&2){let s;mw(s=yw())&&(i.messageLog=s.first)}},standalone:!0,features:[Qa],decls:166,vars:7,consts:[["messageLog",""],[1,"min-h-screen","dark:bg-neutral-900"],[1,"fixed","inset-x-0","bottom-0","bg-neutral-800","sm:relative","z-10"],[1,"mx-auto","justify-between","p-3","sm:flex","sm:max-w-4xl","sm:p-4"],["href","https://wow-l.uk/",1,"flex","no-underline","items-center"],["src","https://avatars.githubusercontent.com/u/7288833?v=4",1,"inline-block","w-8","object-cover","rounded-full","mr-3","border-2","border-gray-400"],[1,"text-lg","font-bold","text-white"],["id","main-content"],[1,"mx-auto","max-w-3xl","p-4","selection:bg-black","selection:text-white","mb-24","space-y-16"],[1,"mb-8","text-4xl","font-bold","dark:text-white","sm:mt-16"],[1,"mt-10","text-lg","dark:text-neutral-200"],[1,"mb-8","text-3xl","font-bold","dark:text-white","sm:mt-16"],[1,"space-y-4"],[1,"flex","items-end"],[1,"flex","flex-col","items-start","w-3/4"],["for","address",1,"text-lg","mb-2"],["id","address","type","text","placeholder","Bitcoin address to find the private key for",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","py-2","pl-2","pr-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-purple-500","w-full",3,"ngModelChange","ngModel"],[1,"flex","flex-col","items-end","w-1/4"],["for","few-shot",1,"text-lg","mb-2"],["id","few-shot","min","0","max","50","type","number",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","py-2","pl-2","pr-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-purple-500","w-16",3,"ngModelChange","ngModel"],[1,"flex","justify-between"],["progress","","title","Download LLM","class","positive",3,"busy","click",4,"ngIf"],["progress","","title","Predict Private Key","class","positive",3,"busy","click",4,"ngIf"],["progress","","title","Generate Address",1,"neutral",3,"click","busy"],[1,"flex","justify-end","min-h-[36px]"],["progress","","title","Generate Address","class","neutral",3,"busy","click",4,"ngIf"],["progress","","title","Delete LLM","class","negative",3,"busy","click",4,"ngIf"],["href","https://huggingface.co/h2oai/h2o-danube3-500m-base"],["href","https://huggingface.co/lobkov/h2o-danube3-500m-base-Q4_K_M-GGUF"],[1,"font-bold"],["href","https://emscripten.org/"],["href","https://github.com/ggerganov/llama.cpp"],[1,"rounded","bg-neutral-200/50","p-1"],["href","https://angular.dev/"],["href","https://tailwindcss.com/"],[1,"list-disc","text-lg","ml-8","mt-4"],["href","https://dexie.org/"],["href","https://en.wikipedia.org/wiki/Retrieval-augmented_generation"],["href","https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximation_methods"],["href","https://en.wikipedia.org/wiki/Hierarchical_Navigable_Small_World_graphs"],["href","https://en.wikipedia.org/wiki/Avalanche_effect","target","_blank"],[1,"mt-10","text-lg","dark:text-neutral-200","font-bold"],["href","https://arxiv.org/abs/2206.07682"],["href","https://en.wikipedia.org/wiki/Catastrophic_interference","target","_blank"],[1,"mt-10","bg-neutral-800","p-8","pb-20","sm:pb-8"],[1,"mx-auto","flex","flex-col","sm:max-w-4xl","sm:flex-row","sm:justify-between"],["progress","","title","Download LLM",1,"positive",3,"click","busy"],["progress","","title","Predict Private Key",1,"positive",3,"click","busy"],["progress","","title","Delete LLM",1,"negative",3,"click","busy"]],template:function(o,i){if(o&1){let s=Oo();R(0,"div",1)(1,"header",2)(2,"div",3)(3,"a",4),Ur(4,"img",5),R(5,"span",6),A(6,"WOW Look..."),O()()()(),R(7,"main",7)(8,"article",8)(9,"h1",9),A(10,"Using LLMs to Predict Bitcoin Private Keys "),O(),R(11,"p",10),A(12," Causal Large Language Models predict the next token in a sequence of previous tokens. We give an LLM a bitcoin public address and expect it to predict the secret private key that generated that address. "),O(),R(13,"section")(14,"h2",11),A(15,"Try it"),O(),R(16,"div",12)(17,"div",13)(18,"div",14)(19,"label",15),A(20," Bitcoin Address "),O(),R(21,"input",16),vt("ngModelChange",function(c){return Wn(s),zn(i.setInputAddress(c))}),O()(),R(22,"div",17)(23,"label",18),A(24," Few-Shot Samples "),O(),R(25,"input",19),qd("ngModelChange",function(c){return Wn(s),ww(i.numSamples,c)||(i.numSamples=c),zn(c)}),O()()(),R(26,"div",20),jr(27,Y1,2,1,"button",21)(28,Z1,2,1,"button",22),R(29,"button",23),vt("click",function(){return Wn(s),zn(i.genAddress())}),A(30," Generate Address "),O()(),R(31,"div"),Ur(32,"message-log",null,0),O(),R(34,"div",24),jr(35,Q1,2,1,"button",25)(36,X1,2,1,"button",26),O()()(),R(37,"section")(38,"h2",11),A(39,"How it works"),O(),R(40,"p",10),A(41," The LLM that is used is the "),R(42,"a",27),A(43,"Danube3 500 million parameter base model by H20"),O(),A(44,". It has been converted to GGUF format and quantized to 4 bits to reduce it's size to "),R(45,"a",28),A(46,"318mb"),O(),A(47,". "),R(48,"span",29),A(49,"It runs entirely in the browser, on the device"),O(),A(50,". "),O(),R(51,"p",10)(52,"a",30),A(53,"Emscripten"),O(),A(54," was used to build "),R(55,"a",31),A(56,"llama.cpp"),O(),A(57," as a static WebAssembly library (with SIMD and multi-thread support). This handles all the math operations in the layers of the model and is configured to use flash attention. "),O(),R(58,"p",10),A(59," The inference code is written in c++ and compiled to WebAssembly and javascript with the llama.cpp library using Emscripten. "),R(60,"kbd",32),A(61,"Embind"),O(),A(62," is used to bind C++ classes to javascript classes, which reduces developer code. The "),R(63,"kbd",32),A(64,"proxy.h"),O(),A(65," API is used with "),R(66,"kbd",32),A(67,"ASYNCIFY"),O(),A(68," and "),R(69,"kbd",32),A(70,"PROXY_TO_PTHREAD"),O(),A(71," flags to run the code asynchonously in one or more web workers. This stops the main javascript event loop being blocked by the heavy compute occuring when inferencing the model, which allows the UI to remain responsive. "),O(),R(72,"p",10),A(73," The web app is constucted using "),R(74,"a",33),A(75,"Angular"),O(),A(76," and "),R(77,"a",34),A(78,"Tailwind CSS"),O(),A(79,". "),O(),R(80,"p",10),A(81," A random Bitcoin address is generated (or provided by the user). The address can use any of these formats: "),O(),R(82,"ul",35)(83,"li"),A(84,'Public Key Hash (begins "1")'),O(),R(85,"li"),A(86,'Script Hash (begins "3")'),O(),R(87,"li"),A(88,'Witness Public Key Hash (begins "bc1q")'),O(),R(89,"li"),A(90,'Taproot (begins "bc1p")'),O()(),R(91,"p",10),A(92," The GGUF model file is downloaded from Hugging Face and kept in the browser IndexedDB store (using "),R(93,"a",36),A(94,"Dexie.js"),O(),A(95,"). "),O(),R(96,"p",10),A(97," The model file is passed to the WebAssembly module which loads it into RAM using llama.cpp. "),O(),R(98,"p",10),A(99,' A prompt for the LLM is generated with "few-shot" examples. Each example is on one line and contains the Bitcoin address and the corresponding base58 encoded private key. The final line contains only the target Bitcoin address. The expectation is that the LLM will predict the private key tokens that are absent for the target but present for the examples. '),O(),R(100,"p",10),A(101," This is similar in concept to "),R(102,"a",37),A(103," Retrieval Augmented Generation (RAG)"),O(),A(104," which expands the context of the prompt by providing external knowledge which was not present in the training data. The extra context in a RAG system is typically retrieved from a database (often using "),R(105,"a",38),A(106,"ANN"),O(),A(107," such as "),R(108,"a",39),A(109,"HNSW"),O(),A(110,"). For this system we generate random keys and addresses instead of finding similar ones (reasons why below). "),O(),R(111,"p",10),A(112," The prompt is given to the model, which predicts the most likely token that would appear next in the sequence. This is repeated until 44 characters have been generated, which is the length of a 256 bit private key that has been base58 encoded. "),O(),R(113,"p",10),A(114," The generated candidate private key is then used to derive a Bitcoin address, which is compared to the target address to see if the LLM predicted correctly. "),O()(),R(115,"section")(116,"h2",11),A(117,"Don't expect to find Private Keys"),O(),R(118,"p",10),A(119," LLMs are effective because they are trained on data that is inherently predictable. Even though there are a seemingly infinite ways to combine words into sentences, the languages we use have proven successful because we have restricted which words are used together and we've built grammatical patterns so that it is easier for us to remember how to use the words effectively. LLMs are effective at identifying these underlying patterns. "),O(),R(120,"p",10),A(121," Bitcoin addresses however, have been specifically designed to avoid predictable patterns. They are created using cryptographic algorithms that apply an "),R(122,"a",40),A(123," avalanche effect"),O(),A(124," where one small change in the private key causes a dramatic change in the address. They are inherently unpredictable by design. "),O(),R(125,"p",41),A(126," An LLM will not predict private keys because there are no patterns in the tokens of the Bitcoin addresses or keys. "),O(),R(127,"p",10),A(128," Even if an LLM was trained with hundreds of trillions of tokens of Bitcoin addresses and private key data, the neural network would not converge because it would be unable to find temporal patterns between the tokens. "),O()(),R(129,"section")(130,"h2",11),A(131,"Why make it then?"),O(),R(132,"p",10),A(133," To demonstrate that LLMs can predict text that looks plausible, even with data that is not predictable, but it should not be mistaken as being correct or valuable. "),O(),R(134,"p",10),A(135," To demonstrate that (not so large) LLMs can run on device, in the browser. "),O(),R(136,"p",10),A(137," There are other domains where temporal patterns do exist within the data where this technique may be applied effectively. Possibly enhanced with RAG or fine-tuning. "),O()(),R(138,"section")(139,"h2",11),A(140,"Possible Improvements"),O(),R(141,"p",10),A(142," Increase the number of few-shot samples in the prompt. "),O(),R(143,"p",10),A(144," Trim the LLM vocabulary to only include tokens that are a single character. The token "),R(145,"kbd",32),A(146,"We"),O(),A(147," is treated differently to the tokens "),R(148,"kbd",32),A(149,"W"),O(),A(150," and "),R(151,"kbd",32),A(152,"e"),O(),A(153,". "),O(),R(154,"p",10),A(155," Using a wider and deeper LLM such as LLama 3 8B/70B or Falcon 180B may result in better predictions. Scaling up models has shown unexpected "),R(156,"a",42),A(157,"emergent abilities"),O(),A(158,". "),O(),R(159,"p",10),A(160," Fine-tune the LLM using a dataset of bitcoin addresses and private keys (although the loss will probably not reduce and can be prone to "),R(161,"a",43),A(162," catastrophic forgetting"),O(),A(163,") "),O()()()(),R(164,"section",44),Ur(165,"div",45),O()()}o&2&&(wt(21),We("ngModel",i.bitcoinAddress.address),wt(4),zd("ngModel",i.numSamples),wt(2),We("ngIf",!i.haveLLM),wt(),We("ngIf",i.haveLLM),wt(),We("busy",i.busy.genAddress),wt(6),We("ngIf",i.llama.cpp),wt(),We("ngIf",i.haveLLM))},dependencies:[bb,ou,Lh,gb,Bh,Fh,Ph,Eb,ji,tc,Vh]});let e=t;return e})();ev(hE,tv).catch(e=>console.error(e));
